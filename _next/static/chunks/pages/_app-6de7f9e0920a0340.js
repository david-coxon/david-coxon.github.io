(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{108:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},207:(e,t,n)=>{var r=n(6425),i=n(8010);e.exports=function(e,t){return e&&r(t,i(t),e)}},305:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?0x1fffffffffffff:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},306:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},331:(e,t,n)=>{var r=n(1253),i=n(2577),o=n(875),s=n(207),a=n(8320),c=n(5146),d=n(2959),l=n(6383),h=n(5376),u=n(5876),p=n(5511),f=n(9139),y=n(5099),w=n(2265),g=n(5957),m=n(3283),v=n(3152),b=n(1772),C=n(3725),I=n(9470),x=n(8010),E=n(5897),A="[object Arguments]",_="[object Function]",P="[object Object]",O={};O[A]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[P]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[_]=O["[object WeakMap]"]=!1,e.exports=function e(t,n,M,j,S,R){var L,T=1&n,B=2&n,F=4&n;if(M&&(L=S?M(t,j,S,R):M(t)),void 0!==L)return L;if(!C(t))return t;var k=m(t);if(k){if(L=y(t),!T)return d(t,L)}else{var $=f(t),U=$==_||"[object GeneratorFunction]"==$;if(v(t))return c(t,T);if($==P||$==A||U&&!S){if(L=B||U?{}:g(t),!T)return B?h(t,a(L,t)):l(t,s(L,t))}else{if(!O[$])return S?t:{};L=w(t,$,T)}}R||(R=new r);var N=R.get(t);if(N)return N;R.set(t,L),I(t)?t.forEach(function(r){L.add(e(r,n,M,r,t,R))}):b(t)&&t.forEach(function(r,i){L.set(i,e(r,n,M,i,t,R))});var G=F?B?p:u:B?E:x,W=k?void 0:G(t);return i(W||t,function(r,i){W&&(r=t[i=r]),o(L,i,e(r,n,M,i,t,R))}),L}},387:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},396:(e,t,n)=>{e.exports=n(387)(Object.keys,Object)},522:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},735:e=>{e.exports=function(e){return this.__data__.get(e)}},766:(e,t,n)=>{var r=n(2183);e.exports=function(){this.__data__=new r,this.size=0}},769:(e,t,n)=>{e.exports=n(387)(Object.getPrototypeOf,Object)},875:(e,t,n)=>{var r=n(1356),i=n(6888),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];o.call(e,t)&&i(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},973:(e,t,n)=>{var r=n(9703);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},1018:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},1036:(e,t,n)=>{var r=n(1253),i=n(5987),o=n(3464),s=n(9411),a=n(9139),c=n(3283),d=n(3152),l=n(8399),h="[object Arguments]",u="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,y,w,g){var m=c(e),v=c(t),b=m?u:a(e),C=v?u:a(t);b=b==h?p:b,C=C==h?p:C;var I=b==p,x=C==p,E=b==C;if(E&&d(e)){if(!d(t))return!1;m=!0,I=!1}if(E&&!I)return g||(g=new r),m||l(e)?i(e,t,n,y,w,g):o(e,t,b,n,y,w,g);if(!(1&n)){var A=I&&f.call(e,"__wrapped__"),_=x&&f.call(t,"__wrapped__");if(A||_){var P=A?e.value():e,O=_?t.value():t;return g||(g=new r),w(P,O,n,y,g)}}return!!E&&(g||(g=new r),s(e,t,n,y,w,g))}},1101:(e,t,n)=>{"use strict";n.d(t,{L:()=>iD,_:()=>iZ,a:()=>nu,b:()=>nR,c:()=>b,d:()=>ny,e:()=>iq,f:()=>g,g:()=>v,h:()=>iH,i:()=>m,j:()=>iz,k:()=>i7,l:()=>X,r:()=>nx});var r,i,o,s,a,c=n(4801),d=n(3483),l=n.n(d),h=n(3541),u=n.n(h),p=n(7846),f=n.n(p),y=n(2149),w=n(4801).Buffer;let g=(e,t)=>`${t}<${btoa(JSON.stringify(e))}>`,m=(e,t)=>{try{return e.origin===t.origin}catch(e){return!1}},v=(e,t)=>{let n=new MutationObserver(n=>{let r=!1;n.forEach(e=>{"TITLE"!==e.target.parentNode?.nodeName&&"TITLE"!==e.target.nodeName?(e.removedNodes.forEach(e=>{"TITLE"!==e.nodeName&&"TITLE"!==e.parentNode?.nodeName||(r=!0)}),e.addedNodes.forEach(e=>{"TITLE"!==e.nodeName&&"TITLE"!==e.parentNode?.nodeName||(r=!0)})):r=!0});let i=e.querySelector("title")?.textContent??"";r&&t(i)});return n.observe(e,{childList:!0,subtree:!0,characterData:!0}),n};var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},C={},I={},x={},E={};async function A(e){let t=[];for(let n of e){let e=await n();t.push(e)}return t}Object.defineProperty(E,"__esModule",{value:!0}),E.promiseMapSerial=E.serial=E.promiseMap=E.promisify=void 0,E.promisify=function(e){return(...t)=>new Promise((n,r)=>{e(...t,(e,t)=>e?r(e):n(t))})},E.promiseMap=async function(e,t){return Promise.all(e.map(t))},E.serial=A,E.promiseMapSerial=async function(e,t){return A(e.map((e,n,r)=>()=>t(e,n,r)))};var _,P,O=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},M=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(x,"__esModule",{value:!0}),x.Reply=x.EmitterBase=x.Base=void 0;class j{constructor(e){this.isNodeEnvironment=()=>"node"===this.wire.environment.type,this.isOpenFinEnvironment=()=>"openfin"===this.wire.environment.type,this.isBrowserEnvironment=()=>"other"===this.wire.environment.type,this.wire=e}get fin(){return this.wire.getFin()}get me(){return this.wire.me}}x.Base=j,x.EmitterBase=class extends j{constructor(e,t,...n){super(e),this.topic=t,_.set(this,void 0),P.set(this,void 0),this.eventNames=()=>this.hasEmitter()?this.getOrCreateEmitter().eventNames():[],this.emit=(e,t,...n)=>!!this.hasEmitter()&&this.getOrCreateEmitter().emit(e,t,...n),this.hasEmitter=()=>this.wire.eventAggregator.has(M(this,_,"f")),this.cleanUpRemovedListener=(e,t)=>{let n=M(this,P,"f").get(t);n&&this.wire.eventAggregator.getOrCreate(M(this,_,"f")).removeListener(e,n)},this.getOrCreateEmitter=()=>{let e=this.wire.eventAggregator.getOrCreate(M(this,_,"f"));return e.listeners("removeListener").includes(this.cleanUpRemovedListener)||e.on("removeListener",this.cleanUpRemovedListener),e},this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[],this.listenerCount=e=>this.hasEmitter()?this.getOrCreateEmitter().listenerCount(e):0,this.registerEventListener=async(e,t={},n,r)=>{let i={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e},o=this.getOrCreateEmitter();n(o);try{await this.wire.sendAction("subscribe-to-desktop-event",i)}catch(e){throw r(o),this.deleteEmitterIfNothingRegistered(o),e}},this.deregisterEventListener=async(e,t={})=>{if(this.hasEmitter()){let n={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e};return await this.wire.sendAction("unsubscribe-to-desktop-event",n).catch(()=>null),this.getOrCreateEmitter()}return Promise.resolve()},O(this,_,[t,...n],"f"),O(this,P,new WeakMap,"f"),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[]}async on(e,t,n){return await this.registerEventListener(e,n,n=>{n.on(e,t)},n=>{n.removeListener(e,t)}),this}async addListener(e,t,n){return this.on(e,t,n)}async once(e,t,n){let r=()=>this.deregisterEventListener(e);return M(this,P,"f").set(t,r),await this.registerEventListener(e,n,n=>{n.once(e,r),n.once(e,t)},n=>{n.removeListener(e,r),n.removeListener(e,t)}),this}async prependListener(e,t,n){return await this.registerEventListener(e,n,n=>{n.prependListener(e,t)},n=>{n.removeListener(e,t)}),this}async prependOnceListener(e,t,n){let r=()=>this.deregisterEventListener(e);return M(this,P,"f").set(t,r),await this.registerEventListener(e,n,n=>{n.prependOnceListener(e,t),n.once(e,r)},n=>{n.removeListener(e,t),n.removeListener(e,r)}),this}async removeListener(e,t,n){let r=await this.deregisterEventListener(e,n);return r&&(r.removeListener(e,t),this.deleteEmitterIfNothingRegistered(r)),this}async deregisterAllListeners(e){let t={...this.identity,type:e,topic:this.topic};if(this.hasEmitter()){let e=this.getOrCreateEmitter(),n=e.listenerCount(t.type),r=[];for(let e=0;e<n;e++)r.push(this.wire.sendAction("unsubscribe-to-desktop-event",t).catch(()=>null));return await Promise.all(r),e}}async removeAllListeners(e){let t=async e=>{let t=await this.deregisterAllListeners(e);t&&(t.removeAllListeners(e),this.deleteEmitterIfNothingRegistered(t))};if(e)await t(e);else if(this.hasEmitter()){let e=this.getOrCreateEmitter().eventNames();await (0,E.promiseMap)(e,t)}return this}deleteEmitterIfNothingRegistered(e){e.eventNames().every(e=>"removeListener"===e)&&this.wire.eventAggregator.delete(M(this,_,"f"))}},_=new WeakMap,P=new WeakMap,x.Reply=class{};var S={};Object.defineProperty(S,"__esModule",{value:!0});var R=S.RuntimeError=S.NotSupportedError=S.NotImplementedError=S.NoAckError=S.DuplicateCorrelationError=S.UnexpectedActionError=S.DisconnectedError=void 0;class L extends Error{constructor(e){super(`Expected websocket state OPEN but found ${e}`),this.readyState=e}}S.DisconnectedError=L;class T extends Error{}S.UnexpectedActionError=T;class B extends Error{}S.DuplicateCorrelationError=B;class F extends Error{}S.NoAckError=F;class k extends Error{}S.NotImplementedError=k;class $ extends Error{}S.NotSupportedError=$;class U extends Error{constructor(e){let{message:t,name:n,stack:r,...i}=e;super(t),"cause"in e&&e.cause&&(this.cause=new U(e.cause)),this.name=n||"Error",this.stack=r??this.toString(),Object.keys(i).filter(e=>"cause"!==e).forEach(e=>{this[e]=i[e]})}}class N extends Error{static trimEndCallSites(e,t){let n=Error.stackTraceLimit,r=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>t;let i="string"==typeof e.stack,o=(i?e.stack?.split("\n"):e.stack)??[];if(Error.prepareStackTrace=r,Error.stackTraceLimit=n,o.length){let n=[];for(let e of i?o:o.slice(1))if(n.push(e),t.test(e.toString()))break;e.stack=i?n.join("\n"):N.prepareStackTrace(e,n)}}static getCallSite(e=0){let t=Error.stackTraceLimit,n=e+1;Error.stackTraceLimit=t+n;let r=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>t;let i=Error().stack?.slice(n)??[];return Error.prepareStackTrace=r,Error.stackTraceLimit=t,i}static prepareStackTrace(e,t){return"function"==typeof Error.prepareStackTrace?Error.prepareStackTrace(e,t):`${e.name||"Error"}: ${e.message||""}
`+t.map(e=>`    at ${e}`).join("\n")}constructor(e,t){let{reason:n,error:r}=e;super(n),this.name=this.constructor.name,r?.stack&&(this.cause=new U(r)),t&&(this.stack=N.prepareStackTrace(this,t))}}R=S.RuntimeError=N;var G={},W={},D={};Object.defineProperty(D,"__esModule",{value:!0}),D.validateIdentity=void 0,D.validateIdentity=function(e){let t;return"object"==typeof e&&"string"==typeof e.uuid||(t="Not a valid identity object"),t};var H={},V={},z={},K={},Y={},J={},q={};Object.defineProperty(q,"__esModule",{value:!0}),q.handleDeprecatedWarnings=void 0,q.handleDeprecatedWarnings=e=>{(e.contentNavigation?.whitelist||e.contentNavigation?.blacklist||e.contentRedirect?.whitelist||e.contentRedirect?.blacklist)&&console.warn("The properties 'whitelist' and 'blacklist' have been marked as deprecated and will be removed in a future version. Please use 'allowlist' and 'denylist'.")};var Z={},X={};Object.defineProperty(X,"__esModule",{value:!0}),X.AsyncRetryableLazy=Q=X.Lazy=void 0;var Q=X.Lazy=class{constructor(e){this.producerFn=e}getValue(){return this.value||(this.value=this.producerFn()),this.value}};X.AsyncRetryableLazy=class{constructor(e){this.producerFn=e}async getValue(){return this.promise||(this.promise=this.producerFn().catch(e=>{throw delete this.promise,e})),this.promise}};var ee={};Object.defineProperty(ee,"__esModule",{value:!0}),ee.WebContents=void 0;let et=x;class en extends et.EmitterBase{constructor(e,t,n){super(e,n,t.uuid,t.name),this.identity=t,this.entityType=n}capturePage(e){return this.wire.sendAction("capture-page",{options:e,...this.identity}).then(({payload:e})=>e.data)}executeJavaScript(e){return this.wire.sendAction("execute-javascript-in-window",{...this.identity,code:e}).then(({payload:e})=>e.data)}getZoomLevel(){return this.wire.sendAction("get-zoom-level",this.identity).then(({payload:e})=>e.data)}setZoomLevel(e){return this.wire.sendAction("set-zoom-level",{...this.identity,level:e}).then(()=>{})}navigate(e){return this.wire.sendAction("navigate-window",{...this.identity,url:e}).then(()=>{})}navigateBack(){return this.wire.sendAction("navigate-window-back",{...this.identity}).then(()=>{})}async navigateForward(){await this.wire.sendAction("navigate-window-forward",{...this.identity})}stopNavigation(){return this.wire.sendAction("stop-window-navigation",{...this.identity}).then(()=>{})}reload(e=!1){return this.wire.sendAction("reload-window",{ignoreCache:e,...this.identity}).then(()=>{})}print(e={}){return this.wire.sendAction("print",{...this.identity,options:e}).then(()=>{})}findInPage(e,t){return this.wire.sendAction("find-in-page",{...this.identity,searchTerm:e,options:t}).then(({payload:e})=>e.data)}stopFindInPage(e){return this.wire.sendAction("stop-find-in-page",{...this.identity,action:e}).then(()=>{})}getPrinters(){return this.wire.sendAction("get-printers",{...this.identity}).then(({payload:e})=>e.data)}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){await this.wire.sendAction("focus-window",{emitSynthFocused:e,...this.identity})}async showDeveloperTools(){await this.wire.sendAction("show-developer-tools",this.identity)}async getProcessInfo(){let{payload:{data:e}}=await this.wire.sendAction("get-process-info",this.identity);return e}async getSharedWorkers(){return this.wire.sendAction("get-shared-workers",this.identity).then(({payload:e})=>e.data)}async inspectSharedWorker(){await this.wire.sendAction("inspect-shared-worker",{...this.identity})}async inspectSharedWorkerById(e){await this.wire.sendAction("inspect-shared-worker-by-id",{...this.identity,workerId:e})}async inspectServiceWorker(){await this.wire.sendAction("inspect-service-worker",{...this.identity})}async showPopupWindow(e){if(this.wire.sendAction(`${this.entityType}-show-popup-window`,this.identity).catch(()=>{}),e?.onPopupReady){let t=async({popupName:t})=>{try{let n=this.fin.Window.wrapSync({uuid:this.fin.me.uuid,name:t});await e.onPopupReady(n)}catch(e){throw Error(`Something went wrong during onPopupReady execution: ${e}`)}};await this.once("popup-ready",t)}let{payload:t}=await this.wire.sendAction("try-create-popup-window",{options:{...e,hasResultCallback:!!e?.onPopupResult,hasReadyCallback:!!e?.onPopupReady},...this.identity}),{data:{willOpen:n,options:r}}=t;if(n&&await this.fin.Window.create(r.initialOptions),e?.onPopupResult){let t=async t=>{await e.onPopupResult((e=>{let{name:t,uuid:n,result:r,data:i}=e,o={identity:{name:t,uuid:n},result:r};return i&&(o.data=i),o})(t))},n=async()=>{await this.removeListener("popup-result",t)};await this.on("popup-result",t),await this.once("popup-teardown",n)}let{payload:i}=await this.wire.sendAction("show-popup-window",{options:r,...this.identity});return i.data}async getScreenCapturePermission(){return(await this.wire.sendAction("get-screen-capture-permissions",this.identity)).payload.data}}function er(){var e,t;return eO||(eO=1,e=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=b&&b.__exportStar||function(t,n){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||e(n,t,r)},Object.defineProperty(Y,"__esModule",{value:!0}),t(function(){if(e_)return J;e_=1,Object.defineProperty(J,"__esModule",{value:!0}),J.ViewModule=void 0;let e=x,t=er();class n extends e.Base{async create(e){let{uuid:t}=this.wire.me;if(!e.name||"string"!=typeof e.name)throw Error("Please provide a name property as a string in order to create a View.");return(0,q.handleDeprecatedWarnings)(e),this.wire.environment.childViews?await this.wire.environment.createChildContent({entityType:"view",options:{...e,uuid:t}}):await this.wire.sendAction("create-view",{...e,uuid:t}),this.wrapSync({uuid:t,name:e.name})}async wrap(e){this.wire.sendAction("view-wrap").catch(e=>{});let n=(0,D.validateIdentity)(e);if(n)throw Error(n);return new t.View(this.wire,e)}wrapSync(e){this.wire.sendAction("view-wrap-sync").catch(e=>{});let n=(0,D.validateIdentity)(e);if(n)throw Error(n);return new t.View(this.wire,e)}getCurrent(){if(this.wire.sendAction("view-get-current").catch(e=>{}),!this.wire.me.isView)throw Error("You are not in a View context");let{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("view-get-current-sync").catch(e=>{}),!this.wire.me.isView)throw Error("You are not in a View context");let{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}return J.ViewModule=n,J}(),Y),t(function(){var e;if(eP)return Z;eP=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.View=void 0;let t=ee,n=eu();class r extends t.WebContents{constructor(t,r){super(t,r,"view"),this.identity=r,e.set(this,new X.Lazy(()=>this.fin.Platform.wrapSync(this.identity).getClient())),this.attach=async e=>{await this.wire.sendAction("attach-view",{target:e,...this.identity})},this.destroy=async()=>{await this.wire.sendAction("destroy-view",{...this.identity})},this.show=async()=>{await this.wire.sendAction("show-view",{...this.identity})},this.showAt=async(e,t={})=>{await this.wire.sendAction("show-view-at",{bounds:e,...this.identity,options:t})},this.bringToFront=async()=>{await this.wire.sendAction("bring-view-to-front",{...this.identity})},this.hide=async()=>{await this.wire.sendAction("hide-view",{...this.identity})},this.setBounds=async e=>{await this.wire.sendAction("set-view-bounds",{bounds:e,...this.identity})},this.getBounds=async()=>(await this.wire.sendAction("get-view-bounds",{...this.identity})).payload.data,this.getInfo=async()=>(await this.wire.sendAction("get-view-info",{...this.identity})).payload.data,this.getParentLayout=async()=>(this.wire.sendAction("view-get-parent-layout").catch(()=>{}),this.fin.Platform.Layout.getLayoutByViewIdentity(this.identity)),this.getOptions=async()=>this.wire.sendAction("get-view-options",{...this.identity}).then(({payload:e})=>e.data),this.updateOptions=async e=>this.wire.sendAction("update-view-options",{options:e,...this.identity}).then(()=>{}),this.getCurrentWindow=async()=>{let{payload:{data:e}}=await this.wire.sendAction("get-view-window",{...this.identity});return new n._Window(this.wire,e)},this.getCurrentStack=async()=>{this.wire.sendAction("view-get-current-stack").catch(()=>{});try{return(await this.getParentLayout()).getStackByViewIdentity(this.identity)}catch(e){throw new S.RuntimeError({reason:"This view does not belong to a stack.",error:e})}},this.triggerBeforeUnload=async()=>(await this.wire.sendAction("trigger-before-unload",{...this.identity})).payload.data,this.bindToElement=async e=>{if(!e)throw Error("Element not found.");return this.wire.environment.observeBounds(e,async e=>this.setBounds(e))}}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){let t=await this.getCurrentWindow();await t.focusedWebViewWasChanged(),await super.focus({emitSynthFocused:e})}}return Z.View=r,e=new WeakMap,Z}(),Y)),Y}ee.WebContents=en,Object.defineProperty(K,"__esModule",{value:!0}),K.Application=void 0;let ei=x,eo=eu(),es=er();class ea extends ei.EmitterBase{constructor(e,t){super(e,"application",t.uuid),this.identity=t,this.window=new eo._Window(this.wire,{uuid:this.identity.uuid,name:this.identity.uuid})}windowListFromIdentityList(e){let t=[];return e.forEach(e=>{t.push(new eo._Window(this.wire,{uuid:e.uuid,name:e.name}))}),t}isRunning(){return this.wire.sendAction("is-application-running",this.identity).then(({payload:e})=>e.data)}async quit(e=!1){try{await this._close(e),await this.wire.sendAction("destroy-application",{force:e,...this.identity})}catch(e){if(!["Remote connection has closed","Could not locate the requested application"].some(t=>e.message.includes(t)))throw e}}async _close(e=!1){try{await this.wire.sendAction("close-application",{force:e,...this.identity})}catch(e){if(!e.message.includes("Remote connection has closed"))throw e}}close(e=!1){return console.warn("Deprecation Warning: Application.close is deprecated Please use Application.quit"),this.wire.sendAction("application-close",this.identity).catch(e=>{}),this._close(e)}getChildWindows(){return this.wire.sendAction("get-child-windows",this.identity).then(({payload:e})=>{let t=[];return e.data.forEach(e=>{t.push({uuid:this.identity.uuid,name:e})}),this.windowListFromIdentityList(t)})}getManifest(){return this.wire.sendAction("get-application-manifest",this.identity).then(({payload:e})=>e.data)}getParentUuid(){return this.wire.sendAction("get-parent-application",this.identity).then(({payload:e})=>e.data)}getShortcuts(){return this.wire.sendAction("get-shortcuts",this.identity).then(({payload:e})=>e.data)}async getViews(){let{payload:e}=await this.wire.sendAction("application-get-views",this.identity);return e.data.map(e=>new es.View(this.wire,e))}getZoomLevel(){return this.wire.sendAction("get-application-zoom-level",this.identity).then(({payload:e})=>e.data)}getWindow(){return this.wire.sendAction("application-get-window",this.identity).catch(e=>{}),Promise.resolve(this.window)}registerUser(e,t){return this.wire.sendAction("register-user",{userName:e,appName:t,...this.identity}).then(()=>{})}removeTrayIcon(){return this.wire.sendAction("remove-tray-icon",this.identity).then(()=>{})}restart(){return this.wire.sendAction("restart-application",this.identity).then(()=>{})}run(){return console.warn("Deprecation Warning: Application.run is deprecated Please use fin.Application.start"),this.wire.sendAction("application-run",this.identity).catch(e=>{}),this._run()}_run(e={}){return this.wire.sendAction("run-application",{manifestUrl:this._manifestUrl,opts:e,...this.identity}).then(()=>{})}scheduleRestart(){return this.wire.sendAction("relaunch-on-close",this.identity).then(()=>{})}async sendApplicationLog(){let{payload:e}=await this.wire.sendAction("send-application-log",this.identity);return e.data}async setJumpList(e){await this.wire.sendAction("set-jump-list",{config:e,...this.identity})}setTrayIcon(e){return this.wire.sendAction("set-tray-icon",{enabledIcon:e,...this.identity}).then(()=>{})}async setTrayIconToolTip(e){await this.wire.sendAction("set-tray-icon-tooltip",{...this.identity,toolTip:e})}setShortcuts(e){return this.wire.sendAction("set-shortcuts",{data:e,...this.identity}).then(()=>{})}async setShortcutQueryParams(e){await this.wire.sendAction("set-shortcut-query-args",{data:e,...this.identity})}setZoomLevel(e){return this.wire.sendAction("set-application-zoom-level",{level:e,...this.identity}).then(()=>{})}async setAppLogUsername(e){await this.wire.sendAction("set-app-log-username",{data:e,...this.identity})}getTrayIconInfo(){return this.wire.sendAction("get-tray-icon-info",this.identity).then(({payload:e})=>e.data)}hasTrayIcon(){return this.wire.sendAction("has-tray-icon",this.identity).then(({payload:e})=>e.data)}terminate(){return this.wire.sendAction("terminate-application",this.identity).then(()=>{})}wait(){return this.wire.sendAction("wait-for-hung-application",this.identity).then(()=>{})}getInfo(){return this.wire.sendAction("get-info",this.identity).then(({payload:e})=>e.data)}async getProcessInfo(){let{payload:{data:e}}=await this.wire.sendAction("application-get-process-info",this.identity);return e}async setFileDownloadLocation(e){let{name:t}=this.wire.me,n={uuid:this.identity.uuid,name:t};await this.wire.sendAction("set-file-download-location",{...n,downloadLocation:e})}async getFileDownloadLocation(){let{payload:{data:e}}=await this.wire.sendAction("get-file-download-location",this.identity);return e}async showTrayIconPopupMenu(e){let{name:t}=this.wire.me,n={uuid:this.identity.uuid,name:t},{payload:r}=await this.wire.sendAction("show-tray-icon-popup-menu",{...n,options:e});return r.data}async closeTrayIconPopupMenu(){let{name:e}=this.wire.me,t={uuid:this.identity.uuid,name:e};await this.wire.sendAction("close-tray-icon-popup-menu",{...t})}}K.Application=ea,Object.defineProperty(z,"__esModule",{value:!0}),z.ApplicationModule=void 0;let ec=x;class ed extends ec.Base{async wrap(e){this.wire.sendAction("wrap-application").catch(e=>{});let t=(0,D.validateIdentity)(e);if(t)throw Error(t);return new K.Application(this.wire,e)}wrapSync(e){this.wire.sendAction("wrap-application-sync").catch(e=>{});let t=(0,D.validateIdentity)(e);if(t)throw Error(t);return new K.Application(this.wire,e)}async _create(e){return void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&void 0===e.isPlatformController&&(e.autoShow=!0),await this.wire.sendAction("create-application",e),this.wrap({uuid:e.uuid})}create(e){return console.warn("Deprecation Warning: fin.Application.create is deprecated. Please use fin.Application.start"),this.wire.sendAction("application-create").catch(e=>{}),this._create(e)}async start(e){this.wire.sendAction("start-application").catch(e=>{});let t=await this._create(e);return await this.wire.sendAction("run-application",{uuid:e.uuid}),t}async startManyManifests(e,t){return this.wire.sendAction("run-applications",{applications:e,opts:t}).then(()=>{})}getCurrent(){return this.wire.sendAction("get-current-application").catch(e=>{}),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("get-current-application-sync").catch(e=>{}),this.wrapSync({uuid:this.wire.me.uuid})}async startFromManifest(e,t){this.wire.sendAction("application-start-from-manifest").catch(e=>{});let n=await this._createFromManifest(e);return await n._run(t),n}createFromManifest(e){return console.warn("Deprecation Warning: fin.Application.createFromManifest is deprecated. Please use fin.Application.startFromManifest"),this.wire.sendAction("application-create-from-manifest").catch(e=>{}),this._createFromManifest(e)}_createFromManifest(e){return this.wire.sendAction("get-application-manifest",{manifestUrl:e}).then(({payload:e})=>{let t=e.data.platform?e.data.platform.uuid:e.data.startup_app.uuid;return this.wrap({uuid:t})}).then(t=>(t._manifestUrl=e,t))}}z.ApplicationModule=ed,function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(z,e),n(K,e)}(V);var el={};function eh(){if(eM)return H;eM=1,Object.defineProperty(H,"__esModule",{value:!0}),H._Window=void 0;let e=ee,t=er();class n extends e.WebContents{constructor(e,t){super(e,t,"window")}async createWindow(e){this.wire.sendAction("window-create-window").catch(e=>{});let t=await (0,el.promisifySubscription)(this,"fire-constructor-callback");void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&(e.autoShow=!0),(0,q.handleDeprecatedWarnings)(e);let n=this.wire.environment.createChildContent({entityType:"window",options:e}),[r]=await Promise.all([t.getValue(),n]),{success:i}=r,o=r.data,{message:s}=o,a={message:s,cbPayload:i?{httpResponseCode:o.httpResponseCode,apiInjected:o.apiInjected}:{message:o.message,networkErrorCode:o.networkErrorCode,stack:o.stack},success:i};try{this.getWebWindow().fin.__internal_.openerSuccessCBCalled()}catch(e){}return a.success?this:Promise.reject(a)}getAllFrames(){return this.wire.sendAction("get-all-frames",this.identity).then(({payload:e})=>e.data)}activateAndFocus(e){return this.wire.sendAction("activate-window-and-focus",{winIdentity:this.identity,focusIdentity:e}).then(({payload:e})=>e.data)}getBounds(e){return this.wire.sendAction("get-window-bounds",{...this.identity,options:e}).then(({payload:e})=>e.data)}center(){return this.wire.sendAction("center-window",this.identity).then(()=>{})}blur(){return this.wire.sendAction("blur-window",this.identity).then(()=>{})}bringToFront(){return this.wire.sendAction("bring-window-to-front",this.identity).then(()=>{})}animate(e,t){return this.wire.sendAction("animate-window",{transitions:e,options:t,...this.identity}).then(()=>{})}hide(){return this.wire.sendAction("hide-window",this.identity).then(()=>{})}close(e=!1){return this.wire.sendAction("close-window",{force:e,...this.identity}).then(()=>{Object.setPrototypeOf(this,null)})}focusedWebViewWasChanged(){return this.wire.sendAction("focused-webview-changed",this.identity).then(()=>{})}getNativeId(){return this.wire.sendAction("get-window-native-id",this.identity).then(({payload:e})=>e.data)}async getCurrentViews(){let{payload:e}=await this.wire.sendAction("window-get-views",this.identity);return e.data.map(e=>new t.View(this.wire,e))}disableFrame(){return console.warn("Function is deprecated; use disableUserMovement instead."),this.wire.sendAction("disable-window-frame",this.identity).then(()=>{})}disableUserMovement(){return this.wire.sendAction("disable-window-frame",this.identity).then(()=>{})}enableFrame(){return console.warn("Function is deprecated; use enableUserMovement instead."),this.wire.sendAction("enable-window-frame",this.identity).then(()=>{})}enableUserMovement(){return this.wire.sendAction("enable-window-frame",this.identity).then(()=>{})}flash(){return this.wire.sendAction("flash-window",this.identity).then(()=>{})}stopFlashing(){return this.wire.sendAction("stop-flash-window",this.identity).then(()=>{})}getInfo(){return this.wire.sendAction("get-window-info",this.identity).then(({payload:e})=>e.data)}async getLayout(e){this.wire.sendAction("window-get-layout").catch(e=>{});let t=await this.getOptions();if(!t.layout&&!t.layoutSnapshot)throw Error("Window does not have a Layout");return this.fin.Platform.Layout.wrap(e??this.identity)}getOptions(){return this.wire.sendAction("get-window-options",this.identity).then(({payload:e})=>e.data)}getParentApplication(){return this.wire.sendAction("window-get-parent-application").catch(e=>{}),Promise.resolve(new V.Application(this.wire,this.identity))}getParentWindow(){return this.wire.sendAction("window-get-parent-window").catch(e=>{}),Promise.resolve(new V.Application(this.wire,this.identity)).then(e=>e.getWindow())}async getSnapshot(e){let t={area:e,...this.identity};return console.warn("Window.getSnapshot has been deprecated, please use Window.capturePage"),(await this.wire.sendAction("get-window-snapshot",t)).payload.data}getState(){return this.wire.sendAction("get-window-state",this.identity).then(({payload:e})=>e.data)}getWebWindow(){return this.wire.sendAction("window-get-web-window").catch(e=>{}),this.wire.environment.getWebWindow(this.identity)}isMainWindow(){return this.wire.sendAction("window-is-main-window").catch(e=>{}),this.me.uuid===this.me.name}isShowing(){return this.wire.sendAction("is-window-showing",this.identity).then(({payload:e})=>e.data)}maximize(){return this.wire.sendAction("maximize-window",this.identity).then(()=>{})}minimize(){return this.wire.sendAction("minimize-window",this.identity).then(()=>{})}moveBy(e,t,n){return this.wire.sendAction("move-window-by",{deltaLeft:e,deltaTop:t,positioningOptions:n,...this.identity}).then(()=>{})}moveTo(e,t,n){return this.wire.sendAction("move-window",{left:e,top:t,positioningOptions:n,...this.identity}).then(()=>{})}resizeBy(e,t,n,r){return this.wire.sendAction("resize-window-by",{deltaWidth:Math.floor(e),deltaHeight:Math.floor(t),anchor:n,positioningOptions:r,...this.identity}).then(()=>{})}resizeTo(e,t,n,r){return this.wire.sendAction("resize-window",{width:Math.floor(e),height:Math.floor(t),anchor:n,positioningOptions:r,...this.identity}).then(()=>{})}restore(){return this.wire.sendAction("restore-window",this.identity).then(()=>{})}setAsForeground(){return this.wire.sendAction("set-foreground-window",this.identity).then(()=>{})}setBounds(e,t){return this.wire.sendAction("set-window-bounds",{...e,...this.identity,positioningOptions:t}).then(()=>{})}show(e=!1){return this.wire.sendAction("show-window",{force:e,...this.identity}).then(()=>{})}showAt(e,t,n=!1){return this.wire.sendAction("show-at-window",{force:n,left:Math.floor(e),top:Math.floor(t),...this.identity}).then(()=>{})}updateOptions(e){return"frame"in e&&console.warn("Deprecation Warning: Starting with version 45 it will not be possible to change the frame value after window has been created."),this.wire.sendAction("update-window-options",{options:e,...this.identity}).then(()=>{})}authenticate(e,t){return this.wire.sendAction("window-authenticate",{userName:e,password:t,...this.identity}).then(()=>{})}async showPopupMenu(e){let{payload:t}=await this.wire.sendAction("show-popup-menu",{options:e,...this.identity});return t.data}async closePopupMenu(){return this.wire.sendAction("close-popup-menu",{...this.identity}).then(()=>{})}async dispatchPopupResult(e){this.wire.sendAction("window-dispatch-popup-result").catch(e=>{}),await this.wire.sendAction("dispatch-popup-result",{data:e,...this.identity})}async print(e={content:"self"}){switch(e.content){case void 0:case"self":return super.print(e);case"screenshot":return this.wire.sendAction("print-screenshot",this.identity).then(()=>{});case"views":return this.wire.sendAction("print-views",{...this.identity,options:e}).then(()=>{});default:return}}}return H._Window=n,H}function eu(){var e,t;return eS||(eS=1,e=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=b&&b.__exportStar||function(t,n){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||e(n,t,r)},Object.defineProperty(G,"__esModule",{value:!0}),t(function(){if(ej)return W;ej=1,Object.defineProperty(W,"__esModule",{value:!0}),W._WindowModule=void 0;let e=x,t=eh();class n extends e.Base{async wrap(e){this.wire.sendAction("window-wrap").catch(e=>{});let n=(0,D.validateIdentity)(e);if(n)throw Error(n);return new t._Window(this.wire,e)}wrapSync(e){this.wire.sendAction("window-wrap-sync").catch(e=>{});let n=(0,D.validateIdentity)(e);if(n)throw Error(n);return new t._Window(this.wire,e)}create(e){return this.wire.sendAction("create-window").catch(e=>{}),new t._Window(this.wire,{uuid:this.me.uuid,name:e.name}).createWindow(e)}getCurrent(){if(this.wire.sendAction("get-current-window").catch(e=>{}),!this.wire.me.isWindow)throw Error("You are not in a Window context");let{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("get-current-window-sync").catch(e=>{}),!this.wire.me.isWindow)throw Error("You are not in a Window context");let{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}return W._WindowModule=n,W}(),G),t(eh(),G)),G}Object.defineProperty(el,"__esModule",{value:!0}),el.promisifySubscription=void 0,el.promisifySubscription=async(e,t,n=()=>!0,r)=>{let i,o,s,a=new Promise((e,t)=>{i=e,o=t}),c=e=>{n(e)&&(clearTimeout(s),i(e))};return await e.on(t,c),r&&(s=setTimeout(()=>o(Error("event timed out")),r)),a.finally(()=>{e.removeListener(t,c).catch(()=>null)}),{getValue:()=>a}},Object.defineProperty(I,"__esModule",{value:!0}),I.System=void 0;let ep=x,ef=eu(),ey=l();class ew extends ep.EmitterBase{constructor(e){super(e,"system")}sendExternalProcessRequest(e,t){return new Promise((n,r)=>{let i,o,s,a,c="external-process-exited";"function"==typeof t.listener&&(s=e=>{let n=e||{};o={topic:"exited",uuid:n.processUuid||"",exitCode:n.exitCode||0},i===e.processUuid&&(t.listener(o),a.removeListener(c,s))},this.wire.me.name||(this.wire.me.name=this.wire.me.uuid),(a=new ef._Window(this.wire,this.wire.me)).on(c,s)),this.wire.sendAction(e,t).then(({payload:e})=>{i=e.data.uuid,n(e.data),o&&i===o.uuid&&(t.listener(o),a.removeListener(c,s))}).catch(e=>{a&&a.removeListener(c,s),r(e)})})}getVersion(){return this.wire.sendAction("get-version").then(({payload:e})=>e.data)}clearCache(e){return this.wire.sendAction("clear-cache",e).then(()=>{})}deleteCacheOnExit(){return this.wire.sendAction("delete-cache-request").then(()=>{})}exit(){return this.wire.sendAction("exit-desktop").then(()=>{})}async fetchManifest(e){let{payload:{data:t}}=await this.wire.sendAction("fetch-manifest",{manifestUrl:e});return t}flushCookieStore(){return this.wire.sendAction("flush-cookie-store").then(()=>{})}getAllWindows(){return this.wire.sendAction("get-all-windows").then(({payload:e})=>e.data)}getAllApplications(){return this.wire.sendAction("get-all-applications").then(({payload:e})=>e.data)}getCommandLineArguments(){return this.wire.sendAction("get-command-line-arguments").then(({payload:e})=>e.data)}async getCrashReporterState(){let{payload:{data:{diagnosticMode:e,isRunning:t}}}=await this.wire.sendAction("get-crash-reporter-state");return console.warn("diagnosticMode property is deprecated. It will be removed in a future version"),{diagnosticMode:e,diagnosticsMode:e,isRunning:t}}async startCrashReporter(e){let t={...e,diagnosticMode:e.diagnosticsMode||e.diagnosticMode},{payload:{data:{diagnosticMode:n,isRunning:r}}}=await this.wire.sendAction("start-crash-reporter",t);return{diagnosticMode:n,diagnosticsMode:n,isRunning:r}}getUniqueUserId(){return this.wire.sendAction("get-unique-user-id").then(({payload:e})=>e.data)}getEntityInfo(e,t){return this.wire.sendAction("get-entity-info",{uuid:e,name:t}).then(({payload:e})=>e.data)}getEnvironmentVariable(e){return this.wire.sendAction("get-environment-variable",{environmentVariables:e}).then(({payload:e})=>e.data)}getFocusedWindow(){return this.wire.sendAction("get-focused-window").then(({payload:e})=>e.data)}getFocusedContent(){return this.wire.sendAction("get-focused-content").then(({payload:e})=>e.data)}async isAppCertified(e){let{payload:{data:{certifiedInfo:t}}}=await this.wire.sendAction("is-app-certified",{manifestUrl:e});return t}getInstalledRuntimes(){return this.wire.sendAction("get-installed-runtimes").then(({payload:e})=>e.data.runtimes)}async getInstalledApps(){let{payload:{data:{installedApps:e}}}=await this.wire.sendAction("get-installed-apps");return e}getLog(e){return this.wire.sendAction("view-log",e).then(({payload:e})=>e.data)}getMachineId(){return this.wire.sendAction("get-machine-id").then(({payload:e})=>e.data)}getMinLogLevel(){return this.wire.sendAction("get-min-log-level").then(({payload:e})=>e.data)}getLogList(){return this.wire.sendAction("list-logs").then(({payload:e})=>e.data)}getMonitorInfo(){return this.wire.sendAction("get-monitor-info").then(({payload:e})=>e.data)}getMousePosition(){return this.wire.sendAction("get-mouse-position").then(({payload:e})=>e.data)}getProcessList(){return console.warn("System.getProcessList has been deprecated. Please consider using our new process APIs: Window.getProcessInfo, View.getProcessInfo, Application.getProcessInfo, System.getAllProcessInfo"),this.wire.sendAction("process-snapshot").then(({payload:e})=>e.data)}async getAllProcessInfo(){let{payload:{data:e}}=await this.wire.sendAction("get-all-process-info",this.identity);return e}getProxySettings(){return this.wire.sendAction("get-proxy-settings").then(({payload:e})=>e.data)}getRuntimeInfo(){return this.wire.sendAction("get-runtime-info").then(({payload:e})=>e.data)}getRvmInfo(){return this.wire.sendAction("get-rvm-info").then(({payload:e})=>e.data)}getHostSpecs(){return this.wire.sendAction("get-host-specs").then(({payload:e})=>e.data)}getOSInfo(){return this.wire.sendAction("get-os-info").then(({payload:e})=>e.data)}launchExternalProcess(e){return this.sendExternalProcessRequest("launch-external-process",e)}monitorExternalProcess(e){return this.sendExternalProcessRequest("monitor-external-process",e)}log(e,t){return this.wire.sendAction("write-to-log",{level:e,message:t}).then(()=>{})}openUrlWithBrowser(e){return this.wire.sendAction("open-url-with-browser",{url:e}).then(()=>{})}async registerCustomProtocol(e){if("object"!=typeof e)throw Error("Must provide an object with a `protocolName` property having a string value.");await this.wire.sendAction("register-custom-protocol",e)}async unregisterCustomProtocol(e){await this.wire.sendAction("unregister-custom-protocol",{protocolName:e})}async getCustomProtocolState(e){return this.wire.sendAction("get-custom-protocol-state",{protocolName:e}).then(({payload:e})=>e.data)}releaseExternalProcess(e){return this.wire.sendAction("release-external-process",{uuid:e}).then(()=>{})}showDeveloperTools(e){return this.wire.sendAction("show-developer-tools",e).then(()=>{})}terminateExternalProcess(e){return this.wire.sendAction("terminate-external-process",e).then(()=>{})}updateProxySettings(e){return this.wire.sendAction("update-proxy",e).then(()=>{})}async downloadAsset(e,t){let n=()=>{},r=n,i=n,o=new Promise((e,t)=>{r=e,i=t});if("openfin"!==this.wire.environment.type)throw new S.NotSupportedError("downloadAsset only supported in an OpenFin Render process");let s=S.RuntimeError.getCallSite(),a=this.wire.environment.getNextMessageId().toString(),c=`asset-download-progress-${a}`,d=`asset-download-error-${a}`,l=`asset-download-complete-${a}`,h=e=>{t({downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes})},u=()=>{this.removeListener(c,h)};await Promise.all([this.on(c,h),this.once(d,e=>{u();let{reason:t,err:n}=e;i(new S.RuntimeError({reason:t,error:n},s))}),this.once(l,()=>{u(),r()})]);let p=Object.assign(e,{downloadId:a});return await this.wire.sendAction("download-asset",p).catch(e=>{throw u(),e}),o}downloadRuntime(e,t){let n=S.RuntimeError.getCallSite();return new Promise((r,i)=>{if("openfin"!==this.wire.environment.type)return void i(new S.NotSupportedError("downloadRuntime only supported in an OpenFin Render process"));let o=this.wire.environment.getNextMessageId().toString(),s=`runtime-download-progress-${o}`,a=`runtime-download-error-${o}`,c=`runtime-download-complete-${o}`,d=e=>{t({downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes})},l=()=>{this.removeListener(s,d)};this.on(s,d),this.once(a,e=>{l();let{reason:t,err:r}=e;i(new S.RuntimeError({reason:t,error:r},n))}),this.once(c,()=>{l(),r()});let h=Object.assign(e,{downloadId:o});this.wire.sendAction("download-runtime",h).catch(e=>{l(),i(e)})})}downloadPreloadScripts(e){return this.wire.sendAction("download-preload-scripts",{scripts:e}).then(({payload:e})=>e.data)}getAllExternalApplications(){return this.wire.sendAction("get-all-external-applications").then(({payload:e})=>e.data)}getAppAssetInfo(e){return this.wire.sendAction("get-app-asset-info",e).then(({payload:e})=>e.data)}getCookies(e){let t=Object.assign(e,{url:this.wire.environment.getUrl()});return this.wire.sendAction("get-cookies",t).then(({payload:e})=>e.data)}setMinLogLevel(e){return this.wire.sendAction("set-min-log-level",{level:e}).then(()=>{})}resolveUuid(e){return this.wire.sendAction("resolve-uuid",{entityKey:e}).then(({payload:e})=>e.data)}executeOnRemote(e,t){return t.requestingIdentity=e,this.wire.ferryAction(t)}readRegistryValue(e,t,n){return this.wire.sendAction("read-registry-value",{rootKey:e,subkey:t,value:n}).then(({payload:e})=>e.data)}registerExternalConnection(e){return this.wire.sendAction("register-external-connection",{uuid:e}).then(({payload:e})=>e.data)}async getServiceConfiguration(e){if("string"!=typeof e.name)throw Error("Must provide an object with a `name` property having a string value");let{name:t}=e;return this.wire.sendAction("get-service-configuration",{name:t}).then(({payload:e})=>e.data)}async getSystemAppConfig(e){if("string"!=typeof e)throw Error("Must provide a string value for name of system app");return this.wire.sendAction("get-system-app-configuration",{name:e}).then(({payload:e})=>e.data)}async registerShutdownHandler(e){this.wire.sendAction("system-register-shutdown-handler").catch(e=>{});let{uuid:t,name:n}=this.wire.me;this.on("system-shutdown",r=>{e({proceed:()=>{this.wire.environment.raiseEvent("application/system-shutdown-handled",{uuid:t,name:n,topic:"application"})}})})}runRvmHealthCheck(){return this.wire.sendAction("run-rvm-health-check").then(({payload:e})=>e.data)}async launchManifest(e,t={}){let{subscribe:n,...r}=t;if(n){let e=new ey.EventEmitter;n(e);let t="app-version-progress",i="runtime-status",o="app-version-complete",s="app-version-error",a=this.wire.environment.getNextMessageId().toString();r.appVersionId=a;let c=[o,t,i,s],d=e=>{let{appVersionId:t,topic:n,type:r,...i}=e;return{...i,type:c.find(e=>r.includes(e))}},l=t=>{let n=d(t);e.emit(n.type,n)},h=()=>{this.removeListener(`${t}.${a}`,l),this.removeListener(`${i}.${a}`,l),this.removeListener(`${o}.${a}`,l),this.removeListener(`${s}.${a}`,l),this.removeListener(`${o}.${a}`,h),this.removeListener(`${s}.${a}`,h)};await Promise.all([this.on(`${t}.${a}`,l),this.on(`${i}.${a}`,l),this.once(`${o}.${a}`,l),this.once(`${s}.${a}`,l),this.once(`${o}.${a}`,h),this.once(`${s}.${a}`,h)])}return(await this.wire.sendAction("launch-manifest",{manifestUrl:e,opts:r})).payload.data.manifest}async queryPermissionForCurrentContext(e){let t={uuid:this.wire.me.uuid,name:this.wire.me.name};return(await this.wire.sendAction("query-permission-for-current-context",{apiName:e,identity:t})).payload.data}async enableNativeWindowIntegrationProvider(e){let{payload:t}=await this.wire.sendAction("enable-native-window-integration-provider",{permissions:e});return t.data}async registerUsage({data:e,type:t}){await this.wire.sendAction("register-usage",{data:e,type:t})}async getPrinters(){let{payload:e}=await this.wire.sendAction("system-get-printers");return e.data}async updateProcessLoggingOptions(e){await this.wire.sendAction("system-update-process-logging-options",{options:e})}async getDomainSettings(){let{payload:{data:e}}=await this.wire.sendAction("get-domain-settings");return e}async setDomainSettings(e){await this.wire.sendAction("set-domain-settings",{domainSettings:e})}async getCurrentDomainSettings(e){return(await this.wire.sendAction("get-current-domain-settings",{identity:e})).payload.data}async resolveDomainSettings(e){return(await this.wire.sendAction("resolve-domain-settings",{url:e})).payload.data}async refreshExtensions(){let{payload:e}=await this.wire.sendAction("refresh-extensions");return e.data}async getInstalledExtensions(){let{payload:e}=await this.wire.sendAction("get-installed-extensions");return e.data}async serveAsset(e){return(await this.wire.sendAction("serve-asset",{options:e})).payload.data}async launchLogUploader(e){return(await this.wire.sendAction("launch-log-uploader",{options:e})).payload.data}}I.System=ew;var eg={},em={};Object.defineProperty(em,"__esModule",{value:!0}),em.RefCounter=void 0,em.RefCounter=class{constructor(){this.topicRefMap=new Map}incRefCount(e){let t,n=this.topicRefMap.get(e);if(n){let r=n+1;t=r,this.topicRefMap.set(e,r)}else this.topicRefMap.set(e,1),t=1;return t}decRefCount(e){let t,n=this.topicRefMap.get(e);if(n){let r=n-1;this.topicRefMap.set(e,r),t=r}else t=-1;return t}actOnFirst(e,t,n){return 1===this.incRefCount(e)?t():n()}actOnLast(e,t,n){return 0===this.decRefCount(e)?t():n()}};var ev={},eb={},eC={};Object.defineProperty(eC,"__esModule",{value:!0}),eC.ChannelBase=eC.ProtectedItems=void 0;let eI=e=>async(t,n,r)=>{let i=await e(t,n,r);return void 0===i?n:i};eC.ProtectedItems=class{constructor(e,t){this.providerIdentity=e,this.close=t}};class ex{static defaultAction(e){throw Error(`No action registered at target for ${e}`)}constructor(){this.subscriptions=new Map}async processAction(e,t,n){try{let r=this.subscriptions.get(e)??((t,n)=>(this.defaultAction??ex.defaultAction)(e,t,n)),i=this.preAction?await this.preAction(e,t,n):t,o=await r(i,n);return this.postAction?await this.postAction(e,o,n):o}catch(t){if(S.RuntimeError.trimEndCallSites(t,/Channel.*processAction/),this.errorMiddleware)return this.errorMiddleware(e,t,n);throw t}}beforeAction(e){if(this.preAction)throw Error("Already registered beforeAction middleware");this.preAction=eI(e)}onError(e){if(this.errorMiddleware)throw Error("Already registered error middleware");this.errorMiddleware=e}afterAction(e){if(this.postAction)throw Error("Already registered afterAction middleware");this.postAction=eI(e)}remove(e){this.subscriptions.delete(e)}setDefaultAction(e){if(this.defaultAction)throw Error("default action can only be set once");this.defaultAction=e}register(e,t){if(this.subscriptions.has(e))throw Error(`Subscription already registered for action: ${e}. Unsubscribe before adding new subscription`);return this.subscriptions.set(e,t),!0}}eC.ChannelBase=ex;var eE={};Object.defineProperty(eE,"__esModule",{value:!0}),eE.ChannelError=void 0;class eA extends Error{constructor(e,t,n,r){super(e.message),this.action=t,this.dispatchPayload=n,this.name=this.constructor.name,"cause"in e&&e.cause instanceof Error&&(this.cause=e.cause),this.stack=S.RuntimeError.prepareStackTrace(this,r)}}eE.ChannelError=eA;var e_,eP,eO,eM,ej,eS,eR,eL,eT,eB=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},eF=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};Object.defineProperty(eb,"__esModule",{value:!0}),eb.ChannelClient=void 0;let ek=eC,e$=new Map;class eU extends ek.ChannelBase{static closeChannelByEndpointId(e){let t=e$.get(e);t&&eB(t,eT,"f").call(t)}static handleProviderDisconnect(e){for(let t of e$.values())t.providerIdentity.channelId===e.channelId&&(t.disconnectListener(e),eB(t,eT,"f").call(t))}constructor(e,t,n){super(),eR.set(this,void 0),eL.set(this,void 0),this.processAction=(e,t,n)=>super.processAction(e,t,n),eT.set(this,()=>{e$.delete(this.endpointId),eB(this,eL,"f").close()}),eF(this,eR,new ek.ProtectedItems(e,t),"f"),this.disconnectListener=()=>{},this.endpointId=e.endpointId,eF(this,eL,n,"f"),e$.set(this.endpointId,this),n.receive(this.processAction)}get providerIdentity(){return eB(this,eR,"f").providerIdentity}async dispatch(e,t){if(eB(this,eL,"f").isEndpointConnected(this.providerIdentity.channelId)){let n=S.RuntimeError.getCallSite();return eB(this,eL,"f").send(this.providerIdentity.channelId,e,t).catch(r=>{throw new eE.ChannelError(r,e,t,n)})}throw Error("The client you are trying to dispatch from is disconnected from the target provider.")}onDisconnection(e){this.disconnectListener=t=>{try{e(t)}catch(e){throw Error(`Error while calling the onDisconnection callback: ${e.message}`)}finally{this.disconnectListener=()=>{}}}}async disconnect(){await this.sendDisconnectAction(),eB(this,eT,"f").call(this)}async sendDisconnectAction(){let e=eB(this,eR,"f");await e.close()}static async wireClose(e,t,n){let{channelName:r,uuid:i,name:o}=t;await e.sendAction("disconnect-from-channel",{channelName:r,uuid:i,name:o,endpointId:n})}}eb.ChannelClient=eU,eR=new WeakMap,eL=new WeakMap,eT=new WeakMap;var eN={},eG={};Object.defineProperty(eG,"__esModule",{value:!0}),eG.exhaustiveCheck=void 0,eG.exhaustiveCheck=function(e,t){throw Error(`Unsupported value: ${e}${t?`
 Supported values are: ${t.join("")}`:""}`)};var eW,eD,eH,eV={},ez=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},eK=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(eV,"__esModule",{value:!0}),eV.ClassicInfo=eV.ClassicStrategy=void 0,eV.ClassicStrategy=class{constructor(e,t,n,r){this.messageReceiver=t,this.endpointId=n,this.providerIdentity=r,eW.set(this,void 0),eD.set(this,new Map),eH.set(this,new Map),this.send=async(e,t,n)=>{let r=eK(this,eD,"f").get(e);if(!r)throw Error(`Could not locate routing info for endpoint ${e}`);let i={...r};i.isLocalEndpointId&&delete i.endpointId,delete i.isLocalEndpointId;let o=eK(this,eW,"f").sendAction("send-channel-message",{...i,providerIdentity:this.providerIdentity,action:t,payload:n});return eK(this,eH,"f").get(e)?.add(o),(await o.catch(e=>{if("cause"in e)throw e;throw Error(e.message)}).finally(()=>{eK(this,eH,"f").get(e)?.delete(o)})).payload.data.result},this.close=async()=>{this.messageReceiver.removeEndpoint(this.providerIdentity.channelId,this.endpointId),[...eK(this,eD,"f").keys()].forEach(e=>this.closeEndpoint(e)),ez(this,eD,new Map,"f")},ez(this,eW,e,"f")}onEndpointDisconnect(e,t){}receive(e){this.messageReceiver.addEndpoint(e,this.providerIdentity.channelId,this.endpointId)}async closeEndpoint(e){let t=eK(this,eD,"f").get(e);eK(this,eD,"f").delete(e);let n=eK(this,eH,"f").get(e);n?.forEach(n=>{let r=`Channel connection with identity uuid: ${t?.uuid} / name: ${t?.name} / endpointId: ${e} no longer connected.`;n.cancel(Error(r))})}isEndpointConnected(e){return eK(this,eD,"f").has(e)}addEndpoint(e,t){eK(this,eD,"f").set(e,t.endpointIdentity),eK(this,eH,"f").set(e,new Set)}isValidEndpointPayload(e){return"string"==typeof e?.endpointIdentity?.endpointId||"string"==typeof e?.endpointIdentity?.channelId}},eW=new WeakMap,eD=new WeakMap,eH=new WeakMap,eV.ClassicInfo={version:5,minimumVersion:0,type:"classic"};var eY={},eJ={},eq={};Object.defineProperty(eq,"__esModule",{value:!0}),eq.errorToPOJO=void 0,eq.errorToPOJO=function e(t){let n={stack:t.stack,name:t.name,message:t.message,toString:()=>t.stack||t.toString()};return"cause"in t&&(n.cause=e(t.cause)),n};var eZ,eX,eQ=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},e0=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};Object.defineProperty(eJ,"__esModule",{value:!0}),eJ.RTCEndpoint=void 0,eJ.RTCEndpoint=class{static isValidEndpointPayload(e){let t=e=>"object"==typeof e&&null!==e;return t(e)&&t(e.endpointIdentity)&&t(e.rtc)&&"string"==typeof e.endpointIdentity.endpointId}constructor({rtc:e,endpointIdentity:t}){this.responseMap=new Map,eZ.set(this,null),eX.set(this,void 0),this.connectionStateChangeHandler=e=>{"connected"!==this.rtc.rtcClient.connectionState&&(this.rtc.rtcClient.removeEventListener("connectionstatechange",this.connectionStateChangeHandler),this.close(),eQ(this,eX,"f")&&eQ(this,eX,"f").call(this))},this.send=async(e,t)=>{let n=`message-${Math.random()}`,r=new Promise((e,t)=>{this.responseMap.set(n,{resolve:e,reject:t})});return this.rtc.channels.request.send(JSON.stringify({action:e,payload:t,messageId:n})),r},this.close=()=>{this.responseMap.forEach(e=>e.reject("Connection has closed.")),this.responseMap=new Map,this.rtc.channels.request.close(),this.rtc.channels.response.close(),this.rtc.rtcClient.close()},this.rtc=e,this.endpointIdentity=t,this.rtc.channels.response.addEventListener("message",e=>{let{data:t}=e;e.data instanceof ArrayBuffer&&(t=(new TextDecoder).decode(e.data));let{messageId:n,payload:r,success:i,error:o}=JSON.parse(t),{resolve:s,reject:a}=this.responseMap.get(n)??{};s&&a?(this.responseMap.delete(n),i?s(r):a(o)):(console.log("Could not find id in responseMap."),console.log(e))}),this.rtc.channels.request.addEventListener("message",async e=>{let{data:n}=e;e.data instanceof ArrayBuffer&&(n=(new TextDecoder).decode(e.data));let{messageId:r,action:i,payload:o}=JSON.parse(n);if(eQ(this,eZ,"f"))try{let e=await eQ(this,eZ,"f").call(this,i,o,t);this.rtc.channels.response.send(JSON.stringify({messageId:r,payload:e,success:!0}))}catch(e){"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:r,error:(0,eq.errorToPOJO)(e),success:!1}))}else"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:r,success:!1,error:"Connection not ready."}))}),this.rtc.rtcClient.addEventListener("connectionstatechange",this.connectionStateChangeHandler),Object.values(this.rtc.channels).forEach(e=>{e.onclose=e=>{[...this.responseMap.values()].forEach(e=>e.reject(Error("RTCDataChannel closed unexpectedly, this is most commonly caused by message size. Note: RTC Channels have a message size limit of ~255kB."))),this.close(),eQ(this,eX,"f")&&eQ(this,eX,"f").call(this)}})}onDisconnect(e){if(eQ(this,eX,"f"))throw Error("RTCEndpoint disconnectListener cannot be set twice.");e0(this,eX,e,"f")}receive(e){if(eQ(this,eZ,"f"))throw Error("You have already set a listener for this RTC Endpoint.");e0(this,eZ,e,"f")}get connected(){return"connected"===this.rtc.rtcClient.connectionState}},eZ=new WeakMap,eX=new WeakMap;var e1,e2,e3,e5={},e8=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},e6=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};Object.defineProperty(e5,"__esModule",{value:!0}),e5.EndpointStrategy=void 0,e5.EndpointStrategy=class{constructor(e,t,n){this.EndpointType=e,this.StrategyName=n,e1.set(this,null),e2.set(this,new Map),e3.set(this,!0),this.send=async(e,t,n)=>this.getEndpointById(e).send(t,n),this.close=async()=>{e8(this,e3,"f")&&(e8(this,e2,"f").forEach(e=>e.close()),e6(this,e2,new Map,"f")),e6(this,e3,!1,"f")},this.isValidEndpointPayload=t}onEndpointDisconnect(e,t){this.getEndpointById(e).onDisconnect(t)}receive(e){if(e8(this,e1,"f"))throw Error(`You have already set a listener for this ${this.StrategyName} Strategy`);e6(this,e1,e,"f"),e8(this,e2,"f").forEach(e=>e.receive(e8(this,e1,"f")))}getEndpointById(e){let t=e8(this,e2,"f").get(e);if(!t)throw Error(`Client with endpoint id ${e} is not connected`);return t}get connected(){return e8(this,e3,"f")}isEndpointConnected(e){return e8(this,e2,"f").has(e)}addEndpoint(e,t){if(!e8(this,e3,"f"))return void console.warn(`Adding endpoint to disconnected ${this.StrategyName} Strategy`);let n=new this.EndpointType(t);e8(this,e1,"f")&&n.receive(e8(this,e1,"f")),e8(this,e2,"f").set(e,n)}async closeEndpoint(e){e8(this,e2,"f").delete(e)}},e1=new WeakMap,e2=new WeakMap,e3=new WeakMap,Object.defineProperty(eY,"__esModule",{value:!0}),eY.RTCInfo=eY.RTCStrategy=void 0;let e4=e5;class e9 extends e4.EndpointStrategy{constructor(){super(eJ.RTCEndpoint,eJ.RTCEndpoint.isValidEndpointPayload,"RTC")}}eY.RTCStrategy=e9,eY.RTCInfo={version:2,minimumVersion:0,type:"rtc"};var e7={};Object.defineProperty(e7,"__esModule",{value:!0}),e7.RTCICEManager=void 0;let te=x;class tt extends te.EmitterBase{constructor(e){super(e,"channel"),this.ensureChannelOpened=e=>new Promise((t,n)=>{if("open"===e.readyState)t();else if("connecting"===e.readyState){let n=()=>{e.removeEventListener("open",n),t()};e.addEventListener("open",n)}else n(Error("This Channel has already closed"))})}static createDataChannelPromise(e,t){let n,r=new Promise(e=>{n=e}),i=r=>{let o=()=>{r.channel.removeEventListener("open",o),n(r.channel)};r.channel.label===e&&(r.channel.addEventListener("open",o),t.removeEventListener("datachannel",i))};return t.addEventListener("datachannel",i),r}async listenForProviderIce(e,t){await this.on(this.createProviderEventName(e),t,{timestamp:Date.now()})}async raiseProviderIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createProviderEventName(e)),t)}async listenForClientIce(e,t){await this.on(this.createClientEventName(e),t,{timestamp:Date.now()})}async raiseClientIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createClientEventName(e)),t)}cleanupIceListeners(e){this.removeAllListeners(this.createClientEventName(e)),this.removeAllListeners(this.createProviderEventName(e))}createClientEventName(e){return`ice-client-${e}`}createProviderEventName(e){return`ice-provider-${e}`}createRouteString(e){return`channel/${e}`}createRtcPeer(){return this.wire.environment.getRtcPeer()}async startClientOffer(){let e=Math.random().toString(),t=this.createRtcPeer();t.addEventListener("icecandidate",async t=>{t.candidate&&await this.raiseClientIce(e,{candidate:t.candidate?.toJSON()})}),await this.listenForProviderIce(e,async e=>{await t.addIceCandidate(e.candidate)});let n={request:t.createDataChannel("request"),response:t.createDataChannel("response")},r=await t.createOffer();await t.setLocalDescription(r);let i=Promise.all([n.request,n.response].map(this.ensureChannelOpened)).then(()=>{});return{rtcClient:t,channels:n,offer:r,rtcConnectionId:e,channelsOpened:i}}async finishClientOffer(e,t,n){return await e.setRemoteDescription(t),await n,!0}async createProviderAnswer(e,t){let n=this.createRtcPeer(),r=tt.createDataChannelPromise("request",n),i=tt.createDataChannelPromise("response",n);n.addEventListener("icecandidate",async t=>{t.candidate&&await this.raiseProviderIce(e,{candidate:t.candidate?.toJSON()})}),await this.listenForClientIce(e,async e=>{await n.addIceCandidate(e.candidate)}),await n.setRemoteDescription(t);let o=await n.createAnswer();return await n.setLocalDescription(o),{rtcClient:n,answer:o,channels:Promise.all([r,i]).then(([t,n])=>(this.cleanupIceListeners(e),{request:t,response:n}))}}}e7.RTCICEManager=tt;var tn={},tr={};function ti(e){return[...e.split(".").reverse().entries()].reduce((e,[t,n])=>e+n*1e4**t,0)}function to(e,t){return ti(e)>=ti(t)}function ts(e){return e.split("/")[0]}Object.defineProperty(tr,"__esModule",{value:!0}),tr.runtimeUuidMeetsMinimumRuntimeVersion=tr.parseRuntimeUuid=tr.meetsMinimumRuntimeVersion=void 0,tr.meetsMinimumRuntimeVersion=to,tr.parseRuntimeUuid=ts,tr.runtimeUuidMeetsMinimumRuntimeVersion=function(e,t){return to(ts(e),t)};var ta,tc,td,tl,th,tu=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},tp=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};Object.defineProperty(tn,"__esModule",{value:!0}),tn.ChannelProvider=void 0;let tf=eC;class ty extends tf.ChannelBase{get connections(){return[...tu(this,ta,"f")]}static handleClientDisconnection(e,t){if(t?.endpointId){let{uuid:n,name:r,endpointId:i,isLocalEndpointId:o}=t;tu(e,tl,"f").call(e,{uuid:n,name:r,endpointId:i,isLocalEndpointId:o})}else e.connections.filter(e=>e.uuid===t.uuid&&e.name===t.name).forEach(tu(e,tl,"f"));e.disconnectListener(t)}static setProviderRemoval(e,t){ty.removalMap.set(e,t)}constructor(e,t,n){super(),ta.set(this,void 0),tc.set(this,void 0),td.set(this,void 0),tl.set(this,e=>{let t=this.connections.filter(t=>t.endpointId!==e.endpointId);tu(this,td,"f").closeEndpoint(e.endpointId),tp(this,ta,t,"f")}),this.processAction=async(e,t,n)=>(ty.clientIsMultiRuntime(n)&&!(0,tr.runtimeUuidMeetsMinimumRuntimeVersion)(n.runtimeUuid,"18.87.56.0")?this.handleMultiRuntimeLegacyClient(n):this.checkForClientConnection(n),super.processAction(e,t,n)),th.set(this,()=>{tu(this,td,"f").close();let e=ty.removalMap.get(this);e&&e()}),tp(this,tc,new tf.ProtectedItems(e,t),"f"),this.connectListener=()=>{},this.disconnectListener=()=>{},tp(this,ta,[],"f"),tp(this,td,n,"f"),n.receive(this.processAction)}dispatch(e,t,n){let r=e.endpointId??this.getEndpointIdForOpenFinId(e,t);if(r&&tu(this,td,"f").isEndpointConnected(r)){let e=S.RuntimeError.getCallSite();return tu(this,td,"f").send(r,t,n).catch(r=>{throw new eE.ChannelError(r,t,n,e)})}return Promise.reject(Error(`Client connection with identity uuid: ${e.uuid} / name: ${e.name} / endpointId: ${r} no longer connected.`))}async processConnection(e,t){return tu(this,ta,"f").push(e),this.connectListener(e,t)}publish(e,t){return this.connections.map(n=>tu(this,td,"f").send(n.endpointId,e,t))}onConnection(e){this.connectListener=e}onDisconnection(e){this.disconnectListener=e}async destroy(){let e=tu(this,tc,"f");e.providerIdentity,tp(this,ta,[],"f"),await e.close(),tu(this,th,"f").call(this)}async getAllClientInfo(){return this.connections.map(e=>{let{uuid:t,name:n,endpointId:r,entityType:i,connectionUrl:o}=e;return{uuid:t,name:n,endpointId:r,entityType:i,connectionUrl:o}})}checkForClientConnection(e){if(!this.isClientConnected(e))throw Error(`This action was sent from a client that is not connected to the provider.
                    Client Identity: {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}isClientConnected(e){return ty.clientIdentityIncludesEndpointId(e)?this.connections.some(t=>t.endpointId===e.endpointId&&t.uuid===e.uuid&&t.name===e.name):this.isLegacyClientConnected(e)}isLegacyClientConnected(e){return this.connections.some(t=>t.uuid===e.uuid&&t.name===e.name)}handleMultiRuntimeLegacyClient(e){if(!this.isLegacyClientConnected(e))throw Error(`This action was sent from a client that is not connected to the provider. Client Identity:
                    {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}getEndpointIdForOpenFinId(e,t){let n=this.connections.filter(t=>t.name===e.name&&t.uuid===e.uuid);if(n.length>=2){let n=tu(this,tc,"f"),{uuid:r,name:i}=e,o=n?.providerIdentity.uuid,s=n?.providerIdentity.name;console.warn(`WARNING: Dispatch call may have unintended results. The "to" argument of your dispatch call is missing the
                "endpointId" parameter. The identity you are dispatching to ({uuid: ${r}, name: ${i}})
                has multiple channelClients for this channel. Your dispatched action: (${t}) from the provider:
                ({uuid: ${o}, name: ${s}}) will only be processed by the most recently-created client.`)}return n.pop()?.endpointId}static clientIdentityIncludesEndpointId(e){return void 0!==e.endpointId}static clientIsMultiRuntime(e){return void 0!==e.runtimeUuid}static async wireClose(e,t){await e.sendAction("destroy-channel",{channelName:t})}}tn.ChannelProvider=ty,ta=new WeakMap,tc=new WeakMap,td=new WeakMap,tl=new WeakMap,th=new WeakMap,ty.removalMap=new WeakMap;var tw={};Object.defineProperty(tw,"__esModule",{value:!0}),tw.MessageReceiver=void 0;let tg=x;class tm extends tg.Base{constructor(e){super(e),this.onmessage=e=>"process-channel-message"===e.action&&(this.processChannelMessage(e),!0),this.endpointMap=new Map,this.latestEndpointIdByChannelId=new Map,e.registerMessageHandler(this.onmessage.bind(this))}async processChannelMessage(e){let{senderIdentity:t,providerIdentity:n,action:r,ackToSender:i,payload:o,intendedTargetIdentity:s}=e.payload,a=s.channelId??s.endpointId??this.latestEndpointIdByChannelId.get(n.channelId),c=this.endpointMap.get(a);if(!c)return i.payload.success=!1,i.payload.reason=`Client connection with identity uuid: ${this.wire.me.uuid} / name: ${this.wire.me.name} / endpointId: ${a} no longer connected.`,i.payload.error=(0,eq.errorToPOJO)(Error(i.payload.reason)),this.wire.sendRaw(i);try{let e=await c(r,o,t);return i.payload.payload=i.payload.payload||{},i.payload.payload.result=e,this.wire.sendRaw(i)}catch(e){return i.payload.success=!1,i.payload.reason=e.message,i.payload.error=(0,eq.errorToPOJO)(e),this.wire.sendRaw(i)}}addEndpoint(e,t,n){this.endpointMap.set(n,e),t!==n&&this.latestEndpointIdByChannelId.set(t,n)}removeEndpoint(e,t){this.endpointMap.delete(t),this.latestEndpointIdByChannelId.get(e)===t&&this.latestEndpointIdByChannelId.delete(e)}checkForPreviousClientConnection(e){let t=this.latestEndpointIdByChannelId.get(e);t&&(eb.ChannelClient.closeChannelByEndpointId(t),console.warn("You have created a second connection to an older provider. First connection has been removed from the clientMap"),console.warn("If the provider calls publish(), you may receive multiple messages."))}}tw.MessageReceiver=tm;var tv={};Object.defineProperty(tv,"__esModule",{value:!0}),tv.ProtocolManager=void 0,tv.ProtocolManager=class{constructor(e){this.ProtocolsInPreferenceOrder=e,this.DefaultClientProtocols=["classic"],this.DefaultProviderProtocols=["classic"],this.getClientProtocols=e=>{let t=e?this.ProtocolsInPreferenceOrder.filter(t=>e.includes(t)):this.DefaultClientProtocols;if(!t.length)throw Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getProviderProtocols=e=>{let t=e?this.ProtocolsInPreferenceOrder.filter(t=>e.includes(t)):this.DefaultProviderProtocols;if(!t.length)throw Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getCompatibleProtocols=(e,t)=>t.supportedProtocols.filter(t=>e.some(e=>e.type===t.type&&t.version>=e.minimumVersion&&e.version>=(t.minimumVersion??0))).slice(0,t.maxProtocols)}};var tb={};Object.defineProperty(tb,"__esModule",{value:!0});class tC{static combine(e,t){return new tC(e,t)}constructor(e,t){this.primary=e,this.secondary=t}onEndpointDisconnect(e,t){this.primary.onEndpointDisconnect(e,()=>{this.secondary.isEndpointConnected(e)||t()}),this.secondary.onEndpointDisconnect(e,()=>{this.primary.isEndpointConnected(e)||t()})}isValidEndpointPayload(e){return this.primary.isValidEndpointPayload(e)||this.secondary.isValidEndpointPayload(e)}async closeEndpoint(e){await this.primary.closeEndpoint(e),await this.secondary.closeEndpoint(e)}isEndpointConnected(e){return this.primary.isEndpointConnected(e)||this.secondary.isEndpointConnected(e)}async addEndpoint(e,t){this.primary.isValidEndpointPayload(t)&&await this.primary.addEndpoint(e,t),this.secondary.isValidEndpointPayload(t)&&await this.secondary.addEndpoint(e,t)}receive(e){this.primary.receive(e),this.secondary.receive(e)}send(e,t,n){return this.primary.isEndpointConnected(e)?this.primary.send(e,t,n):this.secondary.send(e,t,n)}async close(){await Promise.all([this.primary.close(),this.secondary.close()])}}tb.default=tC;var tI,tx,tE=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},tA=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},t_=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eN,"__esModule",{value:!0}),eN.ConnectionManager=void 0;let tP=x,tO=t_(tb);class tM extends tP.Base{static getProtocolOptionsFromStrings(e){return e.map(e=>{switch(e){case"rtc":return eY.RTCInfo;case"classic":return eV.ClassicInfo;default:return(0,eG.exhaustiveCheck)(e,["rtc","classic"])}})}constructor(e){super(e),tI.set(this,void 0),tx.set(this,void 0),this.removeChannelFromProviderMap=e=>{this.providerMap.delete(e)},this.onmessage=e=>"process-channel-connection"===e.action&&(this.processChannelConnection(e),!0),this.providerMap=new Map,this.protocolManager=new tv.ProtocolManager("node"===this.wire.environment.type?["classic"]:["rtc","classic"]),tE(this,tI,new tw.MessageReceiver(e),"f"),tE(this,tx,new e7.RTCICEManager(e),"f"),e.registerMessageHandler(this.onmessage.bind(this))}createProvider(e,t){let n,r=Object.assign(this.wire.environment.getDefaultChannelOptions().create,e||{}),i=this.protocolManager.getProviderProtocols(r?.protocols),o=i.map(e=>{switch(e){case"rtc":return new eY.RTCStrategy;case"classic":return new eV.ClassicStrategy(this.wire,tA(this,tI,"f"),t.channelId,t);default:return(0,eG.exhaustiveCheck)(e,["rtc","classic"])}});if(2===o.length){let[e,t]=o;n=tO.default.combine(e,t)}else{if(1!==o.length)throw Error("failed to combine strategies");[n]=o}let s=new tn.ChannelProvider(t,()=>tn.ChannelProvider.wireClose(this.wire,t.channelName),n),a=t.channelId;return this.providerMap.set(a,{provider:s,strategy:n,supportedProtocols:tM.getProtocolOptionsFromStrings(i)}),tn.ChannelProvider.setProviderRemoval(s,this.removeChannelFromProviderMap.bind(this)),s}async createClientOffer(e){let t,n=this.protocolManager.getClientProtocols(e?.protocols);return{offer:{supportedProtocols:await Promise.all(n.map(async e=>{switch(e){case"rtc":{let{rtcClient:e,channels:n,offer:r,rtcConnectionId:i,channelsOpened:o}=await tA(this,tx,"f").startClientOffer();return t={rtcClient:e,channels:n,channelsOpened:o},{type:"rtc",version:eY.RTCInfo.version,payload:{offer:r,rtcConnectionId:i}}}case"classic":return{type:"classic",version:eV.ClassicInfo.version};default:return(0,eG.exhaustiveCheck)(e,["rtc","classic"])}})),maxProtocols:2},rtc:t}}async createClientStrategy(e,t){let n;t.endpointId||(t.endpointId=this.wire.environment.getNextMessageId(),tA(this,tI,"f").checkForPreviousClientConnection(t.channelId));let r=t.answer??{supportedProtocols:[{type:"classic",version:1}]},i=(await Promise.all(r.supportedProtocols.map(async n=>"rtc"===n.type&&e?(await tA(this,tx,"f").finishClientOffer(e.rtcClient,n.payload.answer,e.channelsOpened),new eY.RTCStrategy):"classic"===n.type?new eV.ClassicStrategy(this.wire,tA(this,tI,"f"),t.endpointId,t):null))).filter(e=>null!==e);if(e&&!i.some(e=>e instanceof eY.RTCStrategy)&&e&&e.rtcClient.close(),i.length>=2)n=tO.default.combine(i[0],i[1]);else{if(!i.length)throw Error("No compatible protocols");[n]=i}return n.addEndpoint(t.channelId,{endpointIdentity:t,rtc:e}),n}async processChannelConnection(e){let{clientIdentity:t,providerIdentity:n,ackToSender:r,payload:i,offer:o}=e.payload;t.endpointId?t.isLocalEndpointId=!1:(t.endpointId=this.wire.environment.getNextMessageId(),t.isLocalEndpointId=!0);let s=n.channelId,a=this.providerMap.get(s);if(!a)return r.payload.success=!1,r.payload.reason=`Channel "${n.channelName}" has been destroyed.`,this.wire.sendRaw(r);let{provider:c,strategy:d,supportedProtocols:l}=a;try{if(!(c instanceof tn.ChannelProvider))throw Error("Cannot connect to a channel client");let e=this.protocolManager.getCompatibleProtocols(l,o??{supportedProtocols:[{type:"classic",version:1}],maxProtocols:1});if(!e.length)throw Error("This provider does not support any of the offered protocols.");let n=await c.processConnection(t,i);r.payload.payload=r.payload.payload||{};let s={supportedProtocols:[],endpointPayloadPromise:Promise.resolve({endpointIdentity:t})};return(s=await e.reduce(async(e,t)=>{let n=await e;if("rtc"===t.type){let{answer:e,rtcClient:r,channels:i}=await tA(this,tx,"f").createProviderAnswer(t.payload.rtcConnectionId,t.payload.offer);n.supportedProtocols.push({type:"rtc",version:eY.RTCInfo.version,payload:{answer:e}}),n.endpointPayloadPromise=n.endpointPayloadPromise.then(e=>i.then(t=>({...e,rtc:{rtcClient:r,channels:t}})))}else n.supportedProtocols.push({type:"classic",version:eV.ClassicInfo.version});return n},Promise.resolve(s))).endpointPayloadPromise.then(e=>d.addEndpoint(t.endpointId,e)),r.payload.payload.result=n,r.payload.payload.answer=s,this.wire.sendRaw(r)}catch(e){return r.payload.success=!1,r.payload.reason=e.message,this.wire.sendRaw(r)}}}eN.ConnectionManager=tM,tI=new WeakMap,tx=new WeakMap;var tj,tS,tR,tL=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},tT=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(ev,"__esModule",{value:!0}),ev.Channel=void 0;let tB=l(),tF=x;class tk extends tF.EmitterBase{constructor(e){super(e,"channel"),tj.set(this,void 0),tS.set(this,new tB.EventEmitter),tR.set(this,new X.AsyncRetryableLazy(async()=>{await Promise.all([this.on("disconnected",e=>{eb.ChannelClient.handleProviderDisconnect(e)}),this.on("connected",(...e)=>{tT(this,tS,"f").emit("connected",...e)})]).catch(()=>Error("error setting up channel connection listeners"))})),tL(this,tj,new eN.ConnectionManager(e),"f")}async getAllChannels(){return this.wire.sendAction("get-all-channels").then(({payload:e})=>e.data)}async onChannelConnect(e){await this.on("connected",e)}async onChannelDisconnect(e){await this.on("disconnected",e)}async safeConnect(e,t,n){let r={count:0};do{let i=()=>{},o=new Promise(t=>{i=n=>{e===n.channelName&&t(!0)},tT(this,tS,"f").on("connected",i)});try{if(r.count>0){r.gotConnectedEvent=await Promise.race([function(e){let t=Math.floor(e/10),n=Math.min(3e4,500*2**t);return new Promise(e=>{setTimeout(()=>{e(!1)},n)})}(r.count),o]);let t=await this.wire.sendAction("connect-to-channel",{...n,retryInfo:r});return console.log(`Successfully connected to channelName: ${e}`),t.payload.data}let t=this.wire.sendAction("connect-to-channel",n);return r.originalMessageId=t.messageId,(await t).payload.data}catch(n){if(!n.message.includes("internal-nack"))throw n;t&&0===r.count&&console.warn(`No channel found for channelName: ${e}. Waiting for connection...`)}finally{r.count+=1,tT(this,tS,"f").removeListener("connected",i)}}while(t);throw Error(`No channel found for channelName: ${e}.`)}async connect(e,t={}){let n;if(await tT(this,tR,"f").getValue(),!e||"string"!=typeof e)throw Error("Please provide a channelName string to connect to a channel.");let r={wait:!0,...this.wire.environment.getDefaultChannelOptions().connect,...t},{offer:i,rtc:o}=await tT(this,tj,"f").createClientOffer(r);(this.fin.me.isFrame||this.fin.me.isView||this.fin.me.isWindow)&&(n=(await this.fin.me.getInfo()).url);let s={channelName:e,...r,offer:i,connectionUrl:n},a=await this.safeConnect(e,r.wait,s),c=await tT(this,tj,"f").createClientStrategy(o,a),d=new eb.ChannelClient(a,()=>eb.ChannelClient.wireClose(this.wire,a,a.endpointId),c);return c.onEndpointDisconnect(a.channelId,async()=>{try{await d.sendDisconnectAction()}catch(e){console.warn(`Something went wrong during disconnect for client with uuid: ${a.uuid} / name: ${a.name} / endpointId: ${a.endpointId}.`)}finally{eb.ChannelClient.handleProviderDisconnect(a)}}),d}async create(e,t){if(!e)throw Error("Please provide a channelName to create a channel");let{payload:{data:n}}=await this.wire.sendAction("create-channel",{channelName:e}),r=tT(this,tj,"f").createProvider(t,n);return this.on("client-disconnected",t=>{t.channelName===e&&tn.ChannelProvider.handleClientDisconnection(r,t)}),r}}ev.Channel=tk,tj=new WeakMap,tS=new WeakMap,tR=new WeakMap,Object.defineProperty(eg,"__esModule",{value:!0}),eg.InterAppPayload=eg.InterApplicationBus=void 0;let t$=l(),tU=x;class tN extends tU.Base{constructor(e){super(e),this.events={subscriberAdded:"subscriber-added",subscriberRemoved:"subscriber-removed"},this.refCounter=new em.RefCounter,this.Channel=new ev.Channel(e),this.emitter=new t$.EventEmitter,e.registerMessageHandler(this.onmessage.bind(this)),this.on=this.emitter.on.bind(this.emitter),this.removeAllListeners=this.emitter.removeAllListeners.bind(this.emitter)}async publish(e,t){await this.wire.sendAction("publish-message",{topic:e,message:t,sourceWindowName:this.me.name})}async send(e,t,n){let r=(0,D.validateIdentity)(e);if(r)throw Error(r);await this.wire.sendAction("send-message",{destinationUuid:e.uuid,destinationWindowName:e.name,topic:t,message:n,sourceWindowName:this.me.name})}subscribe(e,t,n){let r=this.createSubscriptionKey(e.uuid,e.name||"*",t);return this.emitter.on(r,n),this.refCounter.actOnFirst(r,async()=>{await this.wire.sendAction("subscribe",{sourceUuid:e.uuid,sourceWindowName:e.name||"*",topic:t,destinationWindowName:this.me.name})},()=>Promise.resolve())}unsubscribe(e,t,n){let r=e.name||"*",i=this.createSubscriptionKey(e.uuid,r,t);return this.emitter.removeListener(i,n),this.refCounter.actOnLast(i,async()=>{await this.wire.sendAction("unsubscribe",{sourceUuid:e.uuid,sourceWindowName:r,topic:t,destinationWindowName:this.me.name})},()=>new Promise(e=>e).then(()=>{}))}processMessage(e){let{payload:{message:t,sourceWindowName:n,sourceUuid:r,topic:i}}=e,o=[this.createSubscriptionKey(r,n,i),this.createSubscriptionKey(r,"*",i),this.createSubscriptionKey("*","*",i)],s={uuid:r,name:n};o.forEach(e=>{this.emitter.emit(e,t,s)})}emitSubscriverEvent(e,t){let{payload:{targetName:n,uuid:r,topic:i}}=t;this.emitter.emit(e,{name:n,uuid:r,topic:i})}createSubscriptionKey(e,t,n){let r=t||"*";if(!(e&&r&&n))throw Error("Missing uuid, name, or topic string");return function(...e){return e.map(e=>w.from(`${e}`).toString("base64")).join("/")}(e,r,n)}onmessage(e){let{action:t}=e;switch(t){case"process-message":this.processMessage(e);break;case this.events.subscriberAdded:this.emitSubscriverEvent(this.events.subscriberAdded,e);break;case this.events.subscriberRemoved:this.emitSubscriverEvent(this.events.subscriberRemoved,e)}return!0}}eg.InterApplicationBus=tN,eg.InterAppPayload=class{};var tG={};Object.defineProperty(tG,"__esModule",{value:!0}),tG.Clipboard=void 0;let tW=x;class tD extends tW.Base{async writeText(e){await this.wire.sendAction("clipboard-write-text",e)}async readText(e){let{payload:t}=await this.wire.sendAction("clipboard-read-text",{type:e});return t.data}async writeImage(e){await this.wire.sendAction("clipboard-write-image",e)}async readImage(e={format:"dataURL"}){let{payload:t}=await this.wire.sendAction("clipboard-read-image",e);return t.data}async writeHtml(e){await this.wire.sendAction("clipboard-write-html",e)}async readHtml(e){let{payload:t}=await this.wire.sendAction("clipboard-read-html",{type:e});return t.data}async writeRtf(e){await this.wire.sendAction("clipboard-write-rtf",e)}async readRtf(e){let{payload:t}=await this.wire.sendAction("clipboard-read-rtf",{type:e});return t.data}async write(e){await this.wire.sendAction("clipboard-write",e)}async getAvailableFormats(e){let{payload:t}=await this.wire.sendAction("clipboard-read-formats",{type:e});return t.data}}tG.Clipboard=tD;var tH={},tV={},tz={};Object.defineProperty(tz,"__esModule",{value:!0}),tz.ExternalApplication=void 0;let tK=x;class tY extends tK.EmitterBase{constructor(e,t){super(e,"external-application",t.uuid),this.identity=t}getInfo(){return this.wire.sendAction("get-external-application-info",this.identity).then(({payload:e})=>e.data)}}tz.ExternalApplication=tY,Object.defineProperty(tV,"__esModule",{value:!0}),tV.ExternalApplicationModule=void 0;let tJ=x;class tq extends tJ.Base{wrap(e){return this.wire.sendAction("external-application-wrap").catch(e=>{}),Promise.resolve(new tz.ExternalApplication(this.wire,{uuid:e}))}wrapSync(e){return this.wire.sendAction("external-application-wrap-sync").catch(e=>{}),new tz.ExternalApplication(this.wire,{uuid:e})}}tV.ExternalApplicationModule=tq,function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(tV,e),n(tz,e)}(tH);var tZ={},tX={},tQ={};Object.defineProperty(tQ,"__esModule",{value:!0}),tQ._Frame=void 0;let t0=x;class t1 extends t0.EmitterBase{constructor(e,t){super(e,"frame",t.uuid,t.name),this.identity=t}getInfo(){return this.wire.sendAction("get-frame-info",this.identity).then(({payload:e})=>e.data)}getParentWindow(){return this.wire.sendAction("get-parent-window",this.identity).then(({payload:e})=>e.data)}}tQ._Frame=t1,Object.defineProperty(tX,"__esModule",{value:!0}),tX._FrameModule=void 0;let t2=x;class t3 extends t2.Base{async wrap(e){this.wire.sendAction("frame-wrap").catch(e=>{});let t=(0,D.validateIdentity)(e);if(t)throw Error(t);return new tQ._Frame(this.wire,e)}wrapSync(e){this.wire.sendAction("frame-wrap-sync").catch(e=>{});let t=(0,D.validateIdentity)(e);if(t)throw Error(t);return new tQ._Frame(this.wire,e)}getCurrent(){return this.wire.sendAction("frame-get-current").catch(e=>{}),Promise.resolve(new tQ._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity()))}getCurrentSync(){return this.wire.sendAction("frame-get-current-sync").catch(e=>{}),new tQ._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity())}}tX._FrameModule=t3,function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(tX,e),n(tQ,e)}(tZ);var t5={};Object.defineProperty(t5,"__esModule",{value:!0}),t5.GlobalHotkey=void 0;let t8=x;class t6 extends t8.EmitterBase{constructor(e){super(e,"global-hotkey")}async register(e,t){await this.on(e,t),await this.wire.sendAction("global-hotkey-register",{hotkey:e})}async unregister(e){await this.removeAllListeners(e),await this.wire.sendAction("global-hotkey-unregister",{hotkey:e})}async unregisterAll(){await Promise.all(this.eventNames().filter(e=>"registered"!==e&&"unregistered"!==e).map(e=>this.removeAllListeners(e))),await this.wire.sendAction("global-hotkey-unregister-all",{})}async isRegistered(e){let{payload:{data:t}}=await this.wire.sendAction("global-hotkey-is-registered",{hotkey:e});return t}}t5.GlobalHotkey=t6;var t4,t9,t7={},ne={},nt={},nn=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},nr=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(nt,"__esModule",{value:!0}),nt.Platform=void 0;let ni=x;class no extends ni.EmitterBase{constructor(e,t,n=`custom-frame-${t.uuid}`){super(e,"application",t.uuid),t4.set(this,void 0),this.getClient=(e=this.identity)=>{if(e.uuid!==this.identity.uuid)return new no(this.wire,e).getClient();if(this.wire.sendAction("platform-get-client",this.identity).catch(e=>{}),!no.clientMap.has(nr(this,t4,"f"))){let e=nr(this,t9,"f").call(this);no.clientMap.set(nr(this,t4,"f"),e)}return no.clientMap.get(nr(this,t4,"f"))},t9.set(this,async()=>{try{let e=await this._channel.connect(nr(this,t4,"f"),{wait:!1});return e.onDisconnection(()=>{no.clientMap.delete(nr(this,t4,"f"))}),e}catch(e){throw no.clientMap.delete(nr(this,t4,"f")),Error("The targeted Platform is not currently running. Listen for application-started event for the given Uuid.")}}),this.launchLegacyManifest=this.launchContentManifest;let r=(0,D.validateIdentity)(t);if(r)throw Error(r);nn(this,t4,n,"f"),this._channel=this.fin.InterApplicationBus.Channel,this.identity={uuid:t.uuid},this.Layout=this.fin.Platform.Layout,this.Application=this.fin.Application.wrapSync(this.identity)}async createView(e,t,n){this.wire.sendAction("platform-create-view",this.identity).catch(e=>{});let r=await this.getClient(),i=await r.dispatch("create-view",{target:t,opts:e,targetView:n});if(!i||(0,D.validateIdentity)(i.identity))throw Error(`When overwriting the createView call, please return an object that has a valid 'identity' property: ${JSON.stringify(i)}`);return this.fin.View.wrapSync(i.identity)}async createWindow(e){this.wire.sendAction("platform-create-window",this.identity).catch(e=>{});let t=await this.getClient();e.reason||(e.reason="api-call");let n=await t.dispatch("create-view-container",e);if(!n||(0,D.validateIdentity)(n.identity))throw Error(`When overwriting the createWindow call, please return an object that has a valid 'identity' property: ${JSON.stringify(n)}`);let{identity:r}=n,i=this.fin.Window.wrapSync(r);return i.name=r.name,i.uuid=r.uuid,i}async quit(){return this.wire.sendAction("platform-quit",this.identity).catch(e=>{}),(await this.getClient()).dispatch("quit")}async closeView(e){this.wire.sendAction("platform-close-view",this.identity).catch(e=>{});let t=await this.getClient();await t.dispatch("close-view",{view:e})}async reparentView(e,t){console.warn("Platform.reparentView has been deprecated, please use Platform.createView"),this.wire.sendAction("platform-reparent-view",this.identity).catch(e=>{});let n={...e,uuid:e.uuid??this.identity.uuid},r=await this.fin.View.wrap(n),i=await r.getOptions();return this.createView(i,t)}async getSnapshot(){return this.wire.sendAction("platform-get-snapshot",this.identity).catch(e=>{}),(await this.getClient()).dispatch("get-snapshot")}async getViewSnapshot(e){return(await this.getClient()).dispatch("get-view-snapshot",{viewIdentity:e})}async applySnapshot(e,t){let n;this.wire.sendAction("platform-apply-snapshot",this.identity).catch(e=>{});let r="Requested snapshot must be a valid Snapshot object, or a url or filepath to such an object.";if("string"==typeof e)try{n=(await this._channel.wire.sendAction("get-application-manifest",{manifestUrl:e})).payload.data}catch(e){throw Error(`${r}: ${e}`)}else n=e;if(!n.windows)throw Error(r);let i=await this.getClient();return await i.dispatch("apply-snapshot",{snapshot:n,options:t}),this}async fetchManifest(e){return(await this.getClient()).dispatch("platform-fetch-manifest",{manifestUrl:e})}async launchContentManifest(e){this.wire.sendAction("platform-launch-content-manifest",this.identity).catch(()=>{});let t=await this.getClient(),n=await this.fetchManifest(e);return t.dispatch("launch-into-platform",{manifest:n,manifestUrl:e}),this}async setWindowContext(e={},t){if(this.wire.sendAction("platform-set-window-context",this.identity).catch(e=>{}),!e)throw Error("Please provide a serializable object or string to set the context.");let n=await this.getClient(),{entityType:r}=t?await this.fin.System.getEntityInfo(t.uuid,t.name):this.fin.me;await n.dispatch("set-window-context",{context:e,entityType:r,target:t||{uuid:this.fin.me.uuid,name:this.fin.me.name}})}async getWindowContext(e){this.wire.sendAction("platform-get-window-context",this.identity).catch(e=>{});let t=await this.getClient(),{entityType:n}=e?await this.fin.System.getEntityInfo(e.uuid,e.name):this.fin.me;return t.dispatch("get-window-context",{target:e||{uuid:this.fin.me.uuid,name:this.fin.me.name},entityType:n})}async closeWindow(e,t={skipBeforeUnload:!1}){return this.wire.sendAction("platform-close-window",this.identity).catch(e=>{}),(await this.getClient()).dispatch("close-window",{windowId:e,options:t})}}nt.Platform=no,t4=new WeakMap,t9=new WeakMap,no.clientMap=new Map;var ns={},na={},nc={},nd={};function nl(e){switch(e){case"columns":case"grid":case"rows":case"tabs":return!0;default:return!1}}Object.defineProperty(nd,"__esModule",{value:!0}),nd.overrideFromComposables=nd.isValidPresetType=void 0,nd.isValidPresetType=nl,nd.overrideFromComposables=function(...e){return t=>e.reduceRight((e,t)=>n=>t(e(n)),e=>e)(t)},nd.default={isValidPresetType:nl};var nh={},nu={},np={};Object.defineProperty(np,"__esModule",{value:!0}),np.ApiConsumer=void 0,np.ApiConsumer=class{constructor(e){this.strategy=e,this.consume=async e=>(await this.strategy.getExposedFunctions(e)).reduce((t,n)=>({...t,[n.key]:this.strategy.createFunction(n,e)}),{})}};var nf={},ny={};Object.defineProperty(ny,"__esModule",{value:!0}),ny.expose=ny.getExposedProperties=void 0;let nw=Symbol("exposedProperties");ny.getExposedProperties=e=>e[nw]||e.prototype[nw]||[],ny.expose=e=>(t,n,r)=>{t[nw]=t[nw]||[],t[nw].push({key:n,descriptor:r,options:e})},Object.defineProperty(nf,"__esModule",{value:!0}),nf.ApiExposer=void 0,nf.ApiExposer=class{constructor(e){this.strategy=e,this.exposeInstance=async(e,t)=>{let n=(0,ny.getExposedProperties)(e),r=await Promise.all(n.map(async({key:n,options:r})=>({key:n,options:await this.strategy.exposeFunction(e[n].bind(e),{key:n,options:r,meta:t})})));await this.strategy.exposeMeta(t,r)}}};var ng={},nm={},nv={};Object.defineProperty(nv,"__esModule",{value:!0}),nv.ChannelsConsumer=void 0,nv.ChannelsConsumer=class{constructor(e){this.channel=e,this.getExposedFunctions=async e=>{let{id:t}=e,{props:n}=await this.channel.dispatch(`api-meta:${t}`);return n},this.createFunction=e=>(...t)=>{let{action:n}=e.options;return this.channel.dispatch(n,{args:t})}}};var nb={};Object.defineProperty(nb,"__esModule",{value:!0}),nb.ChannelsExposer=void 0,nb.ChannelsExposer=class{constructor(e){this.channelProviderOrClient=e,this.exposeFunction=async(e,t)=>{let{key:n,options:r,meta:i}=t,{id:o}=i,s=`${o}.${r?.action||n}`;return await this.channelProviderOrClient.register(s,async({args:t})=>e(...t)),{action:s}},this.exposeMeta=async({id:e},t)=>{let n=`api-meta:${e}`;await this.channelProviderOrClient.register(n,()=>({props:t}))}}},function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(nv,e),n(nb,e)}(nm),function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(nm,e)}(ng),function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(np,e),n(nf,e),n(ng,e),n(ny,e)}(nu);var nC={};Object.defineProperty(nC,"__esModule",{value:!0}),nC.createRelayedDispatch=nC.relayChannelClientApi=void 0;let nI=["no longer connected","RTCDataChannel closed unexpectedly","The client you are trying to dispatch from is disconnected from the target provider"];var nx=nC.relayChannelClientApi=async(e,t)=>{e.register(`relay:${t}`,({action:t,target:n,payload:r})=>e.dispatch(n,t,r)),await Promise.resolve()};nC.createRelayedDispatch=(e,t,n,r)=>async(i,o)=>{var s;try{return await e.dispatch(`relay:${n}`,{action:i,payload:o,target:t})}catch(e){if(s=e.message,nI.some(e=>s.includes(e))&&r)throw Error(r);throw e}};var nE,nA,n_,nP=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},nO=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(nh,"__esModule",{value:!0}),nh.ColumnOrRow=nh.TabStack=nh.LayoutNode=void 0;class nM{constructor(e,t){nE.set(this,void 0),this.isRoot=()=>nO(this,nE,"f").isRoot(this.entityId),this.exists=()=>nO(this,nE,"f").exists(this.entityId),this.getParent=async()=>{let e=await nO(this,nE,"f").getParent(this.entityId);if(e)return nM.getEntity(e,nO(this,nE,"f"))},this.createAdjacentStack=async(e,t)=>{let n=await nO(this,nE,"f").createAdjacentStack(this.entityId,e,t);return nM.getEntity({entityId:n,type:"stack"},nO(this,nE,"f"))},this.getAdjacentStacks=async e=>(await nO(this,nE,"f").getAdjacentStacks({targetId:this.entityId,edge:e})).map(e=>nM.getEntity({type:"stack",entityId:e.entityId},nO(this,nE,"f"))),nP(this,nE,e,"f"),this.entityId=t}}nh.LayoutNode=nM,nE=new WeakMap,nM.newLayoutEntitiesClient=async(e,t,n)=>{let r=(0,nC.createRelayedDispatch)(e,n,"layout-relay","You are trying to interact with a layout component on a window that does not exist or has been destroyed.");return new nu.ApiConsumer(new nu.ChannelsConsumer({dispatch:r})).consume({id:t})},nM.getEntity=(e,t)=>{let{entityId:n,type:r}=e;switch(r){case"column":case"row":return new nS(t,n,r);case"stack":return new nj(t,n);default:throw Error(`Unrecognised Layout Entity encountered ('${JSON.stringify(e)})`)}};class nj extends nM{constructor(e,t){super(e,t),nA.set(this,void 0),this.type="stack",this.getViews=()=>nO(this,nA,"f").getStackViews(this.entityId),this.addView=async(e,t={index:0})=>nO(this,nA,"f").addViewToStack(this.entityId,e,t),this.removeView=async e=>{await nO(this,nA,"f").removeViewFromStack(this.entityId,e)},this.setActiveView=async e=>{await nO(this,nA,"f").setStackActiveView(this.entityId,e)},nP(this,nA,e,"f")}}nh.TabStack=nj,nA=new WeakMap;class nS extends nM{constructor(e,t,n){super(e,t),n_.set(this,void 0),this.getContent=async()=>(await nO(this,n_,"f").getContent(this.entityId)).map(e=>nM.getEntity(e,nO(this,n_,"f"))),nP(this,n_,e,"f"),this.type=n}}nh.ColumnOrRow=nS,n_=new WeakMap;var nR={};Object.defineProperty(nR,"__esModule",{value:!0}),nR.DEFAULT_LAYOUT_KEY=nR.LAYOUT_CONTROLLER_ID=void 0,nR.LAYOUT_CONTROLLER_ID="layout-entities",nR.DEFAULT_LAYOUT_KEY="__default__";var nL,nT,nB,nF=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(nc,"__esModule",{value:!0}),nc.Layout=void 0;let nk=x;class n$ extends nk.Base{static getClient(e){return nF(e,nT,"f").getValue()}constructor(e,t){super(t),nL.add(this),nT.set(this,new X.Lazy(async()=>nh.LayoutNode.newLayoutEntitiesClient(await this.platform.getClient(),nR.LAYOUT_CONTROLLER_ID,this.identity))),this.replace=async e=>{this.wire.sendAction("layout-replace").catch(e=>{});let t=await this.platform.getClient();await t.dispatch("replace-layout",{target:this.identity,opts:{layout:e}})},this.replaceView=async(e,t)=>{this.wire.sendAction("layout-replace-view").catch(e=>{});let n=await this.platform.getClient();await n.dispatch("replace-view",{target:this.identity,opts:{viewToReplace:e,newView:t}})},this.applyPreset=async e=>{this.wire.sendAction("layout-apply-preset").catch(e=>{});let t=await this.platform.getClient(),{presetType:n}=e;if(!n||!(0,nd.isValidPresetType)(n))throw Error("Cannot apply preset layout, please include an applicable presetType property in the PresetLayoutOptions.");await t.dispatch("apply-preset-layout",{target:this.identity,opts:{presetType:n}})};let n=(0,D.validateIdentity)(e);if(n)throw Error(n);this.identity=e,this.platform=this.fin.Platform.wrapSync({uuid:e.uuid}),e.uuid===this.fin.me.uuid&&e.name===this.fin.me.name&&(this.init=this.fin.Platform.Layout.init)}async getConfig(){return this.wire.sendAction("layout-get-config").catch(e=>{}),(await this.platform.getClient()).dispatch("get-frame-snapshot",{target:this.identity})}async getCurrentViews(){this.wire.sendAction("layout-get-views").catch(e=>{});let e=await this.platform.getClient();return(await e.dispatch("get-layout-views",{target:this.identity})).map(e=>this.fin.View.wrapSync(e))}async getRootItem(){this.wire.sendAction("layout-get-root-item").catch(()=>{});let e=await nF(this,nT,"f").getValue(),t=await e.getRoot("layoutName"in this.identity?this.identity:void 0);return nh.LayoutNode.getEntity(t,e)}async getStackByViewIdentity(e){this.wire.sendAction("layout-get-stack-by-view").catch(()=>{});let t=await nF(this,nT,"f").getValue(),n=await t.getStackByView(e);if(!n)throw Error(`No stack found for view: ${e.uuid}/${e.name}`);return nh.LayoutNode.getEntity(n,t)}async addView(e,{location:t,targetView:n}={}){this.wire.sendAction("layout-add-view").catch(e=>{});let{identity:r}=await nF(this,nL,"m",nB).call(this,"layout-add-view",{viewOptions:e,location:t,targetView:n});return{identity:r}}async closeView(e){this.wire.sendAction("layout-close-view").catch(e=>{}),await nF(this,nL,"m",nB).call(this,"layout-close-view",{viewIdentity:e})}}nc.Layout=n$,nT=new WeakMap,nL=new WeakSet,nB=async function(e,t){return(await this.platform.getClient()).dispatch(e,{target:this.identity,opts:t})};var nU,nN,nG,nW,nD,nH=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},nV=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};Object.defineProperty(na,"__esModule",{value:!0}),na.LayoutModule=void 0;let nz=x;class nK extends nz.Base{constructor(){super(...arguments),nU.add(this),nN.set(this,!1),nG.set(this,null),this.init=async(e={})=>{if(this.wire.sendAction("layout-init").catch(e=>{}),!this.wire.environment.layoutAllowedInContext(this.fin))throw Error("Layout.init can only be called from a Window context.");if(nH(this,nN,"f"))throw Error("Layout.init was already called, please use Layout.create to add additional layouts.");"openfin"===this.wire.environment.type&&await this.fin.Platform.getCurrentSync().getClient(),nV(this,nN,!0,"f"),nV(this,nG,await this.wire.environment.initLayoutManager(this.fin,this.wire,e),"f"),await this.wire.environment.applyLayoutSnapshot(this.fin,nH(this,nG,"f"),e);let t={name:this.fin.me.name,uuid:this.fin.me.uuid};if(!e.layoutManagerOverride){let e={layoutName:nR.DEFAULT_LAYOUT_KEY,...t};return nH(this,nW,"f").call(this,e)}return this.wrapSync(t)},nW.set(this,e=>{let t="[Layout] You are using a deprecated property `layoutManager` - it will throw if you access it starting in v37.",n=new Proxy({},{get(e,n){throw console.warn(`[Layout-mgr-proxy] accessing ${n.toString()}`),Error(t)}});return new Proxy(Object.assign(this.wrapSync(e),{layoutManager:n}),{get(e,n){if("layoutManager"===n)throw console.warn(`[Layout-proxy] accessing ${n.toString()}`),Error(t);return e[n]}})}),this.getCurrentLayoutManagerSync=()=>nH(this,nU,"m",nD).call(this,"fin.Platform.Layout.getCurrentLayoutManagerSync()"),this.create=async e=>this.wire.environment.createLayout(nH(this,nU,"m",nD).call(this,"fin.Platform.Layout.create()"),e),this.destroy=async e=>this.wire.environment.destroyLayout(nH(this,nU,"m",nD).call(this,"fin.Platform.Layout.destroy()"),e)}async wrap(e){return this.wire.sendAction("layout-wrap").catch(e=>{}),new nc.Layout(e,this.wire)}wrapSync(e){return this.wire.sendAction("layout-wrap-sync").catch(e=>{}),new nc.Layout(e,this.wire)}async getCurrent(){if(this.wire.sendAction("layout-get-current").catch(e=>{}),"openfin"===this.wire.environment.type&&!this.fin.me.isWindow)throw Error("You are not in a Window context.  Only Windows can have a Layout.");let{uuid:e,name:t}=this.fin.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("layout-get-current-sync").catch(e=>{}),"openfin"===this.wire.environment.type&&!this.fin.me.isWindow)throw Error("You are not in a Window context.  Only Windows can have a Layout.");let{uuid:e,name:t}=this.fin.me;return this.wrapSync({uuid:e,name:t})}async getLayoutByViewIdentity(e){this.wire.sendAction("layout-get-by-view-identity").catch(()=>{});let t=await this.wire.environment.getViewWindowIdentity(this.fin,e);t.identity&&(t=t.identity);try{let n=this.wrapSync(t),r=await nc.Layout.getClient(n),i=await r.getLayoutIdentityForViewOrThrow(e);return this.wrapSync(i)}catch(n){if(!["No action registered at target for","getLayoutIdentityForViewOrThrow is not a function"].some(e=>n.message.includes(e)))throw n;if(t.uuid===t.name)throw Error(`View identity ${JSON.stringify(e)} is not attached to any layout in provider window ${JSON.stringify(t)}.`);return this.wrapSync(t)}}}na.LayoutModule=nK,nN=new WeakMap,nG=new WeakMap,nW=new WeakMap,nU=new WeakSet,nD=function(e){if(!nH(this,nG,"f"))throw Error(`You must call init before using the API ${e}`);return nH(this,nG,"f")},function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(na,e),n(nc,e)}(ns),Object.defineProperty(ne,"__esModule",{value:!0}),ne.PlatformModule=void 0;let nY=x;class nJ extends nY.Base{constructor(e,t){super(e),this._channel=t,this.Layout=new ns.LayoutModule(this.wire)}async init(e){if(!fin.__internal_.isPlatform||fin.me.name!==fin.me.uuid)throw Error("fin.Platform.init should only be called from a custom platform provider running in the main window of the application.");return this.wire.environment.initPlatform(this.fin,e)}async wrap(e){return this.wire.sendAction("platform-wrap").catch(e=>{}),new nt.Platform(this.wire,{uuid:e.uuid})}wrapSync(e){return this.wire.sendAction("platform-wrap-sync").catch(e=>{}),new nt.Platform(this.wire,{uuid:e.uuid})}async getCurrent(){return this.wire.sendAction("platform-get-current").catch(e=>{}),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("platform-get-current-sync").catch(e=>{}),this.wrapSync({uuid:this.wire.me.uuid})}start(e){return this.wire.sendAction("platform-start").catch(e=>{}),new Promise(async(t,n)=>{try{let{uuid:n}=e,r=await this.fin.Application._create({...e,isPlatformController:!0});r.once("platform-api-ready",()=>t(this.wrapSync({uuid:n}))),r._run({uuid:n})}catch(e){n(e)}})}startFromManifest(e,t){return this.wire.sendAction("platform-start-from-manifest").catch(e=>{}),new Promise(async(n,r)=>{try{let r=await this.fin.Application._createFromManifest(e);r.once("platform-api-ready",()=>n(this.wrapSync({uuid:r.identity.uuid}))),r._run(t)}catch(e){r(e)}})}}ne.PlatformModule=nJ,function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ne,e),n(nt,e)}(t7);var nq={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMe=e.getBaseMe=e.environmentUnsupportedMessage=void 0;let t=er(),n=eu();function r(e,t,n){return{isView:"view"===e,isWindow:"window"===e,isFrame:"iframe"===e,isExternal:"external connection"===e,uuid:t,name:n,entityType:e}}e.environmentUnsupportedMessage="You are not running in OpenFin.",e.getBaseMe=r,e.getMe=function(i){let{uuid:o,name:s,entityType:a}=i.me,c="Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.",d={setContext(){throw Error(c)},addContextHandler(){throw Error(c)},getContextGroups(){throw Error(c)},joinContextGroup(){throw Error(c)},removeFromContextGroup(){throw Error(c)},getAllClientsInContextGroup(){throw Error(c)},getInfoForContextGroup(){throw Error(c)}};switch(a){case"view":return Object.assign(new t.View(i,{uuid:o,name:s}),r(a,o,s),{interop:d,isOpenFin:!0});case"window":return Object.assign(new n._Window(i,{uuid:o,name:s}),r(a,o,s),{interop:d,isOpenFin:!0});case"iframe":return Object.assign(new tZ._Frame(i,{uuid:o,name:s}),r(a,o,s),{interop:d,isOpenFin:!0});case"external connection":return Object.assign(new tH.ExternalApplication(i,{uuid:o}),r(a,o,s),{interop:d,isOpenFin:!1});default:return{...r(a,o,s),eventNames:()=>{throw Error(e.environmentUnsupportedMessage)},emit:()=>{throw Error(e.environmentUnsupportedMessage)},listeners:()=>{throw Error(e.environmentUnsupportedMessage)},listenerCount:()=>{throw Error(e.environmentUnsupportedMessage)},on:()=>{throw Error(e.environmentUnsupportedMessage)},addListener:()=>{throw Error(e.environmentUnsupportedMessage)},once:()=>{throw Error(e.environmentUnsupportedMessage)},prependListener:()=>{throw Error(e.environmentUnsupportedMessage)},prependOnceListener:()=>{throw Error(e.environmentUnsupportedMessage)},removeListener:()=>{throw Error(e.environmentUnsupportedMessage)},removeAllListeners:()=>{throw Error(e.environmentUnsupportedMessage)},interop:{setContext(){throw Error(e.environmentUnsupportedMessage)},addContextHandler(){throw Error(e.environmentUnsupportedMessage)},getContextGroups(){throw Error(e.environmentUnsupportedMessage)},joinContextGroup(){throw Error(e.environmentUnsupportedMessage)},removeFromContextGroup(){throw Error(e.environmentUnsupportedMessage)},getAllClientsInContextGroup(){throw Error(e.environmentUnsupportedMessage)},getInfoForContextGroup(){throw Error(e.environmentUnsupportedMessage)}},isOpenFin:!1}}}}(nq);var nZ={},nX={},nQ={};Object.defineProperty(nQ,"__esModule",{value:!0}),nQ.createWarningObject=nQ.createUnusableObject=void 0,nQ.createUnusableObject=function(e){let t=()=>{throw Error(e)};return new Proxy({},{apply:t,construct:t,defineProperty:t,deleteProperty:t,get:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,set:t,setPrototypeOf:t})},nQ.createWarningObject=function(e,t){return new Proxy(t,{get:(...t)=>(console.warn(e),Reflect.get(...t)),set:(...t)=>(console.warn(e),Reflect.set(...t)),getOwnPropertyDescriptor:(...t)=>(console.warn(e),Reflect.getOwnPropertyDescriptor(...t)),ownKeys:(...t)=>(console.warn(e),Reflect.ownKeys(...t))})};var n0={},n1={},n2={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkContextIntegrity=e.wrapIntentHandler=e.BROKER_ERRORS=e.generateOverrideWarning=e.generateOverrideError=e.wrapContextHandler=e.wrapInTryCatch=e.generateId=void 0,e.generateId=()=>`${Math.random()}${Date.now()}`,e.wrapInTryCatch=(e,t)=>(...n)=>{try{return e(...n)}catch(e){throw Error((t||"")+e)}},e.wrapContextHandler=(e,t)=>async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t} for context type ${n.type}: ${e}`),e}},e.generateOverrideError=(e,t)=>`You have tried to to use ${e} but ${t} has not been overridden in the Interop Broker. Please override this function. Refer to our documentation for more info.`,e.generateOverrideWarning=(e,t,n,r)=>{let{uuid:i,name:o}=n;return r?`Entity with identity: ${i}/${o} has called ${r} or ${e} but ${t} has not been overridden.`:`Entity with identity: ${i}/${o} has called ${e} but ${t} has not been overridden.`},e.BROKER_ERRORS={fireIntent:(0,e.generateOverrideError)("fireIntent","handleFiredIntent"),fireIntentForContext:(0,e.generateOverrideError)("fireIntentForContext","handleFiredIntentForContext"),getInfoForIntent:(0,e.generateOverrideError)("getInfoForIntent","handleInfoForIntent"),getInfoForIntentsByContext:(0,e.generateOverrideError)("getInfoForIntentsByContext","handleInfoForIntentsByContext"),joinSessionContextGroupWithJoinContextGroup:"The Context Group you have tried to join is a Session Context Group. Custom Context Groups can only be defined by the Interop Broker through code or manifest configuration. Please use joinSessionContextGroup.",fdc3Open:(0,e.generateOverrideError)("fdc3.open","fdc3HandleOpen"),fdc3FindInstances:(0,e.generateOverrideError)("fdc3.findInstances","fdc3HandleFindInstances"),fdc3GetAppMetadata:(0,e.generateOverrideError)("fdc3.getAppMetadata","fdc3HandleGetAppMetadata"),fdc3GetInfo:(0,e.generateOverrideError)("fdc3.getInfo","fdc3HandleGetInfo")},e.wrapIntentHandler=(e,t)=>async n=>{try{return e(n)}catch(e){throw console.error(`Error thrown by handler ${t}: ${e}`),e}},e.checkContextIntegrity=e=>e?"object"!=typeof e?{isValid:!1,reason:"Context must be an Object"}:e.type?{isValid:!0}:{isValid:!1,reason:"Context must have a type property"}:{isValid:!1,reason:"No context supplied"}}(n2),Object.defineProperty(n1,"__esModule",{value:!0}),n1.default=class{constructor(e,t){this.provider=e,this.id=t,this.lastContext=void 0,this.contextGroupMap=new Map,this.clients=new Map,this.registerListeners()}registerListeners(){this.provider.register(`sessionContextGroup:getContext-${this.id}`,this.getCurrentContext.bind(this)),this.provider.register(`sessionContextGroup:setContext-${this.id}`,this.setContext.bind(this)),this.provider.register(`sessionContextGroup:handlerAdded-${this.id}`,this.handlerAdded.bind(this)),this.provider.register(`sessionContextGroup:handlerRemoved-${this.id}`,this.handlerRemoved.bind(this))}getCurrentContext(e){return e.type?this.contextGroupMap.get(e.type):this.lastContext}setContext(e,t){let{context:n}=e,r=(0,n2.checkContextIntegrity)(n);if(!1===r.isValid)throw Error(`Failed to set Context - bad Context. Reason: ${r.reason}. Context: ${JSON.stringify(n)}`);if(!this.getClientState(t))throw Error(`Client with Identity: ${t.uuid} ${t.name} not in Session Client State Map`);this.contextGroupMap.set(n.type,n),this.lastContext=n,Array.from(this.clients.values()).forEach(e=>{e.contextHandlers.get(n.type)?.forEach(t=>{this.provider.dispatch(e.clientIdentity,t,n)}),e.globalHandler&&this.provider.dispatch(e.clientIdentity,e.globalHandler,n)})}getClientState(e){return this.clients.get(e.endpointId)}async handlerAdded(e,t){let{handlerId:n,contextType:r}=e,i=this.getClientState(t);if(!i)throw Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(r){let e=i.contextHandlers.get(r)||[];i.contextHandlers.set(r,[...e,n]);let o=this.contextGroupMap.get(r);o&&await this.provider.dispatch(t,n,o)}else{i.globalHandler=n;let e=[...this.contextGroupMap.keys()].map(async e=>{let r=this.contextGroupMap.get(e);r&&await this.provider.dispatch(t,n,r)});await Promise.all(e)}}handlerRemoved(e,t){let{handlerId:n}=e,r=this.clients.get(t.endpointId);r?(Array.from(r.contextHandlers).forEach(([,e])=>{let t=e.indexOf(n);t>-1&&e.splice(t,1)}),r.globalHandler===n&&(r.globalHandler=void 0)):console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. clientIdentity: ${t}`)}registerNewClient(e){if(!this.clients.has(e.endpointId)){let t={contextHandlers:new Map,clientIdentity:e,globalHandler:void 0};this.clients.set(e.endpointId,t)}}onDisconnection(e){this.clients.delete(e.endpointId)}};var n3={};Object.defineProperty(n3,"__esModule",{value:!0}),n3.PrivateChannelProvider=void 0;class n5{constructor(e,t){this.provider=e,this.id=t,this.clients=new Map,this.registerListeners(),this.contextByContextType=new Map,this.lastContext=void 0,this.provider.onConnection(e=>this.registerNewClient(e)),this.provider.onDisconnection(async e=>{let{endpointId:t}=e;this.clients.has(t)&&await this.handleClientDisconnecting(e),0===(await this.provider.getAllClientInfo()).length&&this.provider.destroy()})}getClientState(e){return this.clients.get(e.endpointId)}registerListeners(){this.provider.register("broadcast",this.broadcast.bind(this)),this.provider.register("getCurrentContext",this.getCurrentContext.bind(this)),this.provider.register("contextHandlerAdded",this.contextHandlerAdded.bind(this)),this.provider.register("contextHandlerRemoved",this.contextHandlerRemoved.bind(this)),this.provider.register("nonStandardHandlerRemoved",this.nonStandardHandlerRemoved.bind(this)),this.provider.register("onAddContextHandlerAdded",this.onAddContextHandlerAdded.bind(this)),this.provider.register("onDisconnectHandlerAdded",this.onDisconnectHandlerAdded.bind(this)),this.provider.register("onUnsubscribeHandlerAdded",this.onUnsubscribeHandlerAdded.bind(this)),this.provider.register("clientDisconnecting",(e,t)=>{this.handleClientDisconnecting(t)})}broadcast(e,t){let{context:n}=e;if(!this.getClientState(t))throw Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call broadcast, is not connected to this Private Channel`);let r=(0,n2.checkContextIntegrity)(n);if(!1===r.isValid)throw Error(`Failed to broadcast - bad Context. Reason: ${r.reason}. Context: ${JSON.stringify(n)}`);this.contextByContextType.set(n.type,n),this.lastContext=n,Array.from(this.clients.values()).forEach(e=>{let t=e.handlerIdsByContextTypes.get(n.type);t&&t.forEach(t=>{this.provider.dispatch(e.clientIdentity,t,n)}),e.globalHandler&&this.provider.dispatch(e.clientIdentity,e.globalHandler,n)})}getCurrentContext(e,t){let{contextType:n}=e;if(!this.getClientState(t))throw Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call getCurrentContext, is not connected to this Private Channel`);return void 0!==n?this.contextByContextType.get(n)||null:this.lastContext?this.lastContext:null}contextHandlerAdded(e,t){let{handlerId:n,contextType:r}=e,i=this.getClientState(t);if(!i)throw Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call addContextListener, is not connected to this Private Channel`);if(r){let e=i.handlerIdsByContextTypes.get(r)||[];i.handlerIdsByContextTypes.set(r,[...e,n])}else i.globalHandler=n;Array.from(this.clients.values()).forEach(e=>{e.clientIdentity.endpointId!==t.endpointId&&e.onAddContextListenerHandlerId&&this.provider.dispatch(e.clientIdentity,e.onAddContextListenerHandlerId,r)})}async contextHandlerRemoved(e,t){let{handlerId:n}=e,r=this.getClientState(t);if(r){let e;if(r.globalHandler===n)r.globalHandler=void 0;else for(let[t,i]of r.handlerIdsByContextTypes){let r=i.indexOf(n);r>-1&&(i.splice(r,1),e=t)}let i=(await this.getConnectedClients()).map(async n=>{let{clientIdentity:r,clientIdentity:{endpointId:i},onUnsubscribeHandlerId:o}=n;i!==t.endpointId&&o&&await this.provider.dispatch(r,o,e)});try{await Promise.all(i)}catch(e){throw console.error(`Problem when attempting to dispatch to onUnsubscribeHandlers. Error: ${e} Removing Client: ${n}. uuid: ${t.uuid}. name: ${t.name}. endpointId: ${t.endpointId}`),Error(e)}}else console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. uuid: ${t.uuid}. name: ${t.name}. endpointId: ${t.endpointId}.`)}nonStandardHandlerRemoved(e,t){let{handlerId:n}=e,r=this.getClientState(t);r?r.onDisconnectHandlerId===n?r.onDisconnectHandlerId=void 0:r.onAddContextListenerHandlerId===n?r.onAddContextListenerHandlerId=void 0:r.onUnsubscribeHandlerId===n&&(r.onUnsubscribeHandlerId=void 0):console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. clientIdentity: ${t}`)}onAddContextHandlerAdded(e,t){let n=this.getClientState(t),{handlerId:r}=e;if(!n)throw Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call onAddContextListener, is not connected to this Private Channel`);n.onAddContextListenerHandlerId=r,Array.from(this.clients.values()).forEach(e=>{e.clientIdentity.endpointId!==t.endpointId&&Array.from(e.handlerIdsByContextTypes.keys()).forEach(e=>{this.provider.dispatch(t,r,e)})})}onDisconnectHandlerAdded(e,t){let n=this.getClientState(t),{handlerId:r}=e;if(!n)throw Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call onDisconnect, is not connected to this Private Channel`);n.onDisconnectHandlerId=r}onUnsubscribeHandlerAdded(e,t){let n=this.getClientState(t),{handlerId:r}=e;if(!n)throw Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call onUnsubscribe, is not connected to this Private Channel`);n.onUnsubscribeHandlerId=r}removeClient(e){let t=this.getClientState(e);if(!t)throw Error(`Client with Identity: ${e.uuid} ${e.name}, tried to call disconnect, is not connected to this Private Channel`);t.handlerIdsByContextTypes.clear(),this.clients.delete(e.endpointId)}async fireOnDisconnectForOtherClients(e){let{endpointId:t}=e,n=(await this.getConnectedClients()).map(async e=>{let{clientIdentity:{endpointId:n},onDisconnectHandlerId:r}=e;n!==t&&r&&await this.provider.dispatch(e.clientIdentity,r)});try{await Promise.all(n)}catch(t){throw console.error(`Problem when attempting to dispatch to onDisconnectHandlers. Error: ${t} Disconnecting Client: uuid: ${e.uuid}. name: ${e.name}. endpointId: ${e.endpointId}`),Error(t)}}async unsubscribeAll(e){let{endpointId:t}=e,n=this.clients.get(t);if(n){let t=Array.from(n.handlerIdsByContextTypes.values()).flat(),r=n.globalHandler;if(t.length>0){let n=t.map(async t=>this.contextHandlerRemoved({handlerId:t},e));try{await Promise.all(n)}catch(e){console.error(e.message)}}if(r)try{await this.contextHandlerRemoved({handlerId:r},e)}catch(e){console.error(e.message)}}}async handleClientDisconnecting(e){await this.unsubscribeAll(e),this.removeClient(e),await this.fireOnDisconnectForOtherClients(e)}registerNewClient(e){if(!this.clients.has(e.endpointId)){let t={clientIdentity:e,handlerIdsByContextTypes:new Map,globalHandler:void 0,onAddContextListenerHandlerId:void 0,onUnsubscribeHandlerId:void 0,onDisconnectHandlerId:void 0};this.clients.set(e.endpointId,t)}}async getConnectedClients(){let e=await this.provider.getAllClientInfo();return Array.from(this.clients.values()).filter(t=>{let{uuid:n,name:r}=t.clientIdentity;return e.some(e=>r===e.name&&n===e.uuid)})}static init(e,t){return new n5(e,t)}}n3.PrivateChannelProvider=n5;var n8,n6,n4,n9=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},n7=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},re=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n0,"__esModule",{value:!0}),n0.InteropBroker=void 0;let rt=x,rn=re(n1),rr=re(f()),ri=[{id:"green",displayMetadata:{color:"#00CC88",name:"green"}},{id:"purple",displayMetadata:{color:"#8C61FF",name:"purple"}},{id:"orange",displayMetadata:{color:"#FF8C4C",name:"orange"}},{id:"red",displayMetadata:{color:"#FF5E60",name:"red"}},{id:"pink",displayMetadata:{color:"#FF8FB8",name:"pink"}},{id:"yellow",displayMetadata:{color:"#E9FF8F",name:"yellow"}}];class ro extends rt.Base{constructor(e,t,n){super(e),n8.set(this,void 0),n6.set(this,void 0),n4.set(this,void 0),this.getProvider=()=>n7(this,n4,"f").getValue(),this.interopClients=new Map,this.contextGroupsById=new Map,n9(this,n6,n.contextGroups??[...ri],"f"),n9(this,n8,n.fdc3Info,"f"),n?.logging&&(this.logging=n.logging),this.intentClientMap=new Map,this.lastContextMap=new Map,this.sessionContextGroupMap=new Map,n9(this,n4,new X.Lazy(t),"f"),this.setContextGroupMap(),this.setupChannelProvider()}static createClosedConstructor(...e){return class extends ro{constructor(...t){if(t.length){let[n,r,i]=t;if(i&&"object"==typeof i&&!(0,rr.default)(i,e[2]))return console.warn("You have modified the parameters of the InteropOverride constructor. This behavior is deprecated and will be removed in a future version. You can modify these options in your manifest. Please consult our Interop docs for guidance on migrating to the new override scheme."),void super(e[0],e[1],i);console.warn("You are attempting to pass arguments to the InteropOverride constructor. This is not necessary, and these passed arguments will be ignored. You are likely using an older InteropBroker override scheme. Please consult our Interop docs for guidance on migrating to the new override scheme.")}super(...e)}}}setContext({context:e},t){this.wire.sendAction("interop-broker-set-context").catch(e=>{});let n=this.getClientState(t);if(!n||!n.contextGroupId)throw n?Error("You must join a context group before you can set context."):Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);{let{contextGroupId:t}=n;this.setContextForGroup({context:e},t)}}setContextForGroup({context:e},t){this.wire.sendAction("interop-broker-set-context-for-group").catch(e=>{});let n=this.contextGroupsById.get(t);if(!n)throw Error(`Unable to set context for context group that isn't in the context group mapping: ${t}.`);let r=ro.checkContextIntegrity(e);if(!1===r.isValid)throw Error(`Failed to set Context - bad Context. Reason: ${r.reason}. Context: ${JSON.stringify(e)}`);let i=e.type;n.set(i,e),this.lastContextMap.set(t,i),Array.from(this.interopClients.values()).filter(e=>e.contextGroupId===t).forEach(t=>{for(let[,n]of t.contextHandlers)ro.isContextTypeCompatible(i,n.contextType)&&this.invokeContextHandler(t.clientIdentity,n.handlerId,e)})}getCurrentContext(e,t){this.wire.sendAction("interop-broker-get-current-context").catch(e=>{});let n=this.getClientState(t);if(!n?.contextGroupId)throw Error("You must be a member of a context group to call getCurrentContext");let{contextGroupId:r}=n,i=this.contextGroupsById.get(r),o=this.lastContextMap.get(r),s=e?.contextType??o;return i&&s?i.get(s):void 0}async joinContextGroup({contextGroupId:e,target:t},n){if(this.wire.sendAction("interop-broker-join-context-group").catch(e=>{}),this.sessionContextGroupMap.has(e))throw Error(n2.BROKER_ERRORS.joinSessionContextGroupWithJoinContextGroup);if(t){ro.hasEndpointId(t)&&await this.addClientToContextGroup({contextGroupId:e},t);try{let n=this.channel.connections.filter(e=>e.uuid===t.uuid&&e.name===t.name);if(!n.length)throw Error(`Given Identity ${t.uuid} ${t.name} is not connected to the Interop Broker.`);n.length>1&&console.warn(`More than one connection found for identity ${t.uuid} ${t.name}`);let r=[];for(let t of n)r.push(this.addClientToContextGroup({contextGroupId:e},t));await Promise.all(r)}catch(e){throw Error(e)}}else await this.addClientToContextGroup({contextGroupId:e},n)}async addClientToContextGroup({contextGroupId:e},t){this.wire.sendAction("interop-broker-add-client-to-context-group").catch(e=>{});let n=this.getClientState(t);if(!n)throw Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(!this.getContextGroups().find(t=>t.id===e))throw Error(`Attempting to join a context group that does not exist: ${e}. You may only join existing context groups.`);if(n.contextGroupId!==e){n.contextGroupId=e,await this.setCurrentContextGroupInClientOptions(t,e);let r=this.contextGroupsById.get(e);for(let[,e]of n.contextHandlers){let{contextType:n,handlerId:i}=e;if(void 0===n)r.forEach((e,n)=>{this.invokeContextHandler(t,i,e)});else if(r.has(n)){let e=r.get(n);e&&this.invokeContextHandler(t,i,e)}}}}async removeFromContextGroup({target:e},t){if(this.wire.sendAction("interop-broker-remove-from-context-group").catch(e=>{}),e){ro.hasEndpointId(e)&&await this.removeClientFromContextGroup(e);try{let t=this.channel.connections.filter(t=>t.uuid===e.uuid&&t.name===e.name);if(!t.length)throw Error(`No connection found for given Identity ${e.uuid} ${e.name}`);t.length>1&&console.warn(`More than one connection found for identity ${e.uuid} ${e.name}`);let n=[];for(let e of t)n.push(this.removeClientFromContextGroup(e));await Promise.all(n)}catch(e){throw Error(e)}}else await this.removeClientFromContextGroup(t)}async removeClientFromContextGroup(e){this.wire.sendAction("interop-broker-remove-client-from-context-group").catch(e=>{});let t=this.getClientState(e);t&&(t.contextGroupId=void 0),await this.setCurrentContextGroupInClientOptions(e,null)}getContextGroups(){return this.wire.sendAction("interop-broker-get-context-groups").catch(e=>{}),n7(this,n6,"f").map(e=>({...e}))}getInfoForContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-info-for-context-group").catch(e=>{}),this.getContextGroups().find(t=>t.id===e)}getAllClientsInContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-all-clients-in-context-group").catch(e=>{}),Array.from(this.interopClients.values()).filter(t=>t.contextGroupId===e).map(e=>e.clientIdentity)}async handleFiredIntent(e,t){throw console.warn((0,n2.generateOverrideWarning)("fdc3.raiseIntent","InteropBroker.handleFiredIntent",t,"interopClient.fireIntent")),Error(n2.BROKER_ERRORS.fireIntent)}async setIntentTarget(e,t){this.wire.sendAction("interop-broker-set-intent-target").catch(e=>{});let n=this.intentClientMap.get(t.name),r=`intent-handler-${e.name}`;if(n){let t=n.get(r);if(t){if(t.pendingIntents.push(e),t.clientIdentity&&t.isReady){let{clientIdentity:e,pendingIntents:n}=t;try{let i=n[n.length-1];await this.invokeIntentHandler(e,r,i),t.pendingIntents=[]}catch(n){console.error(`Error invoking intent handler for client ${e.uuid}/${e.name}/${e.endpointId}`),t.isReady=!1}}}else n.set(r,{isReady:!1,pendingIntents:[e]})}else{this.intentClientMap.set(t.name,new Map);let n=this.intentClientMap.get(t.name);n&&n.set(r,{isReady:!1,pendingIntents:[e]})}}async handleInfoForIntent(e,t){throw console.warn((0,n2.generateOverrideWarning)("fdc3.findIntent","InteropBroker.handleInfoForIntent",t,"interopClient.getInfoForIntent")),Error(n2.BROKER_ERRORS.getInfoForIntent)}async handleInfoForIntentsByContext(e,t){throw console.warn((0,n2.generateOverrideWarning)("fdc3.findIntentsByContext","InteropBroker.handleInfoForIntentsByContext",t,"interopClient.getInfoForIntentsByContext")),Error(n2.BROKER_ERRORS.getInfoForIntentsByContext)}async handleFiredIntentForContext(e,t){throw console.warn((0,n2.generateOverrideWarning)("fdc3.raiseIntentForContext","InteropBroker.handleFiredIntentForContext",t,"interopClient.fireIntentForContext")),Error(n2.BROKER_ERRORS.fireIntentForContext)}async clientDisconnected(e){}async fdc3HandleOpen({app:e,context:t},n){throw console.warn((0,n2.generateOverrideWarning)("fdc3.open","InteropBroker.fdc3HandleOpen",n)),Error(n2.BROKER_ERRORS.fdc3Open)}async fdc3HandleFindInstances(e,t){throw console.warn((0,n2.generateOverrideWarning)("fdc3.open","InteropBroker.fdc3HandleFindInstances",t)),Error(n2.BROKER_ERRORS.fdc3FindInstances)}async fdc3HandleGetAppMetadata(e,t){throw console.warn((0,n2.generateOverrideWarning)("fdc3.getAppMetadata","InteropBroker.fdc3HandleGetAppMetadata",t)),Error(n2.BROKER_ERRORS.fdc3GetAppMetadata)}async invokeContextHandler(e,t,n){let r=await this.getProvider();try{await r.dispatch(e,t,n)}catch(r){console.error(`Error invoking context handler ${t} for context type ${n.type} in client ${e.uuid}/${e.name}/${e.endpointId}`,r)}}async invokeIntentHandler(e,t,n){let r=await this.getProvider();await r.dispatch(e,t,n)}async fdc3HandleGetInfo(e,t){let{fdc3Version:n}=e;return{fdc3Version:n,...n7(this,n8,"f"),optionalFeatures:{OriginatingAppMetadata:!1,UserChannelMembershipAPIs:!0},appMetadata:{appId:"",instanceId:""}}}async getAllClientInfo(){return(await this.getProvider()).getAllClientInfo()}decorateSnapshot(e){return{...e,interopSnapshotDetails:{contextGroupStates:this.getContextGroupStates()}}}applySnapshot(e,t){let n=e?.interopSnapshotDetails?.contextGroupStates;n&&(t?.closeExistingWindows||this.updateExistingClients(n),this.rehydrateContextGroupStates(n))}updateExistingClients(e){this.interopClients.forEach(t=>{let{clientIdentity:n,contextGroupId:r,contextHandlers:i}=t;if(r)for(let[,t]of Object.entries(e[r]))i.forEach(e=>{let{handlerId:r,contextType:i}=e;ro.isContextTypeCompatible(t.type,i)&&this.invokeContextHandler(n,r,t)})})}getContextGroupStates(){return ro.toObject(this.contextGroupsById)}rehydrateContextGroupStates(e){for(let[t,n]of Object.entries(e))for(let[e,r]of Object.entries(n))this.contextGroupsById.has(t)?this.contextGroupsById.get(t).set(e,r):console.warn(`Attempting to set a context group that isn't in the context group mapping. Skipping context group rehydration for: ${t}`)}contextHandlerRegistered({contextType:e,handlerId:t},n){let r=this.getClientState(n);if(r?.contextHandlers.set(t,{contextType:e,handlerId:t}),r&&r.contextGroupId){let{contextGroupId:i}=r,o=this.contextGroupsById.get(i);if(void 0===e)o.forEach((e,r)=>{this.invokeContextHandler(n,t,e)});else if(o.has(e)){let r=o.get(e);r&&this.invokeContextHandler(n,t,r)}}}async intentHandlerRegistered(e,t){let{handlerId:n}=e,r=this.intentClientMap.get(t.name),i=r?.get(n);if(r)if(i){let{pendingIntents:e}=i;i.clientIdentity=t,i.isReady=!0;try{if(e.length>0){let r=e[e.length-1];await this.invokeIntentHandler(t,n,r),i.pendingIntents=[]}}catch(e){console.error(`Error invoking intent handler: ${n} for client ${t.uuid}/${t.name}/${t.endpointId}`)}}else r.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t});else{this.intentClientMap.set(t.name,new Map);let e=this.intentClientMap.get(t.name);e&&e.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t})}}removeContextHandler({handlerId:e},t){let n=this.getClientState(t);n&&n.contextHandlers.delete(e)}handleJoinSessionContextGroup({sessionContextGroupId:e},t){try{if(!e)throw Error("Failed to join session context group: must specify group id.");let n=this.sessionContextGroupMap.get(e);if(n)n.registerNewClient(t);else{let n=new rn.default(this.channel,e);n.registerNewClient(t),this.sessionContextGroupMap.set(e,n)}return{hasConflict:this.contextGroupsById.has(e)}}catch(e){throw Error(e)}}getClientState(e){return this.interopClients.get(e.endpointId)}static toObject(e){let t=Object.fromEntries(e),n={};return Object.entries(t).forEach(([e,t])=>{let r=Object.fromEntries(t);n[e]=r}),n}static hasEndpointId(e){return void 0!==e.endpointId}static isContextTypeCompatible(e,t){return void 0===t||e===t}setContextGroupMap(){for(let e of this.getContextGroups())this.contextGroupsById.set(e.id,new Map)}async setCurrentContextGroupInClientOptions(e,t){try{let n,r=await this.fin.System.getEntityInfo(e.uuid,e.name);"view"===r.entityType?n=await this.fin.View.wrap(e):"window"===r.entityType&&(n=await this.fin.Window.wrap(e)),n&&await n.updateOptions({interop:{currentContextGroup:t}})}catch(e){}}async setupChannelProvider(){try{let e=await this.getProvider();this.channel=e,this.wireChannel(e)}catch(e){throw Error(`Error setting up Interop Broker Channel Provider: ${e}`)}}wireChannel(e){e.onConnection(async(e,t)=>{if(!await this.isConnectionAuthorized(e,t))throw Error(`Connection not authorized for ${e.uuid}, ${e.name}`);if(!e.endpointId)throw Error("Version too old to be compatible with Interop. Please upgrade your runtime to a more recent version.");let n={contextGroupId:void 0,contextHandlers:new Map,clientIdentity:e};t?.currentContextGroup&&this.contextGroupsById.has(t.currentContextGroup)&&(n.contextGroupId=t?.currentContextGroup),this.interopClients.set(e.endpointId,n)}),e.onDisconnection(e=>{this.interopClients.delete(e.endpointId);let t=this.intentClientMap.get(e.name);t&&e.uuid===this.fin.me.uuid&&t.forEach(e=>{e.isReady=!1}),this.sessionContextGroupMap.forEach(t=>{t.onDisconnection(e)}),this.clientDisconnected(e)}),e.beforeAction(async(e,t,n)=>{if(!await this.isActionAuthorized(e,t,n))throw Error(`Action (${e}) not authorized for ${n.uuid}, ${n.name}`);this.logging?.beforeAction?.enabled&&console.log(e,t,n)}),e.afterAction((e,t,n)=>{this.logging?.afterAction?.enabled&&console.log(...t?[e,t,n]:[e,n])}),e.register("setContext",this.setContext.bind(this)),e.register("fireIntent",this.handleFiredIntent.bind(this)),e.register("getCurrentContext",this.getCurrentContext.bind(this)),e.register("getInfoForIntent",this.handleInfoForIntent.bind(this)),e.register("getInfoForIntentsByContext",this.handleInfoForIntentsByContext.bind(this)),e.register("fireIntentForContext",this.handleFiredIntentForContext.bind(this)),e.register("getContextGroups",this.getContextGroups.bind(this)),e.register("joinContextGroup",this.joinContextGroup.bind(this)),e.register("removeFromContextGroup",this.removeFromContextGroup.bind(this)),e.register("getAllClientsInContextGroup",this.getAllClientsInContextGroup.bind(this)),e.register("getInfoForContextGroup",this.getInfoForContextGroup.bind(this)),e.register("contextHandlerRegistered",this.contextHandlerRegistered.bind(this)),e.register("intentHandlerRegistered",this.intentHandlerRegistered.bind(this)),e.register("removeContextHandler",this.removeContextHandler.bind(this)),e.register("sessionContextGroup:createIfNeeded",this.handleJoinSessionContextGroup.bind(this)),e.register("fdc3Open",this.fdc3HandleOpen.bind(this)),e.register("fdc3v2FindIntentsByContext",this.handleInfoForIntentsByContext.bind(this)),e.register("fdc3FindInstances",this.fdc3HandleFindInstances.bind(this)),e.register("fdc3GetAppMetadata",this.fdc3HandleGetAppMetadata.bind(this)),e.register("fdc3v2GetInfo",async(e,t)=>this.fdc3HandleGetInfo.bind(this)(e,t)),e.register("createPrivateChannelProvider",async e=>{let{channelId:t}=e,n=await this.fin.InterApplicationBus.Channel.create(t);n3.PrivateChannelProvider.init(n,t)})}isConnectionAuthorized(e,t){return this.wire.sendAction("interop-broker-is-connection-authorized").catch(e=>{}),Promise.resolve(!0)}isActionAuthorized(e,t,n){return this.wire.sendAction("interop-broker-is-action-authorized").catch(e=>{}),Promise.resolve(!0)}}n0.InteropBroker=ro,n8=new WeakMap,n6=new WeakMap,n4=new WeakMap,ro.checkContextIntegrity=n2.checkContextIntegrity;var rs,ra={},rc={},rd=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},rl=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(rc,"__esModule",{value:!0});let rh=x;class ru extends rh.Base{constructor(e,t,n){super(e),rs.set(this,void 0),this.id=n,rd(this,rs,t,"f")}async setContext(e){return this.wire.sendAction("interop-session-context-group-set-context").catch(e=>{}),(await rl(this,rs,"f")).dispatch(`sessionContextGroup:setContext-${this.id}`,{sessionContextGroupId:this.id,context:e})}async getCurrentContext(e){return this.wire.sendAction("interop-session-context-group-get-context").catch(e=>{}),(await rl(this,rs,"f")).dispatch(`sessionContextGroup:getContext-${this.id}`,{sessionContextGroupId:this.id,type:e})}async addContextHandler(e,t){let n;if(this.wire.sendAction("interop-session-context-group-add-handler").catch(e=>{}),"function"!=typeof e)throw Error("Non-function argument passed to the first parameter 'handler'. Be aware that the argument order does not match the FDC3 standard.");let r=await rl(this,rs,"f");return n=t?`sessionContextHandler:invoke-${this.id}-${t}-${(0,n2.generateId)()}`:`sessionContextHandler:invoke-${this.id}`,r.register(n,(0,n2.wrapContextHandler)(e,n)),await r.dispatch(`sessionContextGroup:handlerAdded-${this.id}`,{handlerId:n,contextType:t}),{unsubscribe:await this.createUnsubscribeCb(n)}}async createUnsubscribeCb(e){let t=await rl(this,rs,"f");return async()=>{t.remove(e),await t.dispatch(`sessionContextGroup:handlerRemoved-${this.id}`,{handlerId:e})}}getUserInstance(){return{id:this.id,setContext:(0,n2.wrapInTryCatch)(this.setContext.bind(this),"Failed to set context: "),getCurrentContext:(0,n2.wrapInTryCatch)(this.getCurrentContext.bind(this),"Failed to get context: "),addContextHandler:(0,n2.wrapInTryCatch)(this.addContextHandler.bind(this),"Failed to add context handler: ")}}}rc.default=ru,rs=new WeakMap;var rp,rf,ry,rw=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},rg=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},rm=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ra,"__esModule",{value:!0}),ra.InteropClient=void 0;let rv=x,rb=rm(rc);class rC extends rv.Base{constructor(e,t,n){super(e),rp.set(this,void 0),rf.set(this,void 0),ry.set(this,void 0),rw(this,rf,new Map,"f"),rw(this,rp,t,"f"),rw(this,ry,n,"f")}async setContext(e){return this.wire.sendAction("interop-client-set-context").catch(e=>{}),(await rg(this,rp,"f")).dispatch("setContext",{context:e})}async addContextHandler(e,t){let n;if(this.wire.sendAction("interop-client-add-context-handler").catch(e=>{}),"function"!=typeof e)throw Error("Non-function argument passed to the first parameter 'handler'. Be aware that the argument order does not match the FDC3 standard.");let r=await rg(this,rp,"f");n=t?`invokeContextHandler-${t}-${(0,n2.generateId)()}`:"invokeContextHandler";let i=(0,n2.wrapContextHandler)(e,n);return r.register(n,i),await r.dispatch("contextHandlerRegistered",{handlerId:n,contextType:t}),{unsubscribe:async()=>{r.remove(n),await r.dispatch("removeContextHandler",{handlerId:n})}}}async getContextGroups(){return this.wire.sendAction("interop-client-get-context-groups").catch(e=>{}),(await rg(this,rp,"f")).dispatch("getContextGroups")}async joinContextGroup(e,t){this.wire.sendAction("interop-client-join-context-group").catch(e=>{});let n=await rg(this,rp,"f");if(!e)throw Error("No contextGroupId specified for joinContextGroup.");return n.dispatch("joinContextGroup",{contextGroupId:e,target:t})}async removeFromContextGroup(e){return this.wire.sendAction("interop-client-remove-from-context-group").catch(e=>{}),(await rg(this,rp,"f")).dispatch("removeFromContextGroup",{target:e})}async getAllClientsInContextGroup(e){this.wire.sendAction("interop-client-get-all-clients-in-context-group").catch(e=>{});let t=await rg(this,rp,"f");if(!e)throw Error("No contextGroupId specified for getAllClientsInContextGroup.");return t.dispatch("getAllClientsInContextGroup",{contextGroupId:e})}async getInfoForContextGroup(e){this.wire.sendAction("interop-client-get-info-for-context-group").catch(e=>{});let t=await rg(this,rp,"f");if(!e)throw Error("No contextGroupId specified for getInfoForContextGroup.");return t.dispatch("getInfoForContextGroup",{contextGroupId:e})}async fireIntent(e){return this.wire.sendAction("interop-client-fire-intent").catch(e=>{}),(await rg(this,rp,"f")).dispatch("fireIntent",e)}async registerIntentHandler(e,t,n){this.wire.sendAction("interop-client-register-intent-handler").catch(e=>{});let r=await rg(this,rp,"f"),i=`intent-handler-${t}`,o=(0,n2.wrapIntentHandler)(e,i);try{await r.register(i,o),await r.dispatch("intentHandlerRegistered",{handlerId:i,...n})}catch(e){throw Error("Unable to register intent handler")}return{unsubscribe:async()=>{r.remove(i)}}}async getCurrentContext(e){return this.wire.sendAction("interop-client-get-current-context").catch(e=>{}),(await rg(this,rp,"f")).dispatch("getCurrentContext",{contextType:e})}async getInfoForIntent(e){return this.wire.sendAction("interop-client-get-info-for-intent").catch(e=>{}),(await rg(this,rp,"f")).dispatch("getInfoForIntent",e)}async getInfoForIntentsByContext(e){return this.wire.sendAction("interop-client-get-info-for-intents-by-context").catch(e=>{}),(await rg(this,rp,"f")).dispatch("getInfoForIntentsByContext",e)}async fireIntentForContext(e){return this.wire.sendAction("interop-client-fire-intent-for-context").catch(e=>{}),(await rg(this,rp,"f")).dispatch("fireIntentForContext",e)}async joinSessionContextGroup(e){try{let t=rg(this,rf,"f").get(e);if(t)return t.getUserInstance();let n=await rg(this,rp,"f"),{hasConflict:r}=await n.dispatch("sessionContextGroup:createIfNeeded",{sessionContextGroupId:e});r&&console.warn(`A (non-session) context group with the name "${e}" already exists. If you are trying to join a Context Group, call joinContextGroup instead.`);let i=new rb.default(this.wire,rg(this,rp,"f"),e);return rg(this,rf,"f").set(e,i),i.getUserInstance()}catch(t){throw console.error(`Error thrown trying to create Session Context Group with id "${e}": ${t}`),t}}async onDisconnection(e){return this.wire.sendAction("interop-client-add-ondisconnection-listener").catch(e=>{}),(await rg(this,rp,"f")).onDisconnection(t=>{let{uuid:n}=t;e({type:"interop-broker",topic:"disconnected",brokerName:n})})}getFDC3Sync(e){return rg(this,ry,"f").call(this,e,this,this.wire)}async getFDC3(e){return this.getFDC3Sync(e)}static async ferryFdc3Call(e,t,n){return(await rg(e,rp,"f")).dispatch(t,n||null)}}ra.InteropClient=rC,rp=new WeakMap,rf=new WeakMap,ry=new WeakMap;var rI={};function rx(e){return["fdc3HandleFindInstances","handleInfoForIntent","handleInfoForIntentsByContext","fdc3HandleGetAppMetadata","fdc3HandleGetInfo","fdc3HandleOpen","handleFiredIntent","handleFiredIntentForContext"].filter(t=>e[t]===n0.InteropBroker.prototype[t])}Object.defineProperty(rI,"__esModule",{value:!0}),rI.overrideCheck=rI.checkFDC32Overrides=rI.getDefaultViewFdc3VersionFromAppInfo=void 0,rI.getDefaultViewFdc3VersionFromAppInfo=function({manifest:e,initialOptions:t}){let n=e?.platform?.defaultViewOptions?.fdc3InteropApi??t.defaultViewOptions?.fdc3InteropApi;return["1.2","2.0"].includes(n??"")?n:void 0},rI.checkFDC32Overrides=rx,rI.overrideCheck=function(e,t){if(t&&"2.0"===t){let t=rx(e);t.length>0&&console.warn(`WARNING: FDC3 2.0 has been set as a default option for Views in this Platform, but the required InteropBroker APIs for FDC3 2.0 compliance have not all been overridden.
The following APIs need to be overridden:
${t.join("\n")}`)}};var rE={},rA={},r_={},rP={},rO={},rM=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),rj=b&&b.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),rS=b&&b.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&rM(t,e,n);return rj(t,e),t};Object.defineProperty(rO,"__esModule",{value:!0}),rO.PrivateChannelClient=void 0;let rR=rS(n2);rO.PrivateChannelClient=class{constructor(e,t){this.id=t,this.client=e,this.listeners=new Map}async broadcast(e){return this.client.dispatch("broadcast",{context:e})}async getCurrentContext(e){return this.client.dispatch("getCurrentContext",{contextType:e})}async addContextListener(e,t){let n;if("function"!=typeof t)throw Error("Non-function argument passed to the second parameter 'handler'. Be aware that the argument order does not match the FDC3 standard.");n=e?`contextHandler:invoke-${this.id}-${e}-${rR.generateId()}`:`contextHandler:invoke-${this.id}-${rR.generateId()}`,this.client.register(n,rR.wrapContextHandler(t,n));let r={unsubscribe:await this.createContextUnsubscribeCb(n)};return this.listeners.set(n,r),await this.client.dispatch("contextHandlerAdded",{handlerId:n,contextType:e}),r}createNonStandardUnsubscribeCb(e){return async()=>{this.client.remove(e),this.listeners.delete(e),await this.client.dispatch("nonStandardHandlerRemoved",{handlerId:e})}}createContextUnsubscribeCb(e){return async()=>{this.client.remove(e),this.listeners.delete(e),await this.client.dispatch("contextHandlerRemoved",{handlerId:e})}}onAddContextListener(e){let t=`onContextHandlerAdded:invoke-${this.id}-${rR.generateId()}`;this.client.register(t,e);let n={unsubscribe:this.createNonStandardUnsubscribeCb(t)};return this.listeners.set(t,n),this.client.dispatch("onAddContextHandlerAdded",{handlerId:t}),n}onDisconnect(e){let t=`onDisconnect:invoke-${this.id}-${rR.generateId()}`;this.client.register(t,e);let n={unsubscribe:this.createNonStandardUnsubscribeCb(t)};return this.listeners.set(t,n),this.client.dispatch("onDisconnectHandlerAdded",{handlerId:t}),n}onUnsubscribe(e){let t=`onUnsubscribe:invoke-${this.id}-${rR.generateId()}`;this.client.register(t,e);let n={unsubscribe:this.createNonStandardUnsubscribeCb(t)};return this.listeners.set(t,n),this.client.dispatch("onUnsubscribeHandlerAdded",{handlerId:t}),n}async cleanUpAllSubs(){Array.from(this.listeners.keys()).forEach(e=>{this.client.remove(e),this.listeners.delete(e)})}async disconnect(){try{await this.client.dispatch("clientDisconnecting"),await this.cleanUpAllSubs(),await this.client.disconnect()}catch(e){throw Error(e.message)}}},function(e){var t,n,r,i=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.getIntentResolution=e.isChannel=e.isContext=e.connectPrivateChannel=e.buildAppChannelObject=e.buildPrivateChannelObject=e.ChannelError=e.ResultError=e.UnsupportedChannelApiError=e.getUnsupportedChannelApis=void 0;let o=i(f());e.getUnsupportedChannelApis=e=>({addContextListener:()=>{throw new s("Channel.addContextListener",e)},broadcast:()=>{throw new s("Channel.broadcast",e)},getCurrentContext:()=>{throw new s("Channel.getCurrentContext",e)}});class s extends Error{constructor(e,t="System"){super(e),this.message=`Calling ${e} on an instance of a ${t} Channel returned by fdc3.get${t}Channels is not supported. If you would like to use a ${t} Channel, please use fdc3.joinChannel, fdc3.addContextListener, and fdc3.broadcast instead.`}}e.UnsupportedChannelApiError=s,(t=r=e.ResultError||(e.ResultError={})).NoResultReturned="NoResultReturned",t.IntentHandlerRejected="IntentHandlerRejected",(n=e.ChannelError||(e.ChannelError={})).NoChannelFound="NoChannelFound",n.AccessDenied="AccessDenied",n.CreationFailed="CreationFailed",e.buildPrivateChannelObject=e=>{let t=!1,n=()=>{if(t)throw Error("Private Channel Client has been disconnected from the Private Channel")};return{id:e.id,type:"private",broadcast:async t=>(n(),e.broadcast(t)),getCurrentContext:async t=>(n(),e.getCurrentContext(t)),addContextListener:async(t,r)=>{n();let i=r,o=t;return"function"==typeof t&&(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),i=t,o=null),e.addContextListener(o,i)},onAddContextListener:t=>(n(),e.onAddContextListener(t)),disconnect:async()=>(n(),t=!0,e.disconnect()),onDisconnect:t=>(n(),e.onDisconnect(t)),onUnsubscribe:t=>(n(),e.onUnsubscribe(t))}},e.buildAppChannelObject=e=>({id:e.id,type:"app",broadcast:e.setContext,getCurrentContext:async t=>{let n=await e.getCurrentContext(t);return void 0===n?null:n},addContextListener:(t,n)=>{let r,i;"function"==typeof t?(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),r=t):(r=n,"string"==typeof t&&(i=t));let s=(async()=>{let t=!0,n=await e.getCurrentContext(i);return e.addContextHandler((e,i)=>{if(!t||(t=!1,!(0,o.default)(n,e)))return r(e,i)},i)})();return{...s,unsubscribe:()=>s.then(e=>e.unsubscribe())}}}),e.connectPrivateChannel=async t=>{try{let n=await fin.InterApplicationBus.Channel.connect(t),r=new rO.PrivateChannelClient(n,t);return(0,e.buildPrivateChannelObject)(r)}catch(e){throw Error(`Private Channel with id: ${t} doesn't exist`)}},e.isContext=e=>{if(e&&"object"==typeof e&&"type"in e){let{type:t}=e;return"string"==typeof t}return!1},e.isChannel=e=>{if(e&&"object"==typeof e&&"type"in e&&"id"in e){let{type:t,id:n}=e;return"string"==typeof t&&"string"==typeof n&&("app"===t||"private"===t)}return!1},e.getIntentResolution=async(t,n,i,o)=>{let s=(0,n2.generateId)(),a=new Promise((e,n)=>{fin.InterApplicationBus.subscribe({uuid:"*"},s,t=>{e(t)}).catch(()=>{"other"===t.wire.environment.type&&e(void 0),n(Error("getResult is not supported in this environment"))})}),c=i?{target:i,intentResolutionResultId:s}:{intentResolutionResultId:s},d=o?{name:o,context:n,metadata:c}:{...n,metadata:c},l=async()=>{let n=await a;if(!n||"object"!=typeof n)throw Error(r.NoResultReturned);let{error:i}=n;if(i)throw Error(r.IntentHandlerRejected);if((0,e.isChannel)(n)){let{id:r,type:i}=n;switch(i){case"private":n=await (0,e.connectPrivateChannel)(r);break;case"app":{let i=await t.joinSessionContextGroup(r);n=(0,e.buildAppChannelObject)(i)}}}else if(!(0,e.isContext)(n))throw Error(r.NoResultReturned);return n},h=o?await t.fireIntent(d):await t.fireIntentForContext(d);return"object"!=typeof h?{source:{appId:"",instanceId:""},intent:"",version:"2.0",getResult:l}:{...h,getResult:l}}}(rP);var rL,rT=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},rB=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},rF=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r_,"__esModule",{value:!0}),r_.FDC3ModuleBase=void 0;let rk=rF(f());r_.FDC3ModuleBase=class{get client(){return rT(this,rL,"f").call(this)}get fin(){return this.wire.getFin()}constructor(e,t){this.wire=t,rL.set(this,void 0),rB(this,rL,e,"f")}async broadcast(e){return this.wire.sendAction("fdc3-broadcast").catch(e=>{}),this.client.setContext(e)}async _open(e,t){this.wire.sendAction("fdc3-open").catch(e=>{});try{return await ra.InteropClient.ferryFdc3Call(this.client,"fdc3Open",{app:e,context:t})}catch(e){throw Error(e.message===n2.BROKER_ERRORS.fdc3Open?"ResolverUnavailable":e.message)}}async _getChannels(){return(await this.client.getContextGroups()).map(e=>({...e,type:"system",...(0,rP.getUnsupportedChannelApis)()}))}async getOrCreateChannel(e){this.wire.sendAction("fdc3-get-or-create-channel").catch(e=>{});let t=(await this._getChannels()).find(t=>t.id===e);if(t)return{...t,type:"system",...(0,rP.getUnsupportedChannelApis)()};try{let t=await this.client.joinSessionContextGroup(e);return(0,rP.buildAppChannelObject)(t)}catch(e){throw console.error(e.message),Error(rP.ChannelError.CreationFailed)}}async getSystemChannels(){return this.wire.sendAction("fdc3-get-system-channels").catch(e=>{}),this._getChannels()}async joinChannel(e){this.wire.sendAction("fdc3-join-channel").catch(e=>{});try{return await this.client.joinContextGroup(e)}catch(e){if(e.message===n2.BROKER_ERRORS.joinSessionContextGroupWithJoinContextGroup?console.error("The Channel you have tried to join is an App Channel. Custom Channels can only be defined by the Interop Broker through code or manifest configuration. Please use getOrCreateChannel."):console.error(e.message),e.message.startsWith("Attempting to join a context group that does not exist"))throw Error(rP.ChannelError.NoChannelFound);throw Error(rP.ChannelError.AccessDenied)}}async getCurrentChannel(){this.wire.sendAction("fdc3-get-current-channel").catch(e=>{});let e=await this.getCurrentContextGroupInfo();return e?this.buildChannelObject(e):null}async leaveCurrentChannel(){return this.wire.sendAction("fdc3-leave-current-channel").catch(e=>{}),this.client.removeFromContextGroup()}async getCurrentContextGroupInfo(){let e=await this.client.getContextGroups(),t=e.map(async e=>this.client.getAllClientsInContextGroup(e.id));return e[(await Promise.all(t)).findIndex(e=>e.some(e=>{let{uuid:t,name:n}=e;return this.wire.me.uuid===t&&this.wire.me.name===n}))]}async buildChannelObject(e){return{...e,type:"system",addContextListener:(...[e,t])=>{let n,r;"function"==typeof e?(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),n=e):(n=t,"string"==typeof e&&(r=e));let i=(async()=>{let e=!0,t=await this.client.getCurrentContext(r);return this.client.addContextHandler((r,i)=>{if(!e||(e=!1,!(0,rk.default)(t,r)))return n(r,i)},r)})();return{...i,unsubscribe:()=>i.then(e=>e.unsubscribe())}},broadcast:this.broadcast.bind(this),getCurrentContext:async e=>{let t=await this.client.getCurrentContext(e);return void 0===t?null:t}}}},rL=new WeakMap,Object.defineProperty(rA,"__esModule",{value:!0}),rA.Fdc3Module=void 0;let r$=r_;class rU extends r$.FDC3ModuleBase{async open(e,t){await super._open(e,t)}addContextListener(e,t){let n;return this.wire.sendAction("fdc3-add-context-listener").catch(e=>{}),"function"==typeof e?(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),n=this.client.addContextHandler(e)):n=this.client.addContextHandler(t,null===e?void 0:e),{...n,unsubscribe:()=>n.then(e=>e.unsubscribe())}}addIntentListener(e,t){this.wire.sendAction("fdc3-add-intent-listener").catch(e=>{});let n=this.client.registerIntentHandler(e=>{let{context:n,metadata:r}=e,{metadata:i}=n,o=r?.intentResolutionResultId||i?.intentResolutionResultId;o&&this.fin.InterApplicationBus.publish(o,null).catch(()=>null),t(e.context)},e,{fdc3Version:"1.2"});return{...n,unsubscribe:()=>n.then(e=>e.unsubscribe())}}async raiseIntent(e,t,n){this.wire.sendAction("fdc3-raise-intent").catch(e=>{});try{return await this.client.fireIntent(n?{name:e,context:t,metadata:{target:n}}:{name:e,context:t})}catch(e){throw Error(e.message===n2.BROKER_ERRORS.fireIntent?"ResolverUnavailable":e.message)}}async findIntent(e,t){this.wire.sendAction("fdc3-find-intent").catch(e=>{});try{return await this.client.getInfoForIntent({name:e,context:t})}catch(e){throw Error(e.message===n2.BROKER_ERRORS.getInfoForIntent?"ResolverUnavailable":e.message)}}async findIntentsByContext(e){this.wire.sendAction("fdc3-find-intents-by-context").catch(e=>{});try{return await this.client.getInfoForIntentsByContext(e)}catch(e){throw Error(e.message===n2.BROKER_ERRORS.getInfoForIntentsByContext?"ResolverUnavailable":e.message)}}async raiseIntentForContext(e,t){this.wire.sendAction("fdc3-raise-intent-for-context").catch(e=>{});try{return await this.client.fireIntentForContext({...e,metadata:{target:t}})}catch(e){throw Error(e.message===n2.BROKER_ERRORS.fireIntentForContext?"ResolverUnavailable":e.message)}}async getOrCreateChannel(e){return super.getOrCreateChannel(e)}getInfo(){return this.wire.sendAction("fdc3-get-info").catch(e=>{}),{providerVersion:this.wire.environment.getAdapterVersionSync(),provider:`openfin-${this.wire.me.uuid}`,fdc3Version:"1.2"}}}rA.Fdc3Module=rU;var rN={};Object.defineProperty(rN,"__esModule",{value:!0}),rN.Fdc3Module2=void 0;let rG=r_;class rW extends rG.FDC3ModuleBase{async open(e,t){return"string"==typeof e&&console.warn("Passing a string as the app parameter is deprecated, please use an AppIdentifier ({ appId: string; instanceId?: string })."),super._open(e,t)}async findInstances(e){this.wire.sendAction("fdc3-find-instances").catch(e=>{});try{return await ra.InteropClient.ferryFdc3Call(this.client,"fdc3FindInstances",e)}catch(e){throw Error(e.message===n2.BROKER_ERRORS.fdc3FindInstances?"ResolverUnavailable":e.message)}}async getAppMetadata(e){this.wire.sendAction("fdc3-get-app-metadata").catch(e=>{});try{return await ra.InteropClient.ferryFdc3Call(this.client,"fdc3GetAppMetadata",e)}catch(e){throw Error(e.message===n2.BROKER_ERRORS.fdc3GetAppMetadata?"ResolverUnavailable":e.message)}}async addContextListener(e,t){this.wire.sendAction("fdc3-add-context-listener").catch(e=>{});let n=e=>t=>{let{contextMetadata:n,...r}=t;e(...n?[{...r},n]:[t,null])},r=t,i=n(r);return"function"==typeof e?(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),i=n(r=e),this.client.addContextHandler(i)):this.client.addContextHandler(i,null===e?void 0:e)}async findIntent(e,t,n){this.wire.sendAction("fdc3-find-intent").catch(e=>{});try{return await this.client.getInfoForIntent({name:e,context:t,metadata:{resultType:n}})}catch(e){throw Error(e.message===n2.BROKER_ERRORS.getInfoForIntent?"ResolverUnavailable":e.message)}}async findIntentsByContext(e,t){this.wire.sendAction("fdc3-find-intents-by-context").catch(e=>{});try{return await ra.InteropClient.ferryFdc3Call(this.client,"fdc3v2FindIntentsByContext",t?{context:e,metadata:{resultType:t}}:e)}catch(e){throw Error(e.message===n2.BROKER_ERRORS.getInfoForIntentsByContext?"ResolverUnavailable":e.message)}}async raiseIntent(e,t,n){this.wire.sendAction("fdc3-raise-intent").catch(e=>{});try{return"string"==typeof n&&console.warn("Passing a string as the app parameter is deprecated, please use an AppIdentifier ({ appId: string; instanceId?: string })."),(0,rP.getIntentResolution)(this.client,t,n,e)}catch(e){throw Error(e.message===n2.BROKER_ERRORS.fireIntent?"ResolverUnavailable":e.message)}}async raiseIntentForContext(e,t){this.wire.sendAction("fdc3-raise-intent-for-context").catch(e=>{});try{return"string"==typeof t&&console.warn("Passing a string as the app parameter is deprecated, please use an AppIdentifier ({ appId: string; instanceId?: string })."),(0,rP.getIntentResolution)(this.client,e,t)}catch(e){throw Error(e.message===n2.BROKER_ERRORS.fireIntent?"ResolverUnavailable":e.message)}}async addIntentListener(e,t){if(this.wire.sendAction("fdc3-add-intent-listener").catch(e=>{}),"string"!=typeof e)throw Error("First argument must be an Intent name");return this.client.registerIntentHandler(async e=>{let n,r,{context:i,metadata:o}=e,{contextMetadata:s,metadata:a,...c}=i,d=o?.intentResolutionResultId||a?.intentResolutionResultId;try{let e=a?{metadata:a,...c}:{...c};r=n=await t(e,s)}catch(e){n=e,r={error:!0}}if(d&&this.fin.InterApplicationBus.publish(d,r).catch(()=>null),n instanceof Error)throw Error(n.message);return n},e,{fdc3Version:"2.0"})}async getOrCreateChannel(e){return super.getOrCreateChannel(e)}async createPrivateChannel(){let e=(0,n2.generateId)();await ra.InteropClient.ferryFdc3Call(this.client,"createPrivateChannelProvider",{channelId:e});let t=await this.fin.InterApplicationBus.Channel.connect(e),n=new rO.PrivateChannelClient(t,e);return(0,rP.buildPrivateChannelObject)(n)}async getUserChannels(){return(await this.client.getContextGroups()).map(e=>({...e,type:"user",...(0,rP.getUnsupportedChannelApis)("User")}))}async getSystemChannels(){return console.warn("This API has been deprecated. Please use fdc3.getUserChannels instead."),super.getSystemChannels()}async joinUserChannel(e){return super.joinChannel(e)}async joinChannel(e){return console.warn("This API has been deprecated. Please use fdc3.joinUserChannel instead."),super.joinChannel(e)}async getCurrentChannel(){let e=await super.getCurrentChannel();return e?{...e,type:"user",broadcast:this.broadcast.bind(this)}:null}async getInfo(){return ra.InteropClient.ferryFdc3Call(this.client,"fdc3v2GetInfo",{fdc3Version:"2.0"})}}rN.Fdc3Module2=rW,Object.defineProperty(rE,"__esModule",{value:!0}),rE.fdc3Factory=void 0,rE.fdc3Factory=(e,t,n)=>{switch(e){case"1.2":return new rA.Fdc3Module(()=>t,n);case"2.0":return new rN.Fdc3Module2(()=>t,n);default:throw Error(`Invalid FDC3 version provided: ${e}. Must be '1.2' or '2.0'`)}};var rD=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nX,"__esModule",{value:!0}),nX.InteropModule=void 0;let rH=rD(u()),rV=x,rz=e=>new e,rK="You have attempted to use or modify InteropBroker parameters, which is not allowed. You are likely using an older InteropBroker override scheme. Please consult our Interop docs for guidance on migrating to the new override scheme.";class rY extends rV.Base{async init(e,t=rz){let n;this.wire.sendAction("interop-init").catch(()=>{});let r=await this.wire.environment.getInteropInfo(this.wire.getFin()),i=(0,nQ.createUnusableObject)(rK),o=(0,nQ.createWarningObject)(rK,(0,rH.default)(r)),s=async()=>{throw Error(rK)},a=n0.InteropBroker.createClosedConstructor(this.wire,()=>this.fin.InterApplicationBus.Channel.create(`interop-broker-${e}`),r);return n=Array.isArray(t)?new((0,nd.overrideFromComposables)(...t)(a))(i,s,o):await t(a,i,s,o),(0,rI.overrideCheck)(n,r.fdc3Version),n}connectSync(e,t){return this.wire.sendAction("interop-connect-sync").catch(()=>{}),new ra.InteropClient(this.wire,this.wire.environment.whenReady().then(()=>this.fin.InterApplicationBus.Channel.connect(`interop-broker-${e}`,{payload:t})),rE.fdc3Factory)}}nX.InteropModule=rY,function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(nX,e),n(ra,e),n(n0,e)}(nZ);var rJ={},rq={},rZ={},rX={};Object.defineProperty(rX,"__esModule",{value:!0}),rX.getSnapshotSourceChannelName=void 0,rX.getSnapshotSourceChannelName=e=>`snapshot-source-provider-${e.uuid}`;var rQ,r0,r1,r2,r3,r5=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},r8=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(rZ,"__esModule",{value:!0}),rZ.SnapshotSource=void 0;let r6=x,r4=new Map;class r9 extends r6.Base{constructor(e,t){super(e),rQ.set(this,void 0),r0.set(this,()=>(r4.has(this.identity.uuid)||r4.set(this.identity.uuid,{eventFired:null,clientPromise:null}),r4.get(this.identity.uuid))),r1.set(this,()=>(r8(this,r0,"f").call(this).clientPromise||(r8(this,r0,"f").call(this).clientPromise=r8(this,r2,"f").call(this)),r8(this,r0,"f").call(this).clientPromise)),r2.set(this,async()=>{let e=(0,rX.getSnapshotSourceChannelName)(this.identity);try{r8(this,r0,"f").call(this).eventFired||await r8(this,r3,"f").call(this);let t=await this.fin.InterApplicationBus.Channel.connect(e,{wait:!1});return t.onDisconnection(()=>{r8(this,r0,"f").call(this).clientPromise=null,r8(this,r0,"f").call(this).eventFired=null}),t}catch(e){throw r8(this,r0,"f").call(this).clientPromise=null,Error("The targeted SnapshotSource is not currently initialized. Await this object's ready() method.")}}),r3.set(this,async()=>{let e,t,n=(0,rX.getSnapshotSourceChannelName)(this.identity),r=new Promise((n,r)=>{e=n,t=r});r8(this,r0,"f").call(this).eventFired=r;let i=async r=>{try{r.channelName===n&&(e(),await this.fin.InterApplicationBus.Channel.removeListener("connected",i))}catch(e){t(e)}};await this.fin.InterApplicationBus.Channel.on("connected",i)}),r5(this,rQ,t,"f")}get identity(){return r8(this,rQ,"f")}async ready(){this.wire.sendAction("snapshot-source-ready").catch(e=>{});try{await r8(this,r1,"f").call(this)}catch(e){await r8(this,r0,"f").call(this).eventFired}}async getSnapshot(){this.wire.sendAction("snapshot-source-get-snapshot").catch(e=>{});let e=await r8(this,r1,"f").call(this),t=await e.dispatch("get-snapshot");return(await t).snapshot}async applySnapshot(e){return this.wire.sendAction("snapshot-source-apply-snapshot").catch(e=>{}),(await r8(this,r1,"f").call(this)).dispatch("apply-snapshot",{snapshot:e})}}rZ.SnapshotSource=r9,rQ=new WeakMap,r0=new WeakMap,r1=new WeakMap,r2=new WeakMap,r3=new WeakMap,Object.defineProperty(rq,"__esModule",{value:!0}),rq.SnapshotSourceModule=void 0;let r7=x;class ie extends r7.Base{async init(e){if(this.wire.sendAction("snapshot-source-init").catch(e=>{}),"object"!=typeof e||"function"!=typeof e.getSnapshot||"function"!=typeof e.applySnapshot)throw Error("you must pass in a valid SnapshotProvider");let t=await this.fin.InterApplicationBus.Channel.create((0,rX.getSnapshotSourceChannelName)(this.fin.me));t.register("get-snapshot",async()=>({snapshot:await e.getSnapshot()})),t.register("apply-snapshot",({snapshot:t})=>e.applySnapshot(t))}wrapSync(e){return this.wire.sendAction("snapshot-source-wrap-sync").catch(e=>{}),new rZ.SnapshotSource(this.wire,e)}async wrap(e){return this.wire.sendAction("snapshot-source-wrap").catch(e=>{}),this.wrapSync(e)}}rq.SnapshotSourceModule=ie,function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(rq,e),n(rZ,e)}(rJ);var it,ir,ii,io,is={},ia={},ic={},id=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},il=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(ic,"__esModule",{value:!0}),ic.NotificationManagerInstance=void 0,ic.NotificationManagerInstance=class{constructor(e,t){it.set(this,void 0),ir.set(this,void 0),ii.set(this,void 0),io.set(this,new X.Lazy(async()=>(await il(this,it,"f").registerMessageHandler(e=>{if("notification-created"===e.action&&e.payload.managerId===il(this,ii,"f")){let{notificationId:t,properties:n,documentUrl:r,notificationIcon:i,badge:o,image:s}=e.payload;try{il(this,ir,"f")?.call(this,{properties:n,images:{image:s,icon:i,badge:o},url:r,notificationId:t})}catch(e){console.error("Failed to handle notification",e)}return!0}return!1}),!0))),this.setNotificationHandler=async e=>{await il(this,io,"f").getValue(),id(this,ir,e,"f")},this.destroy=async()=>{await il(this,it,"f").sendAction("destroy-notification-manager",{managerId:il(this,ii,"f")})},this.dispatch=async e=>{let{notificationId:t,type:n}=e;await il(this,it,"f").sendAction("dispatch-notification-event",{notificationId:t,type:n})},id(this,it,e,"f"),id(this,ii,t,"f")}},it=new WeakMap,ir=new WeakMap,ii=new WeakMap,io=new WeakMap,Object.defineProperty(ia,"__esModule",{value:!0}),ia.NotificationManagerModule=void 0;let ih=x;class iu extends ih.Base{constructor(){super(...arguments),this.init=async()=>{let{payload:{data:{managerId:e}}}=await this.wire.sendAction("init-notification-manager");return new ic.NotificationManagerInstance(this.wire,e)}}}ia.NotificationManagerModule=iu,function(e){var t=b&&b.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=b&&b.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ia,e),n(ic,e)}(is),Object.defineProperty(C,"__esModule",{value:!0});var ip=C.Fin=void 0;let iy=l(),iw=eu(),ig=er();class im extends iy.EventEmitter{constructor(e){super(),this.wire=e,this.System=new I.System(e),this.Window=new iw._WindowModule(e),this.Application=new V.ApplicationModule(e),this.InterApplicationBus=new eg.InterApplicationBus(e),this.Clipboard=new tG.Clipboard(e),this.ExternalApplication=new tH.ExternalApplicationModule(e),this.Frame=new tZ._FrameModule(e),this.GlobalHotkey=new t5.GlobalHotkey(e),this.Platform=new t7.PlatformModule(e,this.InterApplicationBus.Channel),this.View=new ig.ViewModule(e),this.Interop=new nZ.InteropModule(e),this.SnapshotSource=new rJ.SnapshotSourceModule(e),this.NotificationManager=new is.NotificationManagerModule(e),e.registerFin(this),this.me=(0,nq.getMe)(e),e.on("disconnected",()=>{this.emit("disconnected")})}}ip=C.Fin=im;var iv={},ib={};function iC(e){return"string"==typeof e.manifestUrl}function iI(e){return iE(e)&&"string"==typeof e.address}function ix(e){return iI(e)&&"string"==typeof e.token}function iE(e){return"string"==typeof e.uuid}function iA(e){return e.runtime&&"string"==typeof e.runtime.version}function i_(e){return iE(e)&&iA(e)}Object.defineProperty(ib,"__esModule",{value:!0}),ib.isInternalConnectConfig=ib.isPortDiscoveryConfig=ib.isNewConnectConfig=ib.isConfigWithReceiver=ib.isRemoteConfig=ib.isExistingConnectConfig=ib.isExternalConfig=void 0,ib.isExternalConfig=iC,ib.isExistingConnectConfig=iI,ib.isRemoteConfig=ix,ib.isConfigWithReceiver=function(e){return"object"==typeof e.receiver&&ix({...e,address:""})},ib.isNewConnectConfig=i_,ib.isPortDiscoveryConfig=function(e){return iC(e)&&iA(e)||i_(e)},ib.isInternalConnectConfig=function(e){return iI(e)||i_(e)};var iP={},iO={};Object.defineProperty(iO,"__esModule",{value:!0}),iO.EmitterMap=void 0;let iM=l();function ij(e){return w.from(e).toString("base64")}iO.EmitterMap=class{constructor(){this.storage=new Map}hashKeys(e){return e.map(ij).join("/")}getOrCreate(e){let t=this.hashKeys(e);return this.storage.has(t)||this.storage.set(t,new iM.EventEmitter),this.storage.get(t)}has(e){return this.storage.has(this.hashKeys(e))}delete(e){let t=this.hashKeys(e);return this.storage.delete(t)}},Object.defineProperty(iP,"__esModule",{value:!0});let iS=iO;class iR extends iS.EmitterMap{constructor(){super(...arguments),this.dispatchEvent=e=>{if("process-desktop-event"===e.action){let{payload:t}=e,n=function(e){let{topic:t}=e;if("frame"===t||"window"===t||"view"===t){let{uuid:n,name:r}=e;return[t,n,r]}if("application"===t){let{uuid:n}=e;return[t,n]}return[t]}(t);if(this.has(n))return this.getOrCreate(n).emit(t.type,t),!0}return!1}}}iP.default=iR;var iL,iT,iB=b&&b.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},iF=b&&b.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ik=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iv,"__esModule",{value:!0});var i$=iv.Transport=void 0;let iU=l(),iN=ik(iP);class iG extends iU.EventEmitter{constructor(e,t,n){super(),this.wireListeners=new Map,this.topicRefMap=new Map,this.eventAggregator=new iN.default,this.messageHandlers=[this.eventAggregator.dispatchEvent],iL.set(this,void 0),iT.set(this,void 0),this.connectSync=()=>{iF(this,iL,"f").connectSync()},this.getPort=()=>iF(this,iL,"f").getPort(),iB(this,iL,e(this.onmessage.bind(this)),"f"),this.environment=t,this.sendRaw=iF(this,iL,"f").send.bind(iF(this,iL,"f")),this.registerMessageHandler(this.handleMessage.bind(this)),iF(this,iL,"f").on("disconnected",()=>{for(let[,{handleNack:e}]of this.wireListeners)e({reason:"Remote connection has closed"});this.wireListeners.clear(),this.emit("disconnected")});let{uuid:r,name:i}=n,o=this.environment.getCurrentEntityType();this.me=(0,nq.getBaseMe)(o,r,i)}getFin(){if(!iF(this,iT,"f"))throw Error("No Fin object registered for this transport");return iF(this,iT,"f")}registerFin(e){if(iF(this,iT,"f"))throw Error("Fin object has already been registered for this transport");iB(this,iT,e,"f")}shutdown(){return iF(this,iL,"f").shutdown()}async connect(e){if((0,ib.isConfigWithReceiver)(e))return await iF(this,iL,"f").connect(e.receiver),this.authorize(e);if((0,ib.isRemoteConfig)(e))return this.connectRemote(e);if((0,ib.isExistingConnectConfig)(e))return this.connectByPort(e);if((0,ib.isNewConnectConfig)(e)){let t=await this.environment.retrievePort(e);return this.connectByPort({...e,address:`ws://localhost:${t}`})}}async connectRemote(e){return await iF(this,iL,"f").connect(new(this.environment.getWsConstructor())(e.address)),this.authorize(e)}async connectByPort(e){let{address:t,uuid:n}=e,r={...e,type:"file-token"},i=iF(this,iL,"f");await i.connect(new(this.environment.getWsConstructor())(e.address));let o=await this.sendAction("request-external-authorization",{uuid:n,type:"file-token"},!0);if("external-authorization-response"!==o.action)throw new S.UnexpectedActionError(o.action);return await this.environment.writeToken(o.payload.file,o.payload.token),this.authorize(r)}async authorize(e){let t=await this.sendAction("request-authorization",e,!0);if("authorization-response"!==t.action)throw new S.UnexpectedActionError(t.action);if(!0!==t.payload.success)throw new S.RuntimeError(t.payload)}sendAction(e,t={},n=!1){let r=()=>{},i=S.RuntimeError.getCallSite(1),o=this.environment.getNextMessageId();return Object.assign(new Promise((s,a)=>{r=a;let c=iF(this,iL,"f");return this.addWireListener(o,s,e=>this.nackHandler(e,a,i),n),c.send({action:e,payload:t,messageId:o}).catch(a)}),{cancel:r,messageId:o})}nackHandler(e,t,n){t("string"==typeof e?e:new S.RuntimeError(e,n))}ferryAction(e){return new Promise((t,n)=>{let r=this.environment.getNextMessageId();e.messageId=r;let i=e=>{t(e.payload)};return iF(this,iL,"f").send(e).then(()=>this.addWireListener(r,i,e=>this.nackHandler(e,n),!1)).catch(n)})}registerMessageHandler(e){this.messageHandlers.push(e)}addWireListener(e,t,n,r){r?this.uncorrelatedListener=t:this.wireListeners.has(e)?n({reason:"Duplicate handler id",error:(0,eq.errorToPOJO)(new S.DuplicateCorrelationError(String(e)))}):this.wireListeners.set(e,{resolve:t,handleNack:n})}onmessage(e){for(let t of this.messageHandlers)t.call(null,e)}handleMessage(e){let t=e.correlationId||NaN;if("correlationId"in e){if(!this.wireListeners.has(t))return!1;{let{resolve:n,handleNack:r}=this.wireListeners.get(t);"ack"!==e.action?r({reason:"Did not receive ack action",error:(0,eq.errorToPOJO)(new S.NoAckError(e.action))}):"payload"in e?e.payload.success?n.call(null,e):r(e.payload):"string"==typeof e.reason?r(e):(console.warn("Received invalid response from core",e),r({reason:"invalid response shape",error:(0,eq.errorToPOJO)(Error("Invalid response shape"))})),this.wireListeners.delete(t)}}else this.uncorrelatedListener&&this.uncorrelatedListener.call(null,e),this.uncorrelatedListener=()=>{};return!0}}i$=iv.Transport=iG,iL=new WeakMap,iT=new WeakMap;let iW=new Map([["debug",0],["info",1],["warn",2],["error",3],["none",4]]);class iD{static setGlobalLogLevel(e){iD.LOG_LEVEL=e??"error"}constructor(...e){this.scopes=e}log(e,...t){let n=iW.get(e)??3;(iW.get(iD.LOG_LEVEL)??3)<=n&&console.log(`[${(new Date).toISOString()}]`,...this.scopes.map(e=>`[${e}]`),...t)}warn(...e){this.log("warn",...e)}error(...e){this.log("error",...e)}info(...e){this.log("info",...e)}debug(...e){this.log("debug",...e)}static getLogger(...e){return new iD(...e)}getLogger(...e){return new iD(...this.scopes,...e)}}iD.LOG_LEVEL="error";let iH=iD.getLogger("@openfin/core-web/client"),iV=iH.getLogger("data-channel"),iz=e=>`data-channel-${e.me.uuid}`,iK=async(e,t)=>{let n=async n=>e.dispatch("page-title-updated",{data:{identity:t,title:n}}).catch(e=>{iV.warn("Failed to dispatch title change",e)});document.title&&await n(document.title),v(document.head,n)};function iY(e,t){if("string"!=typeof e)throw Error(`Property ${t} has invalid type. Expected string, got ${typeof e}.`)}let iJ=iH.getLogger("get-web-interop-ports");function iq(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function iZ(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}"function"==typeof SuppressedError&&SuppressedError;class iX extends d.EventEmitter{constructor(e,t){super(),r.set(this,void 0),i.set(this,void 0),o.set(this,!1),this.connectSync=()=>{iq(this,o,"f")||(iq(this,i,"f").addEventListener("message",e=>{e.data?.topic?.startsWith("wire-message")&&e.data.message&&iq(this,r,"f").call(this,{...JSON.parse(e.data.message),ports:e.ports})}),iq(this,i,"f").start())},this.connect=async()=>{this.connectSync()},this.send=e=>(iq(this,i,"f").postMessage({topic:"wire-message",message:JSON.stringify(e)}),Promise.resolve()),this.shutdown=async()=>{iq(this,i,"f").close()},iZ(this,r,e,"f"),iZ(this,i,t,"f")}getPort(){return iq(this,i,"f")}}r=new WeakMap,i=new WeakMap,o=new WeakMap;var iQ={},i0={};Object.defineProperty(i0,"__esModule",{value:!0}),i0.BaseEnvironment=void 0,i0.BaseEnvironment=class{async getViewWindowIdentity(e,t){let{identity:n}=await e.View.wrapSync(t).getCurrentWindow();return n}async getInteropInfo(e){let t=await e.Application.getCurrentSync().getInfo().catch(()=>null),n=t?.initialOptions?.interopBrokerConfiguration??{};return{fdc3Version:t?(0,rI.getDefaultViewFdc3VersionFromAppInfo)(t):void 0,...n,fdc3Info:{providerVersion:await e.System.getVersion(),provider:"OpenFin"}}}},Object.defineProperty(iQ,"__esModule",{value:!0});var i1=iQ.BrowserEnvironment=void 0;let i2=i0;class i3 extends i2.BaseEnvironment{constructor(){super(...arguments),this.type="other",this.getRandomId=()=>{let e=new Uint32Array(1);return window.crypto.getRandomValues(e)[0].toString(32)}}getAdapterVersionSync(){return""}observeBounds(e,t){throw Error("Method not implemented.")}layoutAllowedInContext(e){return!1}initLayoutManager(e,t,n){throw Error("Method not implemented.")}applyLayoutSnapshot(e,t,n){throw Error("Method not implemented.")}createLayout(e,t){throw Error("Method not implemented.")}destroyLayout(e,t){throw Error("Method not implemented.")}resolveLayout(e,t){throw Error("Method not implemented.")}initPlatform(...e){throw Error("Method not implemented.")}writeToken(e,t){return Promise.resolve("")}retrievePort(e){throw Error("Method not implemented.")}getNextMessageId(){return this.getRandomId()}createChildContent(e){throw Error("Method not implemented.")}getWebWindow(e){throw Error("Method not implemented.")}getCurrentEntityIdentity(){throw Error("Method not implemented.")}getCurrentEntityType(){return"external connection"}raiseEvent(e,t){throw Error("Method not implemented.")}getUrl(){return location.href}getDefaultChannelOptions(){return{create:{},connect:{}}}getRtcPeer(){return new RTCPeerConnection}getWsConstructor(){return WebSocket}whenReady(){return Promise.resolve()}}i1=iQ.BrowserEnvironment=i3;let i5=e=>"platform"in e&&void 0!==e.platform;class i8 extends i1{constructor(e){super(),this.connectConfig=e,s.set(this,void 0),a.set(this,new Q(async()=>n.e(133).then(n.bind(n,8035)))),i5(e)&&this.validatePlatformOptions(e)}getAdapterVersionSync(){return"0.42.95"}validatePlatformOptions({platform:e}){if(!("layoutSnapshot"in e))throw Error("Platform options are missing layoutSnapshot. Please provide a layoutSnapshot in the platform options.");if("windows"in e||"windows"in e.layoutSnapshot)throw Error("It appears you tried to call connect() with a snapshot object from an OpenFin desktop environment. Note that connect() expects to be called with a platform property with this structure: { platform: { layoutSnapshot } }. To get a layoutSnapshot of the expected structure, use fin.Platform.Layout.getCurrentLayoutManagerSync().getLayoutSnapshot() in v34+ in your desktop environment.");let{layouts:t}=e.layoutSnapshot;Object.entries(t).map(([e,t])=>{if("object"!=typeof t||null===t)throw Error(`Invalid layout detected: layoutSnapshot.layouts.${e} must be an object.`);if(!("content"in t))throw Error(`Invalid layout detected: layoutSnapshot.layouts.${e} must contain a 'content' property.`)})}async getInteropInfo(e){return{contextGroups:void 0,logging:{beforeAction:{enabled:!1},afterAction:{enabled:!1}},fdc3Version:void 0,fdc3Info:{providerVersion:"0.42.95",provider:"OpenFin Web"}}}layoutAllowedInContext(e){return!0}async initLayoutManager(e,t,n){if(iq(this,s,"f"))throw Error("Layout already initialized.");if(!i5(this.connectConfig))throw Error("Platform options are missing from connection config.");let{WebLayoutEntryPoint:r}=await iq(this,a,"f").getValue();return iZ(this,s,new r(this.connectConfig),"f"),await iq(this,s,"f").initLayoutManager(e,t,n)}async applyLayoutSnapshot(e,t,n){iq(this,s,"f")?.applyLayoutSnapshot(e,t,n)}async createLayout(e,t){return iq(this,s,"f")?.createLayout(e,t)}async destroyLayout(e,t){return iq(this,s,"f")?.destroyLayout(e,t)}async getViewWindowIdentity(e,t){return Promise.resolve({uuid:t.uuid,name:t.uuid})}}s=new WeakMap,a=new WeakMap;let i6=()=>{let e=((e,t)=>{let n=RegExp(`^${t}<(?<meta>.*)>$`).exec(e)?.groups?.meta;if(n)try{return JSON.parse(atob(n))}catch(e){throw Error(`Failed to decode JSON from ${n}.`)}})(window.name,"of-frame");if(e)try{let{name:t,uuid:n,brokerUrl:r,providerId:i,contextGroup:o}=e;return iY(r,"brokerUrl"),iY(n,"uuid"),iY(t,"name"),{identity:{name:t,uuid:n},brokerUrl:r,interopConfig:{providerId:i,currentContextGroup:o},isOfView:!0}}catch(e){throw Error(`Unexpected error occurred when inferring platform information: ${e.stack}`)}},i4=()=>{let e=(0,y.A)();return{uuid:e,name:e}},i9=async e=>{if("enabled"===e.connectionInheritance){let t=await (async e=>{let t=i6();if(t){let{validateOptions:n=()=>!0}=e,{identity:r,...i}=t;if(!await n(i))throw Error("Parent options were rejected by validateOptions.");return t}})(e);if(t)return t}if(!e.options)throw Error("enabled"===e.connectionInheritance?"Broker URL was not specified nor provided by a platform container.":"Connection inheritance is disabled but no options were provided.");return{...e.options,identity:i4(),isOfView:!1}},i7=async e=>{try{iD.setGlobalLogLevel(e.logLevel),iH.info("Establishing connection",e);let{brokerUrl:t,identity:n,timeout:r,interopConfig:i,isOfView:o}=await i9(e),{workerPort:s,iframeBrokerPort:a}=await (async(e,t,n)=>{let r,{origin:i}=new URL(e),o=document.createElement("IFRAME");o.style.display="none";try{return await new Promise((s,a)=>{let c=e=>{if(e.source===o.contentWindow&&e.data?.topic==="ack-web-broker-ports-ready"){if(e.origin!==i)a(Error(`Broker redirected to unexpected origin ${e.origin}, expected ${i}.`));else if(e.data.success){let[t,n]=e.ports;s({iframeBrokerPort:t,workerPort:n})}else a(new R(e.data));window.removeEventListener("message",c),clearTimeout(r)}};window.addEventListener("message",c),iJ.info(`Connecting to broker ${e}`),o.setAttribute("src",e),o.setAttribute("name",g(t,"of-broker")),document.body.appendChild(o),iJ.info("Iframe loaded, awaiting init message from iframe"),n&&(r=setTimeout(()=>{window.removeEventListener("message",c),document.body.removeChild(o),a(Error("Worker did not initialize in time"))},n))})}catch(e){throw Error(`Failed to initialise Fin Web Client. ${e.message}`,{cause:e})}})(t,n,r);iH.info("Successfully established connection to shared worker");let d={entityType:"external connection",...n};s.start(),a.start();let l=((e,t,n)=>{let r=new i8(e),i=new i$(e=>new iX(e,t),r,n);return i.connectSync(),window.Buffer=c.Buffer,new ip(i)})(e,s,d);return o&&window.top&&!m(window,window.top)&&(e=>{let t={uuid:e.me.uuid,name:e.me.name};iV.debug("Data channel connecting..."),e.InterApplicationBus.Channel.connect(iz(e)).then(async e=>{iV.debug("Data channel connected"),await iK(e,t)}).catch(e=>{iV.warn("Failed to connect to data channel, some features may not work like title updates",e)})})(l),i?.providerId&&(l.me.interop=l.Interop.connectSync(i.providerId),i?.currentContextGroup&&l.me.interop.joinContextGroup(i.currentContextGroup).catch(e=>{iH.warn(`Error joining specified context group: ${i?.currentContextGroup}, continuing`,e)})),{...l,me:{...l.me,identity:{uuid:l.me.uuid,name:l.me.name}}}}catch(e){throw Error(`An error occured during web-interop connection: ${e.message}`)}}},1180:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1211:(e,t,n)=>{var r=n(2183),i=n(3191),o=n(3319);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},1253:(e,t,n)=>{var r=n(2183),i=n(766),o=n(522),s=n(735),a=n(3843),c=n(1211);function d(e){var t=this.__data__=new r(e);this.size=t.size}d.prototype.clear=i,d.prototype.delete=o,d.prototype.get=s,d.prototype.has=a,d.prototype.set=c,e.exports=d},1282:(e,t,n)=>{var r=n(2113),i=n(5546);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},1326:(e,t,n)=>{e.exports=n(6299).Uint8Array},1356:(e,t,n)=>{var r=n(7437);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},1389:()=>{},1444:(e,t,n)=>{e.exports=n(1282)(Object,"create")},1501:e=>{e.exports=function(e){return function(t){return e(t)}}},1559:(e,t,n)=>{e.exports=n(6299).Symbol},1678:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},1709:(e,t,n)=>{var r=n(3319),i=n(4936),o=n(4555);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,e.exports=s},1772:(e,t,n)=>{var r=n(8975),i=n(1501),o=n(8311),s=o&&o.isMap;e.exports=s?i(s):r},1935:(e,t,n)=>{var r=n(2410),i=n(1018),o=n(6498),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},2029:(e,t,n)=>{var r=n(9703);e.exports=function(e){return r(this.__data__,e)>-1}},2062:(e,t,n)=>{var r=n(4051),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},2113:(e,t,n)=>{var r=n(7494),i=n(2062),o=n(3725),s=n(2727),a=/^\[object .+?Constructor\]$/,c=Object.prototype,d=Function.prototype.toString,l=c.hasOwnProperty,h=RegExp("^"+d.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:a).test(s(e))}},2149:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r,i=new Uint8Array(16);let o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=[],a=0;a<256;++a)s.push((a+256).toString(16).substr(1));let c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!("string"==typeof n&&o.test(n)))throw TypeError("Stringified UUID is invalid");return n},d=function(e,t,n){var o=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=o[s];return t}return c(o)}},2183:(e,t,n)=>{var r=n(9180),i=n(4252),o=n(5065),s=n(2029),a=n(973);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},2265:(e,t,n)=>{var r=n(3935),i=n(2785),o=n(3101),s=n(6840),a=n(7049);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Symbol]":return s(e)}}},2410:(e,t,n)=>{var r=n(1559),i=n(9011),o=n(4464),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},2504:(e,t,n)=>{e.exports=n(1282)(n(6299),"Promise")},2575:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},2577:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},2725:(e,t,n)=>{var r=n(7268),i=n(3283);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},2727:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2785:(e,t,n)=>{var r=n(3935);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},2797:(e,t,n)=>{var r=n(3445);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=+(n.size!=i),this}},2927:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},2959:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},3017:(e,t,n)=>{e.exports=n(1282)(n(6299),"Set")},3101:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},3152:(e,t,n)=>{e=n.nmd(e);var r=n(6299),i=n(7677),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,c=a?a.isBuffer:void 0;e.exports=c||i},3191:(e,t,n)=>{e.exports=n(1282)(n(6299),"Map")},3229:(e,t,n)=>{var r=n(1444);e.exports=function(e,t){var n=this.__data__;return this.size+=+!this.has(e),n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},3283:e=>{e.exports=Array.isArray},3319:(e,t,n)=>{var r=n(5980),i=n(5276),o=n(8665),s=n(9149),a=n(2797);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},3445:(e,t,n)=>{var r=n(306);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},3464:(e,t,n)=>{var r=n(1559),i=n(1326),o=n(6888),s=n(5987),a=n(7123),c=n(9261),d=r?r.prototype:void 0,l=d?d.valueOf:void 0;e.exports=function(e,t,n,r,d,h,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!h(new i(e),new i(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a;case"[object Set]":var f=1&r;if(p||(p=c),e.size!=t.size&&!f)break;var y=u.get(e);if(y)return y==t;r|=2,u.set(e,t);var w=s(p(e),p(t),r,d,h,u);return u.delete(e),w;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},3483:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(n,r){var i,o,s;function a(n){e.removeListener(t,c),r(n)}function c(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}y(e,t,c,{once:!0}),"error"!==t&&(i=e,o=a,s={once:!0},"function"==typeof i.on&&y(i,"error",o,s))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var i,o,s,d=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=s.length,console&&console.warn&&console.warn(d)}return e}function l(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function u(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,a=Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else for(var d=c.length,l=f(c,d),n=0;n<d;++n)r(l[n],this,t);return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(a(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return u(this,e,!0)},o.prototype.rawListeners=function(e){return u(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},3541:(e,t,n)=>{var r=n(331);e.exports=function(e){return r(e,5)}},3725:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3739:(e,t)=>{t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,d=c>>1,l=-7,h=n?i-1:0,u=n?-1:1,p=e[t+h];for(h+=u,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=u,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+h],h+=u,l-=8);if(0===o)o=1-d;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=d}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,d=8*o-i-1,l=(1<<d)-1,h=l>>1,u=5960464477539062e-23*(23===i),p=r?0:o-1,f=r?1:-1,y=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+h>=1?t+=u/c:t+=u*Math.pow(2,1-h),t*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=f,a/=256,i-=8);for(s=s<<i|a,d+=i;d>0;e[n+p]=255&s,p+=f,s/=256,d-=8);e[n+p-f]|=128*y}},3843:e=>{e.exports=function(e){return this.__data__.has(e)}},3935:(e,t,n)=>{var r=n(1326);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},4041:(e,t,n)=>{var r=n(3725),i=n(2927),o=n(2575),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var a in e)"constructor"==a&&(t||!s.call(e,a))||n.push(a);return n}},4051:(e,t,n)=>{e.exports=n(6299)["__core-js_shared__"]},4252:(e,t,n)=>{var r=n(9703),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},4299:(e,t,n)=>{var r=n(1180),i=n(4642),o=n(3283),s=n(3152),a=n(305),c=n(8399),d=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),h=!n&&!l&&s(e),u=!n&&!l&&!h&&c(e),p=n||l||h||u,f=p?r(e.length,String):[],y=f.length;for(var w in e)(t||d.call(e,w))&&!(p&&("length"==w||h&&("offset"==w||"parent"==w)||u&&("buffer"==w||"byteLength"==w||"byteOffset"==w)||a(w,y)))&&f.push(w);return f}},4464:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4555:e=>{e.exports=function(e){return this.__data__.has(e)}},4642:(e,t,n)=>{var r=n(9394),i=n(6498),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable;e.exports=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")}},4729:e=>{e.exports=function(e,t){return e.has(t)}},4801:(e,t,n)=>{"use strict";let r=n(7446),i=n(3739),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return l(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e){var r=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);let n=0|f(r,i),o=s(n),c=o.write(r,i);return c!==n&&(o=o.slice(0,c)),o}if(ArrayBuffer.isView(e)){var o=e;if(k(o,Uint8Array)){let e=new Uint8Array(o);return u(e.buffer,e.byteOffset,e.byteLength)}return h(o)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(k(e,ArrayBuffer)||e&&k(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(k(e,SharedArrayBuffer)||e&&k(e.buffer,SharedArrayBuffer)))return u(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return a.from(c,t,n);let d=function(e){if(a.isBuffer(e)){let t=0|p(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?s(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(d)return d;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return d(e),s(e<0?0:0|p(e))}function h(e){let t=e.length<0?0:0|p(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function u(e,t,n){let r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),a.prototype),r}function p(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||k(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(i)return r?-1:T(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=$[e[r]];return i}(this,t,n);case"utf8":case"utf-8":return v(this,t,n);case"ascii":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":var o,s,a;return o=this,s=t,a=n,0===s&&a===o.length?r.fromByteArray(o):r.fromByteArray(o.slice(s,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){let r=e.slice(t,n),i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}(this,t,n);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function w(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){var o;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(o=n*=1)!=o&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length)if(i)return -1;else n=e.length-1;else if(n<0)if(!i)return -1;else n=0;if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,n);else return Uint8Array.prototype.lastIndexOf.call(e,t,n);return m(e,[t],n,r,i)}throw TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){let o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;s=2,a/=2,c/=2,n/=2}function d(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let r=-1;for(o=n;o<a;o++)if(d(e,o)===d(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*s}else -1!==r&&(o-=o-r),r=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(d(e,o+r)!==d(t,r)){n=!1;break}if(n)return o}return -1}function v(e,t,n){n=Math.min(e.length,n);let r=[],i=t;for(;i<n;){let t=e[i],o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=n){let n,r,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:(192&(n=e[i+1]))==128&&(c=(31&t)<<6|63&n)>127&&(o=c);break;case 3:n=e[i+1],r=e[i+2],(192&n)==128&&(192&r)==128&&(c=(15&t)<<12|(63&n)<<6|63&r)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:n=e[i+1],r=e[i+2],a=e[i+3],(192&n)==128&&(192&r)==128&&(192&a)==128&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}var o=r;let s=o.length;if(s<=4096)return String.fromCharCode.apply(String,o);let a="",c=0;for(;c<s;)a+=String.fromCharCode.apply(String,o.slice(c,c+=4096));return a}function b(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function C(e,t,n,r,i,o){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function I(e,t,n,r,i){j(t,r,i,e,n,7);let o=Number(t&BigInt(0xffffffff));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function x(e,t,n,r,i){j(t,r,i,e,n,7);let o=Number(t&BigInt(0xffffffff));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function E(e,t,n,r,i,o){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function A(e,t,n,r,o){return t*=1,n>>>=0,o||E(e,t,n,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,n,r,23,4),n+4}function _(e,t,n,r,o){return t*=1,n>>>=0,o||E(e,t,n,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,n,r,52,8),n+8}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return(d(e),e<=0)?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)},a.allocUnsafe=function(e){return l(e)},a.allocUnsafeSlow=function(e){return l(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(k(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),k(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:+(r<n)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){let n;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;let r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let t=e[n];if(k(t,Uint8Array))i+t.length>r.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else if(a.isBuffer(t))t.copy(r,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return r},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)w(this,t,t+1);return this},a.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},a.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},a.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):y.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,i){if(k(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;let o=i-r,s=n-t,c=Math.min(o,s),d=this.slice(r,i),l=e.slice(t,n);for(let e=0;e<c;++e)if(d[e]!==l[e]){o=d[e],s=l[e];break}return o<s?-1:+(s<o)},a.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){var i,o,s,a,c,d,l,h;if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let u=this.length-t;if((void 0===n||n>u)&&(n=u),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let p=!1;for(;;)switch(r){case"hex":return function(e,t,n,r){let i;n=Number(n)||0;let o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;let s=t.length;for(r>s/2&&(r=s/2),i=0;i<r;++i){var a;let r=parseInt(t.substr(2*i,2),16);if((a=r)!=a)break;e[n+i]=r}return i}(this,e,t,n);case"utf8":case"utf-8":return i=t,o=n,F(T(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return s=t,a=n,F(function(e){let t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),this,s,a);case"base64":return c=t,d=n,F(B(e),this,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,h=n,F(function(e,t){let n,r,i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,this.length-l),this,l,h);default:if(p)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){let n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=U(function(e){S(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&R(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*n;return BigInt(r)+(BigInt(i)<<BigInt(32))}),a.prototype.readBigUInt64BE=U(function(e){S(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&R(e,this.length-8);let r=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?0xffff0000|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?0xffff0000|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=U(function(e){S(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&R(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),a.prototype.readBigInt64BE=U(function(e){S(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&R(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+n)}),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;C(this,e,t,n,r,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;C(this,e,t,n,r,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=U(function(e,t=0){return I(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=U(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(e,t,n,r){if(e*=1,t>>>=0,!r){let r=Math.pow(2,8*n-1);C(this,e,t,n,r-1,-r)}let i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e*=1,t>>>=0,!r){let r=Math.pow(2,8*n-1);C(this,e,t,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e*=1,t>>>=0,n||C(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=U(function(e,t=0){return I(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=U(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return _(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return _(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},a.prototype.fill=function(e,t,n,r){let i;if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{let o=a.isBuffer(e)?e:a.from(e,r),s=o.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};let P={};function O(e,t,n){P[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function M(e){let t="",n=e.length,r=+("-"===e[0]);for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function j(e,t,n,r,i,o){if(e>n||e<t){let r,i="bigint"==typeof t?"n":"";throw r=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new P.ERR_OUT_OF_RANGE("value",r,e)}S(i,"offset"),(void 0===r[i]||void 0===r[i+o])&&R(i,r.length-(o+1))}function S(e,t){if("number"!=typeof e)throw new P.ERR_INVALID_ARG_TYPE(t,"number",e)}function R(e,t,n){if(Math.floor(e)!==e)throw S(e,n),new P.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(n||"offset",`>= ${+!!n} and <= ${t}`,e)}O("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),O("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),O("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>0x100000000?i=M(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=M(i)),i+="n"),r+=` It must be ${t}. Received ${i}`},RangeError);let L=/[^+/0-9A-Za-z-_]/g;function T(e,t){let n;t=t||1/0;let r=e.length,i=null,o=[];for(let s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319||s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function B(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length)&&!(i>=e.length);++i)t[i+n]=e[i];return i}function k(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let $=function(){let e="0123456789abcdef",t=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function U(e){return"undefined"==typeof BigInt?N:e}function N(){throw Error("BigInt not supported")}},4936:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},4987:(e,t,n)=>{"use strict";n.d(t,{Ce:()=>c,b$:()=>d});var r=n(72),i=n(4),o=n(1101);n(4801),n(3483),n(3541),n(7846);let s=()=>{let[e,t]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e={connectionInheritance:"enabled",options:{brokerUrl:"".concat(location.origin,"/web-broker"),timeout:3e5}};"object"==typeof window.fin?t(window.fin):(async()=>{try{let n=await (0,o.k)(e);t(n),console.log("fin object set")}catch(e){console.error(e)}})()},[]),e},a=(0,i.createContext)(null),c=e=>{let{children:t}=e,n=s();return(0,r.jsx)(a.Provider,{value:n,children:t})},d=()=>(0,i.useContext)(a)},5065:(e,t,n)=>{var r=n(9703);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},5099:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},5146:(e,t,n)=>{e=n.nmd(e);var r=n(6299),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}},5250:(e,t,n)=>{var r=n(1678),i=n(6495),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;e.exports=s?function(e){return null==e?[]:r(s(e=Object(e)),function(t){return o.call(e,t)})}:i},5276:(e,t,n)=>{var r=n(3445);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=!!t,t}},5376:(e,t,n)=>{var r=n(6425),i=n(5729);e.exports=function(e,t){return r(e,i(e),t)}},5511:(e,t,n)=>{var r=n(2725),i=n(5729),o=n(5897);e.exports=function(e){return r(e,o,i)}},5546:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},5729:(e,t,n)=>{var r=n(7268),i=n(769),o=n(5250),s=n(6495);e.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:s},5876:(e,t,n)=>{var r=n(2725),i=n(5250),o=n(8010);e.exports=function(e){return r(e,o,i)}},5897:(e,t,n)=>{var r=n(4299),i=n(4041),o=n(7492);e.exports=function(e){return o(e)?r(e,!0):i(e)}},5957:(e,t,n)=>{var r=n(9930),i=n(769),o=n(2927);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},5980:(e,t,n)=>{var r=n(7047),i=n(2183),o=n(3191);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},5987:(e,t,n)=>{var r=n(1709),i=n(7020),o=n(4729);e.exports=function(e,t,n,s,a,c){var d=1&n,l=e.length,h=t.length;if(l!=h&&!(d&&h>l))return!1;var u=c.get(e),p=c.get(t);if(u&&p)return u==t&&p==e;var f=-1,y=!0,w=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++f<l;){var g=e[f],m=t[f];if(s)var v=d?s(m,g,f,t,e,c):s(g,m,f,e,t,c);if(void 0!==v){if(v)continue;y=!1;break}if(w){if(!i(t,function(e,t){if(!o(w,t)&&(g===e||a(g,e,n,s,c)))return w.push(t)})){y=!1;break}}else if(!(g===m||a(g,m,n,s,c))){y=!1;break}}return c.delete(e),c.delete(t),y}},6186:(e,t,n)=>{var r=n(2927),i=n(396),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},6299:(e,t,n)=>{var r=n(8734),i="object"==typeof self&&self&&self.Object===Object&&self;e.exports=r||i||Function("return this")()},6383:(e,t,n)=>{var r=n(6425),i=n(5250);e.exports=function(e,t){return r(e,i(e),t)}},6425:(e,t,n)=>{var r=n(875),i=n(1356);e.exports=function(e,t,n,o){var s=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var d=t[a],l=o?o(n[d],e[d],d,n,e):void 0;void 0===l&&(l=e[d]),s?i(n,d,l):r(n,d,l)}return n}},6478:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(72);n(1389);var i=n(4987);function o(e){let{Component:t,pageProps:n}=e;return(0,r.jsx)(i.Ce,{children:(0,r.jsx)(t,{...n})})}},6495:e=>{e.exports=function(){return[]}},6498:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},6768:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(6478)}])},6840:(e,t,n)=>{var r=n(1559),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},6888:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},7020:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},7047:(e,t,n)=>{var r=n(7532),i=n(108),o=n(9273),s=n(7869),a=n(3229);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},7049:(e,t,n)=>{var r=n(3935);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},7078:(e,t,n)=>{e.exports=n(1282)(n(6299),"DataView")},7123:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},7268:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},7437:(e,t,n)=>{var r=n(1282);e.exports=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},7446:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return(n+r)*3/4-r},t.toByteArray=function(e){var t,n,o=c(e),s=o[0],a=o[1],d=new i((s+a)*3/4-a),l=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],d[l++]=t>>16&255,d[l++]=t>>8&255,d[l++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,d[l++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,d[l++]=t>>8&255,d[l++]=255&t),d},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(function(e,t,r){for(var i,o=[],s=t;s<r;s+=3)i=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[i>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===i?o.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&o.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}r[45]=62,r[95]=63},7492:(e,t,n)=>{var r=n(7494),i=n(1018);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},7494:(e,t,n)=>{var r=n(2410),i=n(3725);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},7532:(e,t,n)=>{var r=n(1444);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},7654:(e,t,n)=>{var r=n(1036),i=n(6498);e.exports=function e(t,n,o,s,a){return t===n||(null!=t&&null!=n&&(i(t)||i(n))?r(t,n,o,s,e,a):t!=t&&n!=n)}},7677:e=>{e.exports=function(){return!1}},7846:(e,t,n)=>{var r=n(7654);e.exports=function(e,t){return r(e,t)}},7869:(e,t,n)=>{var r=n(1444),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},8010:(e,t,n)=>{var r=n(4299),i=n(6186),o=n(7492);e.exports=function(e){return o(e)?r(e):i(e)}},8311:(e,t,n)=>{e=n.nmd(e);var r=n(8734),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;if(e)return e;return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},8320:(e,t,n)=>{var r=n(6425),i=n(5897);e.exports=function(e,t){return e&&r(t,i(t),e)}},8399:(e,t,n)=>{var r=n(1935),i=n(1501),o=n(8311),s=o&&o.isTypedArray;e.exports=s?i(s):r},8665:(e,t,n)=>{var r=n(3445);e.exports=function(e){return r(this,e).get(e)}},8680:(e,t,n)=>{e.exports=n(1282)(n(6299),"WeakMap")},8734:(e,t,n)=>{e.exports="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g},8975:(e,t,n)=>{var r=n(9139),i=n(6498);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},9011:(e,t,n)=>{var r=n(1559),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},9139:(e,t,n)=>{var r=n(7078),i=n(3191),o=n(2504),s=n(3017),a=n(8680),c=n(2410),d=n(2727),l="[object Map]",h="[object Promise]",u="[object Set]",p="[object WeakMap]",f="[object DataView]",y=d(r),w=d(i),g=d(o),m=d(s),v=d(a),b=c;(r&&b(new r(new ArrayBuffer(1)))!=f||i&&b(new i)!=l||o&&b(o.resolve())!=h||s&&b(new s)!=u||a&&b(new a)!=p)&&(b=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?d(n):"";if(r)switch(r){case y:return f;case w:return l;case g:return h;case m:return u;case v:return p}return t}),e.exports=b},9149:(e,t,n)=>{var r=n(3445);e.exports=function(e){return r(this,e).has(e)}},9180:e=>{e.exports=function(){this.__data__=[],this.size=0}},9261:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},9273:(e,t,n)=>{var r=n(1444),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},9394:(e,t,n)=>{var r=n(2410),i=n(6498);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},9411:(e,t,n)=>{var r=n(5876),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,s,a){var c=1&n,d=r(e),l=d.length;if(l!=r(t).length&&!c)return!1;for(var h=l;h--;){var u=d[h];if(!(c?u in t:i.call(t,u)))return!1}var p=a.get(e),f=a.get(t);if(p&&f)return p==t&&f==e;var y=!0;a.set(e,t),a.set(t,e);for(var w=c;++h<l;){var g=e[u=d[h]],m=t[u];if(o)var v=c?o(m,g,u,t,e,a):o(g,m,u,e,t,a);if(!(void 0===v?g===m||s(g,m,n,o,a):v)){y=!1;break}w||(w="constructor"==u)}if(y&&!w){var b=e.constructor,C=t.constructor;b!=C&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof C&&C instanceof C)&&(y=!1)}return a.delete(e),a.delete(t),y}},9470:(e,t,n)=>{var r=n(9934),i=n(1501),o=n(8311),s=o&&o.isSet;e.exports=s?i(s):r},9703:(e,t,n)=>{var r=n(6888);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return -1}},9930:(e,t,n)=>{var r=n(3725),i=Object.create;e.exports=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}()},9934:(e,t,n)=>{var r=n(9139),i=n(6498);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(6768),t(5791))),_N_E=e.O()}]);